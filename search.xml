<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>AIç­”é¢˜åº”ç”¨å¹³å°_3å‰ç«¯åŸºç¡€å¼€å‘</title>
      <link href="/2024/07/05/AI%E7%AD%94%E9%A2%98%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0_3.%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E5%BC%80%E5%8F%91/"/>
      <url>/2024/07/05/AI%E7%AD%94%E9%A2%98%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0_3.%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E5%BC%80%E5%8F%91/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰ç«¯æŠ€æœ¯é€‰å‹"><a href="#å‰ç«¯æŠ€æœ¯é€‰å‹" class="headerlink" title="å‰ç«¯æŠ€æœ¯é€‰å‹"></a>å‰ç«¯æŠ€æœ¯é€‰å‹</h1><ul><li>Vue3</li><li>Vue-cliè„šæ‰‹æ¶</li><li>PiniaçŠ¶æ€ç®¡ç†</li><li>Axiosè¯·æ±‚åº“</li><li>AcroDesignç»„ä»¶åº“</li><li>å‰ç«¯å·¥ç¨‹åŒ–ï¼šESLint+Prettier+TypeScript</li><li>QRCode.jså‰ç«¯ä»£ç ç”Ÿæˆ</li><li>OpenAPIå‰ç«¯ä»£ç ç”Ÿæˆ</li></ul><h1 id="webå‰ç«¯é¡¹ç›®åˆå§‹åŒ–"><a href="#webå‰ç«¯é¡¹ç›®åˆå§‹åŒ–" class="headerlink" title="webå‰ç«¯é¡¹ç›®åˆå§‹åŒ–"></a>webå‰ç«¯é¡¹ç›®åˆå§‹åŒ–</h1><h2 id="ç¡®è®¤ç¯å¢ƒ"><a href="#ç¡®è®¤ç¯å¢ƒ" class="headerlink" title="ç¡®è®¤ç¯å¢ƒ"></a>ç¡®è®¤ç¯å¢ƒ</h2><p>é¦–å…ˆéœ€è¦ç¡®è®¤ç¯å¢ƒï¼šnode.jsç‰ˆæœ¬ï¼š18.16.0</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ£€æŸ¥nodeç‰ˆæœ¬</span></span><br><span class="line">node -v</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ä½¿ç”¨åˆ‡æ¢å’Œç®¡ç†nodeç‰ˆæœ¬çš„å·¥å…·<a href="https://github.com/nvm-sh/nvm">nvm</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ£€æŸ¥nvmç‰ˆæœ¬</span></span><br><span class="line">nvm -v</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h2><p>ä½¿ç”¨Vue-CLIæ¥å¿«é€Ÿåˆå§‹åŒ–vue3çš„é¡¹ç›®ï¼Œå®ƒè‡ªåŠ¨æ•´åˆäº†vue-routerï¼ŒTypeSscriptã€å‰ç«¯å·¥ç¨‹åŒ–ç­‰åº“<br><a href="https://cli.vuejs.org/zh/">Vue CLI</a><br>å®‰è£…å‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g @vue/cli</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œä¹‹åï¼Œä½¿ç”¨<code>vue -V</code>æ¥æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸã€‚<br>å®‰è£…æˆåŠŸåï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤åˆ›å»ºåˆå§‹åŒ–å·¥ç¨‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue create [é¡¹ç›®åç§°]</span><br></pre></td></tr></table></figure><p>æ‰‹åŠ¨é€‰æ‹©ç‰¹æ€§<br><img src="https://fanzher.xyz/img/1722319928745-62b4e0f2-f3e3-4119-a9bc-b9bc0c04491d.png" alt="image.png"><br><img src="https://fanzher.xyz/img/1722320117049-11ab89d4-13f7-4ca5-b280-383e9eaaf46e.png" alt="image.png"><br>é€‰æ‹©å®Œä¹‹åé¡¹ç›®å°±ä¼šè‡ªåŠ¨åŠ è½½è¿™äº›ä¾èµ–ï¼Œç„¶åæ‰“å¼€WebStormï¼Œè¿è¡Œ<code>npm run server</code>,èƒ½æ­£å¸¸è®¿é—®é¡µé¢ï¼Œè¯´æ˜åˆå§‹åŒ–æˆåŠŸäº†ã€‚</p><h2 id="å‰ç«¯å·¥ç¨‹åŒ–é…ç½®"><a href="#å‰ç«¯å·¥ç¨‹åŒ–é…ç½®" class="headerlink" title="å‰ç«¯å·¥ç¨‹åŒ–é…ç½®"></a><strong>å‰ç«¯å·¥ç¨‹åŒ–é…ç½®</strong></h2><p>è„šæ‰‹æ¶å·²ç»é…ç½®äº†prettierä»£ç ç¾åŒ–ã€ESLintä»£ç æ ¡éªŒï¼ŒTypeScriptç±»å‹æ ¡éªŒï¼Œæ ¼å¼åŒ–æ’ä»¶ç­‰ï¼Œä¸éœ€è¦è‡ªå·±å†é…ç½®äº†ã€‚ä¸è¿‡webStormä¸Šè¿˜éœ€è¦å¼€å¯ç¾åŒ–æ’ä»¶<br><img src="https://fanzher.xyz/img/1722320592189-0fbe51b3-f377-4303-a358-ee9966560c3a.png" alt="image.png"><br><img src="https://fanzher.xyz/img/1722320646226-123c521f-ac87-4d50-8a6c-761139aa403e.png" alt="image.png"><br>:::info<br>æœ‰æ—¶å€™ESLintæ ¡éªŒæ¯”è¾ƒä¸¥æ ¼ï¼Œå¦‚æœå› ä¸ºå®ƒå¯¼è‡´çš„ç¼–è¯‘é”™è¯¯ï¼Œå¯ä»¥åœ¨.eslintrc.jsæ·»åŠ å¦‚ä¸‹â€@typescript-eslint&#x2F;ban-ts-commentâ€: â€œoffâ€,<br>:::<br><img src="https://fanzher.xyz/img/1722320818280-9c447deb-7da6-4a3d-8dbe-8cb9b5297954.png" alt="image.png"></p><h2 id="å¼•å…¥ç»„ä»¶åº“"><a href="#å¼•å…¥ç»„ä»¶åº“" class="headerlink" title="å¼•å…¥ç»„ä»¶åº“"></a>å¼•å…¥ç»„ä»¶åº“</h2><p>å¼•å…¥Acro Designç»„ä»¶åº“ï¼š<br><a href="https://arco.design/vue/docs/start">Arco Design Vue</a></p><blockquote><p><strong>æ³¨æ„</strong>ï¼švueçš„ç‰ˆæœ¬éœ€è¦&gt;&#x3D;3.2.0</p></blockquote><p>æ‰§è¡Œå®‰è£…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev @arco-design/web-vue</span><br></pre></td></tr></table></figure><p>æ”¹å˜ä¸»å…¥å£æ–‡ä»¶main.ts,å¼•å…¥ç»„ä»¶åº“</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&quot;./App.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ArcoVue</span> <span class="keyword">from</span> <span class="string">&quot;@arco-design/web-vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@arco-design/web-vue/dist/arco.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;./router&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>);</span><br><span class="line">app.<span class="title function_">use</span>(router);</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title class_">ArcoVue</span>);</span><br><span class="line">app.<span class="title function_">use</span>(pinia);</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>);</span><br></pre></td></tr></table></figure><p>ä¹‹åå¯ä»¥åœ¨app.vueä¸­éšä¾¿å¼•å…¥ä¸€ä¸ªç»„ä»¶ï¼Œçœ‹æœ‰æ²¡æœ‰æ•ˆæœã€‚</p><h2 id="å¼€å‘è§„èŒƒ"><a href="#å¼€å‘è§„èŒƒ" class="headerlink" title="å¼€å‘è§„èŒƒ"></a>å¼€å‘è§„èŒƒ</h2><p>éµå¾ªvue3çš„ç»„åˆå¼API<br><a href="https://cn.vuejs.org/guide/introduction.html#what-is-vue">Vue.js</a><br><a href="https://cn.vuejs.org/guide/extras/composition-api-faq.html">ç»„åˆå¼ API å¸¸è§é—®ç­” | Vue.js (vuejs.org)</a><br>ç¤ºä¾‹ä»£ç </p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=<span class="string">&quot;ts&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="å…¨å±€é€šç”¨å¸ƒå±€"><a href="#å…¨å±€é€šç”¨å¸ƒå±€" class="headerlink" title="å…¨å±€é€šç”¨å¸ƒå±€"></a>å…¨å±€é€šç”¨å¸ƒå±€</h2><h3 id="åŸºç¡€å¸ƒå±€ç»“æ„"><a href="#åŸºç¡€å¸ƒå±€ç»“æ„" class="headerlink" title="åŸºç¡€å¸ƒå±€ç»“æ„"></a>åŸºç¡€å¸ƒå±€ç»“æ„</h3><p>åœ¨å»ºå‰ç«¯é¡µé¢çš„æ—¶å€™ï¼Œé¦–å…ˆéœ€è¦æœ‰ä¸€ä¸ªå…¨å±€çš„å¸ƒå±€çš„æƒ³è±¡ï¼Œä¹‹ååœ¨Layoutsç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªå¸ƒå±€ï¼Œ<code>BasitcLayout.vue</code>,åœ¨app.vueæ ¹ç»„ä»¶ä¸­å¼•å…¥å¸ƒå±€ï¼Œ</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">BasicLayout</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">BasicLayout</span> <span class="keyword">from</span> <span class="string">&quot;@/layouts/BasicLayout.vue&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>ç„¶åå†AcroDesignç»„ä»¶åº“ä¸­å¼•å…¥å¸ƒå±€Layoutç»„ä»¶<br><a href="https://arco.design/vue/component/layout">Arco Design Vue</a><br>é€‰æ‹©è‡ªå·±è§‰å¾—åˆé€‚çš„å¸ƒå±€<br><img src="https://fanzher.xyz/img/1722325445610-e3056965-b7f4-4b5b-9ccd-72c4417e90cd.png" alt="image.png"></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;basicLayout&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">a-layout</span> <span class="attr">style</span>=<span class="string">&quot;height: 100vh&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">a-layout-header</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        é¦–éƒ¨</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">a-layout-header</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">a-layout-content</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        å†…å®¹</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">a-layout-content</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">a-layout-footer</span> <span class="attr">class</span>=<span class="string">&quot;footer&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        åº•éƒ¨</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">a-layout-footer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">a-layout</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h3 id="å…¨å±€åº•éƒ¨æ "><a href="#å…¨å±€åº•éƒ¨æ " class="headerlink" title="å…¨å±€åº•éƒ¨æ "></a>å…¨å±€åº•éƒ¨æ </h3><p>å¯¹äºåº•éƒ¨çš„å†…å®¹ï¼Œé€šå¸¸ä¼šæ·»åŠ ä¸€äº›ç‰ˆæƒä¿¡æ¯ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;a-layout-footer <span class="keyword">class</span>=<span class="string">&quot;footer&quot;</span>&gt;</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://xxx&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>xxxx<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line">      &lt;/a-layout-footer&gt;</span><br></pre></td></tr></table></figure><h3 id="åŠ¨æ€æ›¿æ¢å†…å®¹"><a href="#åŠ¨æ€æ›¿æ¢å†…å®¹" class="headerlink" title="åŠ¨æ€æ›¿æ¢å†…å®¹"></a>åŠ¨æ€æ›¿æ¢å†…å®¹</h3><p>å¯¹äºcontentéƒ¨åˆ†ï¼Œæˆ‘ä»¬éœ€è¦å¯¹äºä¸åŒçš„é¡µé¢å±•ç¤ºä¸åŒçš„å†…å®¹ï¼Œè¿™æ—¶å€™å°±éœ€è¦ç”¨åˆ°<strong>vue-router</strong>è·¯ç”±ç»„ä»¶äº†<br>å…·ä½“æ“ä½œæ˜¯åœ¨router&#x2F;index.tsä¸­ï¼Œæ·»åŠ é¡µé¢çš„è·¯ç”±ä¿¡æ¯ï¼Œä¹‹ååœ¨contentä¸­ï¼Œç›´æ¥æ·»åŠ <router-view>,è¿™æ ·å®ƒå°±ä¼šåœ¨é¡µé¢åœ°å€å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œè‡ªåŠ¨æ¸²æŸ“ä¸åŒçš„é¡µé¢</router-view></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;a-layout-content <span class="keyword">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line">      &lt;/a-layout-content&gt;</span><br></pre></td></tr></table></figure><h3 id="å…¨å±€é¡¶éƒ¨æ "><a href="#å…¨å±€é¡¶éƒ¨æ " class="headerlink" title="å…¨å±€é¡¶éƒ¨æ "></a>å…¨å±€é¡¶éƒ¨æ </h3><p>å¯¹äºé¡¶éƒ¨å±•ç¤ºçš„ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨AcroDesignæä¾›çš„èœå•ç»„ä»¶<strong>Menu</strong>æ¥åˆ›å»º<code>GlobalHeader</code>å¤´éƒ¨ç»„ä»¶ã€‚<br><a href="https://arco.design/vue/component/menu">Arco Design Vue</a></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;a-menu-item</span><br><span class="line">              key=<span class="string">&quot;0&quot;</span></span><br><span class="line">              :style=<span class="string">&quot;&#123; padding: 0, marginRight: &#x27;38px&#x27; &#125;&quot;</span></span><br><span class="line">              disabled</span><br><span class="line">            &gt;</span><br><span class="line">              <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;titleBar&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;logo&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../assets/logo.png&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>èŒƒç­”ç­”<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">            &lt;/a-menu-item&gt;</span><br></pre></td></tr></table></figure><h3 id="é€šç”¨è·¯ç”±èœå•"><a href="#é€šç”¨è·¯ç”±èœå•" class="headerlink" title="é€šç”¨è·¯ç”±èœå•"></a>é€šç”¨è·¯ç”±èœå•</h3><p>ç°æœ‰é—®é¢˜ï¼šèœå•æ éƒ½æ˜¯å†™æ­»çš„ï¼Œè€Œä¸”ç‚¹å‡»ä¸ä¼šè·³è½¬åˆ°ä¸åŒé¡µé¢ï¼Œå¯ä»¥é€šè¿‡è·¯ç”±åŠŸèƒ½æ¥çµæ´»å±•ç¤º<br>ç›®æ ‡ï¼šæ ¹æ®è·¯ç”±é…ç½®ä¿¡æ¯ï¼Œè‡ªåŠ¨ç”Ÿæˆèœå•çš„å†…å®¹<br>å®ç°æ­¥éª¤ï¼š</p><ol><li>æå–é€šç”¨è·¯ç”±æ–‡ä»¶</li><li>èœå•ç»„ä»¶è¯»å–è·¯ç”±ï¼ŒåŠ¨æ€æ¸²æŸ“ä¸åŒé¡µé¢</li><li>ç»‘å®šè·³è½¬äº‹ä»¶</li><li>åŒæ­¥è·¯ç”±çš„æ›´æ–°åˆ°èœå•æ é«˜äº®</li></ol><p><strong>æå–é€šç”¨è·¯ç”±æ–‡ä»¶</strong><br>æŠŠrouter&#x2F;index.tsä¸­çš„è·¯ç”±å˜é‡å®šä¹‰ä¸ºå•ç‹¬çš„è·¯ç”±æ–‡ä»¶routes.ts</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">routes</span>: <span class="title class_">Array</span>&lt;<span class="title class_">RouteRecordRaw</span>&gt; = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;ä¸»é¡µ&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">HomePage</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  ];</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨router&#x2F;index.tsä¸­å¼•å…¥è·¯ç”±</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; routes &#125; <span class="keyword">from</span> <span class="string">&quot;@/router/routes&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(process.<span class="property">env</span>.<span class="property">BASE_URL</span>),</span><br><span class="line">  routes,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>èœå•ç»„ä»¶è¯»å–è·¯ç”±ï¼ŒåŠ¨æ€æ¸²æŸ“èœå•é¡¹</strong></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; routes &#125; <span class="keyword">from</span> <span class="string">&quot;@/router/routes&quot;</span>;</span><br></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;a-menu-item v-<span class="keyword">for</span>=<span class="string">&quot;item in visibleRoutes&quot;</span> :key=<span class="string">&quot;item.path&quot;</span>&gt;</span><br><span class="line">             &#123;&#123; item.<span class="property">name</span> &#125;&#125;</span><br><span class="line">           &lt;/a-menu-item&gt;</span><br></pre></td></tr></table></figure><p><strong>ç»‘å®šè·³è½¬äº‹ä»¶</strong></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="title function_">useRouter</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç‚¹å‡»èœå•è·³è½¬åˆ°å¯¹åº”é¡µé¢</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">doMenuClick</span> = (<span class="params">key: <span class="built_in">string</span></span>) =&gt; &#123;</span><br><span class="line">  router.<span class="title function_">push</span>(&#123;</span><br><span class="line">    <span class="attr">path</span>: key,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;a-col flex=<span class="string">&quot;auto&quot;</span>&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          <span class="language-xml"><span class="tag">&lt;<span class="name">a-menu</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">mode</span>=<span class="string">&quot;horizontal&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">:default-selected-keys</span>=<span class="string">&quot;selectKeys&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            @<span class="attr">menu-item-click</span>=<span class="string">&quot;doMenuClick&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          &gt;</span></span></span><br><span class="line"><span class="language-xml">              ...</span></span><br></pre></td></tr></table></figure><p><strong>åŒæ­¥è·¯ç”±çš„æ›´æ–°åˆ°èœå•æ é«˜äº®</strong><br>åŸç†ï¼šé¦–å…ˆç‚¹å‡»èœå•é¡¹&#x3D;ã€‹è§¦å‘ç‚¹å‡»äº‹ä»¶æ›´æ–°è·¯ç”±&#x3D;ã€‹æ›´æ–°è·¯ç”±åï¼ŒåŒæ­¥å»æ›´æ–°èœå•æ çš„é«˜äº®</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é¡¶éƒ¨æ å½“å‰é€‰ä¸­çš„èœå•é¡¹,é»˜è®¤æ˜¯é¦–é¡µ</span></span><br><span class="line"><span class="keyword">const</span> selectKeys = <span class="title function_">ref</span>([<span class="string">&quot;/&quot;</span>]);</span><br><span class="line"><span class="comment">//å½“å‘ç”Ÿè·¯ç”±è·³è½¬æ—¶ï¼Œè‡ªåŠ¨æ›´æ–°é€‰ä¸­çš„èœå•é¡¹ï¼Œç”±äºå®ƒæ˜¯å“åº”å¼å˜é‡ï¼Œè‡ªåŠ¨æ¸²æŸ“é€‰ä¸­èœå•é¡¹å¯¹åº”çš„é¡µé¢</span></span><br><span class="line">router.<span class="title function_">afterEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span>, failure</span>) =&gt;</span> &#123;</span><br><span class="line">  selectKeys.<span class="property">value</span> = [to.<span class="property">path</span>];</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><strong>å¹¶åœ¨æ¨¡æ¿ä¸­å¼•å…¥å˜é‡</strong></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;a-col flex=<span class="string">&quot;auto&quot;</span>&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          <span class="language-xml"><span class="tag">&lt;<span class="name">a-menu</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">mode</span>=<span class="string">&quot;horizontal&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">:default-selected-keys</span>=<span class="string">&quot;selectKeys&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            @<span class="attr">menu-item-click</span>=<span class="string">&quot;doMenuClick&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          &gt;</span></span></span><br><span class="line"><span class="language-xml">              ...</span></span><br></pre></td></tr></table></figure><p><strong>å…¶ä»–èƒ½åŠ›</strong><br>é€šè¿‡åœ¨è·¯ç”±ä¸­æ·»åŠ å­—æ®µï¼Œæ¥å±•ç¤ºèœå•çš„æ˜¾éš</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/hide&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;éšè—é¡µ&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">HidePage</span>,</span><br><span class="line">    <span class="attr">meta</span>: &#123;</span><br><span class="line">      <span class="attr">hideInMenu</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><p>ç„¶åå°±å¯ä»¥ä½¿ç”¨è¯¥å­—æ®µæ¥è¿‡æ»¤è·¯ç”±æ•°ç»„ï¼Œåªå±•ç¤ºéœ€è¦æ˜¾ç¤ºçš„å†…å®¹</p><h3 id="æ”¯æŒå¤šå¥—å¸ƒå±€"><a href="#æ”¯æŒå¤šå¥—å¸ƒå±€" class="headerlink" title="æ”¯æŒå¤šå¥—å¸ƒå±€"></a>æ”¯æŒå¤šå¥—å¸ƒå±€</h3><p>å¹¶ä¸æ˜¯æ‰€æœ‰çš„é¡µé¢éƒ½ä½¿ç”¨ä¸€å¥—å¸ƒå±€ï¼Œæ¯”å¦‚ç”¨æˆ·çš„æ³¨å†Œç™»å½•é¡µï¼Œæ²¡å¿…è¦è®¾ç½®é¡¶éƒ¨æ çš„ä¿¡æ¯ã€‚<br><strong>æ€è·¯</strong><br>ä½¿ç”¨vue-routerè‡ªå¸¦çš„å­è·¯ç”±æœºåˆ¶ï¼Œå¯ä»¥å¤©ç„¶çš„å®ç°å¸ƒå±€å’Œè·¯ç”±çš„åµŒå¥—ï¼Œä¸åŒçš„çˆ¶è·¯ç”±æŒ‡å®šä¸åŒçš„layout</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/user&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;ç”¨æˆ·é¡µ&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">UserLayout</span>,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&quot;/user/login&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;ç”¨æˆ·ç™»å½•é¡µ&quot;</span>, <span class="attr">component</span>: <span class="title class_">UserLoginPage</span> &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;/user/register&quot;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;ç”¨æˆ·æ³¨å†Œé¡µ&quot;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">UserRegisterPage</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">meta</span>: &#123;</span><br><span class="line">      <span class="attr">hideInMenu</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><p>åœ¨App.vueä¸­ï¼Œéœ€è¦é€‰æ‹©å“ªäº›è·¯ç”±ä½¿ç”¨å“ªä¸€ç§å¸ƒå±€ï¼Œæ ¹æ®ä¸åŒè·¯ç”±è‡ªåŠ¨æ¸²æŸ“</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-if</span>=<span class="string">&quot;route.path.startsWith(&#x27;/user&#x27;)&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">router-view</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-else</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">BasicLayout</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">BasicLayout</span> <span class="keyword">from</span> <span class="string">&quot;@/layouts/BasicLayout.vue&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; useRoute &#125; <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> route = <span class="title function_">useRoute</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="è¯·æ±‚"><a href="#è¯·æ±‚" class="headerlink" title="è¯·æ±‚"></a>è¯·æ±‚</h2><p>å‰åç«¯æ€ä¹ˆè¿›è¡Œè¿æ¥å‘¢ï¼Ÿéœ€è¦å‰ç«¯å‘é€<strong>è¯·æ±‚</strong>è°ƒç”¨åç«¯çš„<strong>æ¥å£ã€‚</strong><br><strong>æ€è·¯ï¼š</strong></p><ol><li>ä½¿ç”¨Axiosç½‘ç»œè¯·æ±‚åº“æ¥è‡ªå®šä¹‰è¯·æ±‚å’Œå“åº”æ‹¦æˆªå™¨ã€è¯·æ±‚åœ°å€ç­‰ç›¸å…³é…ç½®</li><li>ä½¿ç”¨OpenAPIè‡ªåŠ¨ç”Ÿæˆå‰ç«¯è¯·æ±‚åç«¯çš„æ¥å£</li></ol><hr><h3 id="è¯·æ±‚å·¥å…·åº“Axios"><a href="#è¯·æ±‚å·¥å…·åº“Axios" class="headerlink" title="è¯·æ±‚å·¥å…·åº“Axios"></a>è¯·æ±‚å·¥å…·åº“Axios</h3><p>Axioxå®˜ç½‘<br><a href="https://axios-http.com/docs/intro">Getting Started |Â Axios Docs</a><br>ä¸‹è½½axios</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install axios</span><br></pre></td></tr></table></figure><h3 id="å…¨å±€è‡ªå®šä¹‰è¯·æ±‚"><a href="#å…¨å±€è‡ªå®šä¹‰è¯·æ±‚" class="headerlink" title="å…¨å±€è‡ªå®šä¹‰è¯·æ±‚"></a>å…¨å±€è‡ªå®šä¹‰è¯·æ±‚</h3><p>éœ€è¦ç¼–å†™request.tsï¼Œè‡ªå®šä¹‰å…¨å±€çš„è¯·æ±‚åœ°å€ï¼Œè¶…æ—¶æ—¶é—´ã€è¯·æ±‚å’Œå“åº”æ‹¦æˆªå™¨ç­‰ä¿¡æ¯ã€‚<br>æ¯”å¦‚å¯ä»¥åœ¨å…¨å±€å“åº”æ‹¦æˆªå™¨ä¸­ï¼Œé€šè¿‡å“åº”çš„dataä¸­ï¼Œè·å–åç«¯è¿”å›çš„æ•°æ®ï¼Œæ¯”å¦‚codeï¼Œæ£€éªŒcodeæ˜¯å¦åˆæ³•ã€‚</p><blockquote><p>æ³¨æ„ï¼šåœ¨åˆ›å»ºaxiosè¯·æ±‚æ—¶ï¼Œä¸€å®šè¦åŠ <code>**withCredentials: true**</code>**,**å¦åˆ™åœ¨å‘é€è¯·æ±‚çš„æ—¶å€™ä¸ä¼šæºå¸¦cookieï¼Œæ— æ³•å®Œæˆç™»å½•åŠŸèƒ½</p></blockquote><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Message</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@arco-design/web-vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> myAxios = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="string">&quot;xxx&quot;</span>,</span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">60000</span>,</span><br><span class="line">  <span class="attr">withCredentials</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Add a request interceptor</span></span><br><span class="line">myAxios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="keyword">function</span> (<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="comment">// Do something before request is sent</span></span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="comment">// Do something with request error</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Add a response interceptor</span></span><br><span class="line">myAxios.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="keyword">function</span> (<span class="params">response</span>) &#123;</span><br><span class="line">    <span class="comment">// Any status code that lie within the range of 2xx cause this function to trigger</span></span><br><span class="line">    <span class="comment">// Do something with response data</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(response);</span><br><span class="line">    <span class="keyword">const</span> &#123; data &#125; = response;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (data.<span class="property">code</span> === <span class="number">40100</span>) &#123;</span><br><span class="line">      <span class="comment">//å¦‚æœä¸æ˜¯è·å–ç”¨æˆ·ä¿¡æ¯çš„è¯·æ±‚ï¼Œæˆ–è€…å½“å‰é¡µé¢å·²ç»åœ¨ç™»å½•é¡µï¼Œåˆ™è·³è½¬åˆ°ç™»å½•é¡µ</span></span><br><span class="line">      <span class="keyword">if</span> (</span><br><span class="line">        !response.<span class="property">request</span>.<span class="property">responseURL</span>.<span class="title function_">includes</span>(<span class="string">&quot;/user/get/login&quot;</span>) &amp;&amp;</span><br><span class="line">        !<span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">pathname</span>.<span class="title function_">includes</span>(<span class="string">&quot;/user/login&quot;</span>)</span><br><span class="line">      ) &#123;</span><br><span class="line">        <span class="title class_">Message</span>.<span class="title function_">warning</span>(<span class="string">&quot;è¯·å…ˆç™»å½•&quot;</span>);</span><br><span class="line">        <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> = <span class="string">`/user/login?redirect=<span class="subst">$&#123;<span class="variable language_">window</span>.location.href&#125;</span>`</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="comment">// Any status codes that falls outside the range of 2xx cause this function to trigger</span></span><br><span class="line">    <span class="comment">// Do something with response error</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> myAxios;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="è‡ªåŠ¨ç”Ÿæˆè¯·æ±‚ä»£ç "><a href="#è‡ªåŠ¨ç”Ÿæˆè¯·æ±‚ä»£ç " class="headerlink" title="è‡ªåŠ¨ç”Ÿæˆè¯·æ±‚ä»£ç "></a>è‡ªåŠ¨ç”Ÿæˆè¯·æ±‚ä»£ç </h3><p>ä¼ ç»Ÿçš„æ–¹æ³•éœ€è¦ä¸ºæ¯ä¸€ä¸ªæ¥å£ï¼Œç¼–å†™ä¸€ä¸ªè¯·æ±‚ï¼Œç°åœ¨OpenAPIå¯ä»¥é€šè¿‡åç«¯ç”Ÿæˆçš„æ¥å£æ–‡æ¡£ï¼Œè‡ªåŠ¨ç”Ÿæˆå¯¹åç«¯æ¥å£çš„è¯·æ±‚ã€‚<br><a href="https://www.npmjs.com/package/@umijs/openapi">@umijs&#x2F;openapi</a><br>å®‰è£…å‘½ä»¤</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i --save-dev <span class="meta">@umijs</span>/openapi</span><br></pre></td></tr></table></figure><p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œæ–°å»º<code>openapi.config.ts</code>æ–‡ä»¶ï¼Œæ ¹æ®è‡ªå·±çš„éœ€è¦å®šåˆ¶ç”Ÿæˆçš„ä»£ç </p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; generateService &#125; = <span class="built_in">require</span>(<span class="string">&quot;@umijs/openapi&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_">generateService</span>(&#123;</span><br><span class="line">  <span class="attr">requestLibPath</span>: <span class="string">&quot;import request from &#x27;@/request&#x27;&quot;</span>,</span><br><span class="line">  <span class="attr">schemaPath</span>: <span class="string">&quot;http://localhost:8101/api/v2/api-docs&quot;</span>,</span><br><span class="line">  <span class="attr">serversPath</span>: <span class="string">&quot;./src&quot;</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>requestLibPathï¼šè¯·æ±‚åº“è·¯å¾„ï¼Œè¿™é‡Œé€‰æ‹©è‡ªå·±é€šè¿‡axiosè‡ªå®šä¹‰çš„è¯·æ±‚æ–‡ä»¶</li><li>schemaPathï¼šè¯·æ±‚çš„æ¥å£æ–‡æ¡£åœ°å€</li><li>serversPathï¼šç”Ÿæˆæ–‡ä»¶ä¿å­˜çš„ä½ç½®</li></ul><p>åœ¨package.jsonä¸­ï¼Œåœ¨scriptæ·»åŠ <code>&quot;openapi&quot; : &quot;ts-node openapi.config.ts&quot;</code><br>ç„¶åè¿è¡Œopenapiï¼Œå¦‚æœæŠ¥é”™ï¼Œå¯ä»¥æŠŠts-nodeæ¢æˆnode<br>å¦‚æœæœ‰æŠ¥é”™ï¼Œéœ€è¦åœ¨.eslintrc.jsä¸­æ·»åŠ æ ¡éªŒè§„åˆ™</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="string">&quot;no-console&quot;</span>: process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&quot;production&quot;</span> ? <span class="string">&quot;warn&quot;</span> : <span class="string">&quot;off&quot;</span>,</span><br><span class="line">    <span class="string">&quot;no-debugger&quot;</span>: process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&quot;production&quot;</span> ? <span class="string">&quot;warn&quot;</span> : <span class="string">&quot;off&quot;</span>,</span><br><span class="line">    <span class="string">&quot;@typescript-eslint/ban-ts-comment&quot;</span>: <span class="string">&quot;off&quot;</span>,</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><h2 id="å…¨å±€çŠ¶æ€ç®¡ç†"><a href="#å…¨å±€çŠ¶æ€ç®¡ç†" class="headerlink" title="å…¨å±€çŠ¶æ€ç®¡ç†"></a>å…¨å±€çŠ¶æ€ç®¡ç†</h2><p>å…¨å±€çŠ¶æ€ç®¡ç†å°±æ˜¯å¯¹äºæ‰€æœ‰çš„é¡µé¢ï¼Œéƒ½å…±äº«çš„å˜é‡ï¼Œè€Œä¸æ˜¯å±äºæŸä¸€ä¸ªå…·ä½“çš„é¡µé¢ã€‚<br>é€šå¸¸æŠŠç”¨æˆ·çš„ç™»å½•ä¿¡æ¯ä½œä¸ºå…¨å±€å…±äº«çš„å˜é‡ï¼Œå› ä¸ºæ¯ä¸ªé¡µé¢éƒ½éœ€è¦ç”¨åˆ°ç”¨æˆ·ç™»å½•ä¿¡æ¯ã€‚<br><strong>Pinia</strong>æ˜¯ä¸€ä¸ªä¸»æµçš„å…¨å±€çŠ¶æ€ç®¡ç†åº“<br><a href="https://pinia.vuejs.org/zh/getting-started.html">Pinia ğŸ</a><br>1.é¦–å…ˆå®‰è£…pinia</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install pinia</span><br></pre></td></tr></table></figure><p>2.ä¹‹ååœ¨é¡¹ç›®å…¥å£æ–‡ä»¶<code>main.ts</code>ä¸­å¼•å…¥ç»„ä»¶</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&quot;./App.vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>);</span><br><span class="line"><span class="keyword">const</span> pinia = <span class="title function_">createPinia</span>();</span><br><span class="line">app.<span class="title function_">use</span>(pinia);</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>3.å®šä¹‰çŠ¶æ€ï¼Œåœ¨storeç›®å½•ä¸‹æ–°å»ºuseræ¨¡å—ï¼Œå®šä¹‰ç”¨æˆ·çš„çŠ¶æ€ã€è¿œç¨‹è·å–ã€ä¿®æ”¹çŠ¶æ€ç­‰</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; getLoginUserUsingGet &#125; <span class="keyword">from</span> <span class="string">&quot;@/api/userController&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">AccessEnum</span> <span class="keyword">from</span> <span class="string">&quot;@/access/accessEnum&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç™»å½•ç”¨æˆ·ä¿¡æ¯å…¨å±€çŠ¶æ€</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useLoginUserStore = <span class="title function_">defineStore</span>(<span class="string">&quot;loginUser&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> loginUser = ref&lt;<span class="variable constant_">API</span>.<span class="property">LoginUserVO</span>&gt;(&#123;</span><br><span class="line">    <span class="attr">userName</span>: <span class="string">&quot;æœªç™»å½•&quot;</span>,</span><br><span class="line">    <span class="attr">userAvatar</span>:</span><br><span class="line">      <span class="string">&quot;https://p1-arco.byteimg.com/tos-cn-i-uwbnlip3yd/3ee5f13fb09879ecb5185e440cef6eb9123.png~tplv-uwbnlip3yd-webp.webp&quot;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">setLoginUser</span>(<span class="params">newLoginUser: API.LoginUserVO</span>) &#123;</span><br><span class="line">    loginUser.<span class="property">value</span> = newLoginUser;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * è·å–ç™»å½•ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fetchLoginUser</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">getLoginUserUsingGet</span>();</span><br><span class="line">    <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">code</span> === <span class="number">0</span> &amp;&amp; res.<span class="property">data</span>.<span class="property">data</span>) &#123;</span><br><span class="line">      loginUser.<span class="property">value</span> = res.<span class="property">data</span>.<span class="property">data</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      loginUser.<span class="property">value</span> = &#123; <span class="attr">userRole</span>: <span class="title class_">AccessEnum</span>.<span class="property">NOT_LOGIN</span>, <span class="attr">userName</span>: <span class="string">&quot;æœªç™»å½•&quot;</span> &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123; loginUser, setLoginUser, fetchLoginUser &#125;;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>4.ä½¿ç”¨çŠ¶æ€ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨storeä¸­å¯¼å‡ºçš„çŠ¶æ€å˜é‡å’Œå‡½æ•°<br>å¯ä»¥åœ¨é¦–æ¬¡è¿›å…¥é¡µé¢æ—¶ï¼Œå°è¯•è·å–ç”¨æˆ·ç™»å½•ä¿¡æ¯</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> loginUserStore = <span class="title function_">useLoginUserStore</span>();</span><br><span class="line">loginUserStore.<span class="title function_">fetchLoginUser</span>();</span><br></pre></td></tr></table></figure><p>åœ¨ä»»ä½•é¡µé¢éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨è¯¥çŠ¶æ€å˜é‡</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(loginUserStore.<span class="property">loginUser</span>) &#125;&#125;</span><br></pre></td></tr></table></figure><p>é¡¶éƒ¨æ å³ä¾§å±•ç¤ºç”¨æˆ·ä¿¡æ¯</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;a-col flex=<span class="string">&quot;100px&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;loginUserStore.loginUser.id&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;&#123; loginUserStore.loginUser.userName ?? &quot;æ— å&quot; &#125;&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">a-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/user/login&quot;</span>&gt;</span>ç™»å½•<span class="tag">&lt;/<span class="name">a-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/a-col&gt;</span><br></pre></td></tr></table></figure><h2 id="å…¨å±€æƒé™ç®¡ç†"><a href="#å…¨å±€æƒé™ç®¡ç†" class="headerlink" title="å…¨å±€æƒé™ç®¡ç†"></a>å…¨å±€æƒé™ç®¡ç†</h2><p>éœ€æ±‚ï¼šèƒ½å¤Ÿçµæ´»çš„é…ç½®æ¯ä¸ªé¡µé¢çš„è®¿é—®æƒé™ï¼Œç”±å…¨å±€çš„æƒé™æ ¡éªŒç®¡ç†è¿›è¡Œæ ¡éªŒå’Œæ‹¦æˆªï¼Œä¸éœ€è¦åœ¨æ¯ä¸ªé¡µé¢ä¸­æ·»åŠ æƒé™æ ¡éªŒï¼Œç®€åŒ–å¼€å‘<br>å®ç°æ–¹æ¡ˆï¼š</p><ol><li>åœ¨è·¯ç”±é…ç½®æ–‡ä»¶ï¼Œå®šä¹‰é¡µé¢çš„è®¿é—®æƒé™</li><li>ä½¿ç”¨å…¨å±€æƒé™æ ¡éªŒå™¨ï¼Œå½“æ¯æ¬¡è®¿é—®ä¸€ä¸ªé¡µé¢æ—¶ï¼Œå…ˆçœ‹è¯¥é¡µé¢çš„è·¯ç”±ä¸­æ˜¯å¦é…ç½®ç›¸å…³æƒé™ï¼Œå¹¶è¿›è¡Œç›¸åº”çš„æ‹¦æˆª</li></ol><p>æ–°å»ºä¸€ä¸ªaccessç›®å½•ï¼Œæ‰€æœ‰æƒé™ç›¸å…³çš„æ–‡ä»¶éƒ½æ”¾åœ¨è¿™é‡Œé¢ï¼Œæ¨¡å—åŒ–ç®¡ç†ï¼Œåªè¦ä¸å¼•å…¥ï¼Œå°±ä¸ä¼šç”Ÿæ•ˆ<br>å®šä¹‰æƒé™æšä¸¾</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æƒé™å®šä¹‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">AccessEnum</span> = &#123;</span><br><span class="line">  <span class="attr">NOT_LOGIN</span>: <span class="string">&quot;notLogin&quot;</span>,</span><br><span class="line">  <span class="attr">USER</span>: <span class="string">&quot;user&quot;</span>,</span><br><span class="line">  <span class="attr">ADMIN</span>: <span class="string">&quot;admin&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">AccessEnum</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>routes.tsä¸­æ·»åŠ æµ‹è¯•è·¯ç”±</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   <span class="attr">path</span>: <span class="string">&quot;/admin/user&quot;</span>,</span><br><span class="line">   <span class="attr">name</span>: <span class="string">&quot;ç”¨æˆ·ç®¡ç†&quot;</span>,</span><br><span class="line">   <span class="attr">component</span>: <span class="title class_">AdminUserPage</span>,</span><br><span class="line">   <span class="attr">meta</span>: &#123;</span><br><span class="line">     <span class="attr">access</span>: <span class="title class_">AccessEnum</span>.<span class="property">ADMIN</span>,</span><br><span class="line">   &#125;,</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure><p>ç¼–å†™é€šç”¨çš„æƒé™æ ¡éªŒæ–¹æ³•<br>å°†æƒé™æ ¡éªŒæ–¹æ³•æŠ½ç¦»å‡ºä¸€ä¸ªå…¬å…±çš„æ–¹æ³•ï¼ŒcheckAccess.ts</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">AccessEnum</span> <span class="keyword">from</span> <span class="string">&quot;@/access/accessEnum&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">checkAccess</span> = (<span class="params"></span></span><br><span class="line"><span class="params">  loginUser: API.LoginUserVO,</span></span><br><span class="line"><span class="params">  needAccess = AccessEnum.NOT_LOGIN</span></span><br><span class="line"><span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> loginUserAccess = loginUser?.<span class="property">userRole</span> ?? <span class="title class_">AccessEnum</span>.<span class="property">NOT_LOGIN</span>;</span><br><span class="line">  <span class="comment">//å¦‚æœä¸éœ€è¦ç™»å½•æƒé™ï¼Œç›´æ¥é€šè¡Œ</span></span><br><span class="line">  <span class="keyword">if</span> (needAccess === <span class="title class_">AccessEnum</span>.<span class="property">NOT_LOGIN</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//å¦‚æœéœ€è¦ç”¨æˆ·æƒé™æ‰èƒ½è®¿é—®</span></span><br><span class="line">  <span class="keyword">if</span> (needAccess === <span class="title class_">AccessEnum</span>.<span class="property">USER</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (loginUserAccess === <span class="title class_">AccessEnum</span>.<span class="property">NOT_LOGIN</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//å¦‚æœéœ€è¦ç®¡ç†å‘˜æƒé™æ‰èƒ½è®¿é—®</span></span><br><span class="line">  <span class="keyword">if</span> (needAccess === <span class="title class_">AccessEnum</span>.<span class="property">ADMIN</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (loginUserAccess !== <span class="title class_">AccessEnum</span>.<span class="property">ADMIN</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> checkAccess;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç¼–å†™å…¨å±€æƒé™æ ¡éªŒæ ¸å¿ƒæ–‡ä»¶index.ts<br>æ€è·¯ï¼š</p><ol><li>é¦–å…ˆåˆ¤æ–­é¡µé¢æ˜¯å¦éœ€è¦ç™»å½•æƒé™ï¼Œå¦‚æœä¸éœ€è¦ï¼Œç›´æ¥æ”¾è¡Œ</li><li>å¦‚æœéœ€è¦ç™»å½•<ol><li>å¦‚æœæœªç™»å½•ï¼Œè·³è½¬åˆ°ç™»å½•é¡µé¢</li><li>å¦‚æœå·²ç™»å½•ï¼Œåˆ¤æ–­å·²ç™»å½•ç”¨æˆ·æ˜¯å¦æœ‰è®¿é—®é¡µé¢çš„æƒé™ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™è·³è½¬åˆ°æ— æƒé™é¡µé¢</li></ol></li></ol><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;@/router&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useLoginUserStore &#125; <span class="keyword">from</span> <span class="string">&quot;@/store/userStore&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">AccessEnum</span> <span class="keyword">from</span> <span class="string">&quot;@/access/accessEnum&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> checkAccess <span class="keyword">from</span> <span class="string">&quot;@/access/checkAccess&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿›å…¥é¡µé¢å‰ï¼Œè¿›è¡Œæ‹¦æˆªæ ¡éªŒ</span></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="keyword">async</span> (to, <span class="keyword">from</span>, next) =&gt; &#123;</span><br><span class="line">  <span class="comment">//è·å–å½“å‰ç™»å½•ç”¨æˆ·</span></span><br><span class="line">  <span class="keyword">const</span> loginUserStore = <span class="title function_">useLoginUserStore</span>();</span><br><span class="line">  <span class="keyword">let</span> loginUser = loginUserStore.<span class="property">loginUser</span>;</span><br><span class="line">  <span class="keyword">if</span> (!loginUser || !loginUser.<span class="property">userRole</span>) &#123;</span><br><span class="line">    <span class="keyword">await</span> loginUserStore.<span class="title function_">fetchLoginUser</span>();</span><br><span class="line">    loginUser = loginUserStore.<span class="property">loginUser</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//è·å–å½“å‰æƒ³è¦è®¿é—®çš„é¡µé¢éœ€è¦çš„æƒé™</span></span><br><span class="line">  <span class="keyword">const</span> needAccess = (to.<span class="property">meta</span>?.<span class="property">access</span> <span class="keyword">as</span> <span class="built_in">string</span>) ?? <span class="title class_">AccessEnum</span>.<span class="property">NOT_LOGIN</span>;</span><br><span class="line">  <span class="comment">//è¦è·³è½¬çš„é¡µé¢å¿…é¡»ç™»å½•</span></span><br><span class="line">  <span class="keyword">if</span> (needAccess != <span class="title class_">AccessEnum</span>.<span class="property">NOT_LOGIN</span>) &#123;</span><br><span class="line">    <span class="comment">//å¦‚æœå½“å‰ç”¨æˆ·æ²¡æœ‰ç™»å½•ï¼Œéœ€è¦è·³è½¬åˆ°ç™»å½•é¡µé¢ï¼Œå…ˆè¿›è¡Œç™»å½•</span></span><br><span class="line">    <span class="keyword">if</span> (</span><br><span class="line">      !loginUser ||</span><br><span class="line">      !loginUser.<span class="property">userRole</span> ||</span><br><span class="line">      loginUser.<span class="property">userRole</span> === <span class="title class_">AccessEnum</span>.<span class="property">NOT_LOGIN</span></span><br><span class="line">    ) &#123;</span><br><span class="line">      <span class="title function_">next</span>(<span class="string">`/user/login?redirect=<span class="subst">$&#123;to.fullPath&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¦‚æœå·²ç»ç™»å½•ï¼Œé‚£ä¹ˆåˆ¤æ–­æƒé™æ˜¯å¦è¶³å¤Ÿï¼Œå¦‚æœä¸å¤Ÿï¼Œè·³è½¬åˆ°æ— æƒé™é¡µ</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="title function_">checkAccess</span>(loginUser, needAccess)) &#123;</span><br><span class="line">      <span class="title function_">next</span>(<span class="string">`/noAuth`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">next</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼špiniaçš„åˆå§‹åŒ–ï¼Œå¿…é¡»æ”¾åœ¨è¿™æ®µä»£ç çš„å‰é¢ï¼Œæ‰€ä»¥éœ€è¦å°†useLoginUserStateæ”¾åˆ°router.beforeEach()é‡Œé¢</p></blockquote><p><a href="https://pinia.vuejs.org/zh/core-concepts/outside-component-usage.html">Pinia</a><a href="https://pinia.vuejs.org/zh/core-concepts/outside-component-usage.html"> ğŸ</a><br>åœ¨ç¨‹åºå…¥å£æ–‡ä»¶main.tsä¸­å¼•å…¥è¯¥ç›®å½•å°±å¯ä»¥äº†</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;@/access&quot;</span>;</span><br></pre></td></tr></table></figure><p><strong>æ ¹æ®ä¸åŒæƒé™æ¸²æŸ“ä¸åŒèœå•æ </strong><br>éœ€æ±‚ï¼šæ ¹æ®ä¸åŒçš„æƒé™æ˜¾ç¤ºä¸åŒçš„èœå•æ <br>åŸç†ï¼šè·Ÿä¸Šé¢æ§åˆ¶è·¯ç”±çš„æ˜¾éšä¸€æ ·ï¼Œé€šè¿‡åœ¨è·¯ç”±ä¸­æ·»åŠ æƒé™å­—æ®µï¼Œæ¥è¿›è¡Œç­›é€‰<br>ä¾‹å¦‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/answer/result/:id&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;ç­”é¢˜ç»“æœ&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">AnswerResultPage</span>,</span><br><span class="line">    <span class="attr">props</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">meta</span>: &#123;</span><br><span class="line">      <span class="attr">hideInMenu</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">access</span>: <span class="title class_">AccessEnum</span>.<span class="property">USER</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> visibleRoutes = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> routes.<span class="title function_">filter</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (item.<span class="property">meta</span>?.<span class="property">hideInMenu</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ ¹æ®æƒé™éšè—èœå•æ </span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="title function_">checkAccess</span>(loginUserStore.<span class="property">loginUser</span>, item.<span class="property">meta</span>?.<span class="property">access</span> <span class="keyword">as</span> <span class="built_in">string</span>)) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">useRouter</span>();</span><br><span class="line"><span class="comment">//é¡¶éƒ¨æ å½“å‰é€‰ä¸­çš„èœå•é¡¹,é»˜è®¤æ˜¯é¦–é¡µ</span></span><br><span class="line"><span class="keyword">const</span> selectKeys = <span class="title function_">ref</span>([<span class="string">&quot;/&quot;</span>]);</span><br><span class="line"><span class="comment">//å½“å‘ç”Ÿè·¯ç”±è·³è½¬æ—¶ï¼Œè‡ªåŠ¨æ›´æ–°é€‰ä¸­çš„èœå•é¡¹ï¼Œç”±äºå®ƒæ˜¯å“åº”å¼å˜é‡ï¼Œè‡ªåŠ¨æ¸²æŸ“é€‰ä¸­èœå•é¡¹å¯¹åº”çš„é¡µé¢</span></span><br><span class="line">router.<span class="title function_">afterEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span>, failure</span>) =&gt;</span> &#123;</span><br><span class="line">  selectKeys.<span class="property">value</span> = [to.<span class="property">path</span>];</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//ç‚¹å‡»èœå•è·³è½¬åˆ°å¯¹åº”é¡µé¢</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">doMenuClick</span> = (<span class="params">key: <span class="built_in">string</span></span>) =&gt; &#123;</span><br><span class="line">  router.<span class="title function_">push</span>(&#123;</span><br><span class="line">    <span class="attr">path</span>: key,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="å…¨å±€å…¥å£æ–‡ä»¶"><a href="#å…¨å±€å…¥å£æ–‡ä»¶" class="headerlink" title="å…¨å±€å…¥å£æ–‡ä»¶"></a>å…¨å±€å…¥å£æ–‡ä»¶</h2><p>å¯ä»¥åœ¨App.vueä¸­é¢„ç•™ä¸€ä¸ªåˆå§‹åŒ–é€»è¾‘ä»£ç </p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å…¨å±€åˆå§‹åŒ–å‡½æ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">init</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ¬¢è¿æ¥åˆ°èŒƒç­”ç­”AIç­”é¢˜åº”ç”¨å¹³å°&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">init</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="é€šç”¨ç»„ä»¶-MarkDownç¼–è¾‘å™¨"><a href="#é€šç”¨ç»„ä»¶-MarkDownç¼–è¾‘å™¨" class="headerlink" title="é€šç”¨ç»„ä»¶-MarkDownç¼–è¾‘å™¨"></a>é€šç”¨ç»„ä»¶-MarkDownç¼–è¾‘å™¨</h2><p>æ¨èçš„ä¸€å¥—markdownç¼–è¾‘å™¨ï¼š<a href="https://github.com/bytedance/bytemd">GitHub - bytedance&#x2F;bytemd: ByteMD v1 repository</a><br>ä¸‹è½½ç¼–è¾‘å™¨ä¸»é¢˜ã€gfmè¡¨æ ¼æ”¯æŒã€highlightä»£ç é«˜äº®ç­‰æ’ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i @bytemd/vue-next</span><br><span class="line">npm i @bytemd/plugin-highlight @bytemd/plugin-gfm</span><br></pre></td></tr></table></figure><p>æ–°å»ºMdEditorç»„ä»¶</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Editor</span> <span class="attr">:value</span>=<span class="string">&quot;value&quot;</span> <span class="attr">:plugins</span>=<span class="string">&quot;plugins&quot;</span> @<span class="attr">change</span>=<span class="string">&quot;handleChange&quot;</span> /&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> gfm <span class="keyword">from</span> <span class="string">&quot;@bytemd/plugin-gfm&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; <span class="title class_">Editor</span>, <span class="title class_">Viewer</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@bytemd/vue&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> plugins = [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">gfm</span>(),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// Add more plugins here</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">components</span>: &#123; <span class="title class_">Editor</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> &#123; <span class="attr">value</span>: <span class="string">&quot;&quot;</span>, plugins &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">handleChange</span>(<span class="params">v</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.<span class="property">value</span> = v;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ–°å»ºMdViewerç»„ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;Viewer :value=&quot;value&quot; :plugins=&quot;plugins&quot; /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">  import &#123; Viewer &#125; from &quot;@bytemd/vue-next&quot;;</span><br><span class="line">  import highlight from &quot;@bytemd/plugin-highlight&quot;;</span><br><span class="line">  import gfm from &quot;@bytemd/plugin-gfm&quot;;</span><br><span class="line">  import &#123; withDefaults, defineProps &#125; from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line"> * å®šä¹‰ç»„ä»¶ç±»å‹</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line">  interface Props &#123;</span><br><span class="line">    value: string;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  const plugins = [gfm(), highlight()];</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line"> * ç»™ç»„ä»¶æŒ‡å®šåˆå§‹å€¼</span><br><span class="line"> */</span><br><span class="line">  const props = withDefaults(defineProps&lt;Props&gt;(), &#123;</span><br><span class="line">    value: () =&gt; &quot;&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="é€šç”¨ç»„ä»¶-å›¾ç‰‡ä¸Šä¼ "><a href="#é€šç”¨ç»„ä»¶-å›¾ç‰‡ä¸Šä¼ " class="headerlink" title="é€šç”¨ç»„ä»¶-å›¾ç‰‡ä¸Šä¼ "></a>é€šç”¨ç»„ä»¶-å›¾ç‰‡ä¸Šä¼ </h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;a-space direction=&quot;vertical&quot; :style=&quot;&#123; width: &#x27;100%&#x27; &#125;&quot;&gt;</span><br><span class="line">    &lt;a-upload</span><br><span class="line">      :fileList=&quot;file ? [file] : []&quot;</span><br><span class="line">      :show-file-list=&quot;false&quot;</span><br><span class="line">      :custom-request=&quot;customRequest&quot;</span><br><span class="line">      &gt;</span><br><span class="line">      &lt;template #upload-button&gt;</span><br><span class="line">        &lt;div</span><br><span class="line">          :class=&quot;`arco-upload-list-item$&#123;</span><br><span class="line">          file &amp;&amp; file.status === &#x27;error&#x27;</span><br><span class="line">          ? &#x27; arco-upload-list-item-error&#x27;</span><br><span class="line">          : &#x27;&#x27;</span><br><span class="line">          &#125;`&quot;</span><br><span class="line">          &gt;</span><br><span class="line">          &lt;div</span><br><span class="line">            class=&quot;arco-upload-list-picture custom-upload-avatar&quot;</span><br><span class="line">            v-if=&quot;file &amp;&amp; file.url&quot;</span><br><span class="line">            &gt;</span><br><span class="line">            &lt;img :src=&quot;file.url&quot; /&gt;</span><br><span class="line">            &lt;div class=&quot;arco-upload-list-picture-mask&quot;&gt;</span><br><span class="line">              &lt;IconEdit /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;a-progress</span><br><span class="line">              v-if=&quot;file.status === &#x27;uploading&#x27; &amp;&amp; file.percent &lt; 100&quot;</span><br><span class="line">              :percent=&quot;file.percent&quot;</span><br><span class="line">              type=&quot;circle&quot;</span><br><span class="line">              size=&quot;mini&quot;</span><br><span class="line">              :style=&quot;&#123;</span><br><span class="line">              position: &#x27;absolute&#x27;,</span><br><span class="line">              left: &#x27;50%&#x27;,</span><br><span class="line">              top: &#x27;50%&#x27;,</span><br><span class="line">              transform: &#x27;translateX(-50%) translateY(-50%)&#x27;,</span><br><span class="line">              &#125;&quot;</span><br><span class="line">              /&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;arco-upload-picture-card&quot; v-else&gt;</span><br><span class="line">            &lt;div class=&quot;arco-upload-picture-card-text&quot;&gt;</span><br><span class="line">              &lt;IconPlus /&gt;</span><br><span class="line">              &lt;div style=&quot;margin-top: 10px; font-weight: 600&quot;&gt;ä¸Šä¼ &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/a-upload&gt;</span><br><span class="line">  &lt;/a-space&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">  import &#123; IconEdit, IconPlus &#125; from &quot;@arco-design/web-vue/es/icon&quot;;</span><br><span class="line">  import &#123; ref, withDefaults, defineProps &#125; from &quot;vue&quot;;</span><br><span class="line">  import &#123; uploadFileUsingPost &#125; from &quot;@/api/fileController&quot;;</span><br><span class="line">  import &#123; Message &#125; from &quot;@arco-design/web-vue&quot;;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line"> * å®šä¹‰ç»„ä»¶å±æ€§ç±»å‹</span><br><span class="line"> */</span><br><span class="line">  interface Props &#123;</span><br><span class="line">    biz: string;</span><br><span class="line">    onChange?: (url: string) =&gt; void;</span><br><span class="line">      value?: string;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line"> * ç»™ç»„ä»¶æŒ‡å®šåˆå§‹å€¼</span><br><span class="line"> */</span><br><span class="line">  const props = withDefaults(defineProps&lt;Props&gt;(), &#123;</span><br><span class="line">    value: () =&gt; &quot;&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  const file = ref();</span><br><span class="line">  if (props.value) &#123;</span><br><span class="line">    file.value = &#123;</span><br><span class="line">      url: props.value,</span><br><span class="line">      percent: 100,</span><br><span class="line">      status: &quot;done&quot;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // è‡ªå®šä¹‰è¯·æ±‚</span><br><span class="line">  const customRequest = async (option: any) =&gt; &#123;</span><br><span class="line">    const &#123; onError, onSuccess, fileItem &#125; = option;</span><br><span class="line"></span><br><span class="line">    const res: any = await uploadFileUsingPost(</span><br><span class="line">      &#123; biz: props.biz &#125;,</span><br><span class="line">      &#123;&#125;,</span><br><span class="line">      fileItem.file</span><br><span class="line">    );</span><br><span class="line">    if (res.data.code === 0 &amp;&amp; res.data.data) &#123;</span><br><span class="line">      const url = res.data.data;</span><br><span class="line">      file.value = &#123;</span><br><span class="line">        name: fileItem.name,</span><br><span class="line">        file: fileItem.file,</span><br><span class="line">        url,</span><br><span class="line">      &#125;;</span><br><span class="line">      props.onChange?.(url);</span><br><span class="line">      onSuccess();</span><br><span class="line">      console.log(file.value);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      Message.error(&quot;ä¸Šä¼ å¤±è´¥ï¼Œ&quot; + res.data.message || &quot;&quot;);</span><br><span class="line">      onError(new Error(res.data.message));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="å‰ç«¯åŸºç¡€é¡µé¢çš„å¼€å‘"><a href="#å‰ç«¯åŸºç¡€é¡µé¢çš„å¼€å‘" class="headerlink" title="å‰ç«¯åŸºç¡€é¡µé¢çš„å¼€å‘"></a>å‰ç«¯åŸºç¡€é¡µé¢çš„å¼€å‘</h1><h2 id="ç”¨æˆ·æ¨¡å—"><a href="#ç”¨æˆ·æ¨¡å—" class="headerlink" title="ç”¨æˆ·æ¨¡å—"></a>ç”¨æˆ·æ¨¡å—</h2><h3 id="æ·»åŠ è·¯ç”±"><a href="#æ·»åŠ è·¯ç”±" class="headerlink" title="æ·»åŠ è·¯ç”±"></a>æ·»åŠ è·¯ç”±</h3><p>é¦–å…ˆéœ€è¦åœ¨routes.tsä¸­é…ç½®è·¯ç”±ä¿¡æ¯</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/user&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;ç”¨æˆ·é¡µ&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">UserLayout</span>,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&quot;/user/login&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;ç”¨æˆ·ç™»å½•é¡µ&quot;</span>, <span class="attr">component</span>: <span class="title class_">UserLoginPage</span> &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;/user/register&quot;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;ç”¨æˆ·æ³¨å†Œé¡µ&quot;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">UserRegisterPage</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">meta</span>: &#123;</span><br><span class="line">      <span class="attr">hideInMenu</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><h3 id="ç”¨æˆ·æ³¨å†Œé¡µé¢"><a href="#ç”¨æˆ·æ³¨å†Œé¡µé¢" class="headerlink" title="ç”¨æˆ·æ³¨å†Œé¡µé¢"></a>ç”¨æˆ·æ³¨å†Œé¡µé¢</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;userRegisterPage&quot;&gt;</span><br><span class="line">    &lt;h2 style=&quot;margin-bottom: 16px&quot;&gt;ç”¨æˆ·æ³¨å†Œ&lt;/h2&gt;</span><br><span class="line">    &lt;a-form</span><br><span class="line">      :model=&quot;form&quot;</span><br><span class="line">      :style=&quot;&#123; width: &#x27;480px&#x27;, margin: &#x27;50px auto&#x27; &#125;&quot;</span><br><span class="line">      label-align=&quot;left&quot;</span><br><span class="line">      @submit=&quot;handleSubmit&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;a-form-item field=&quot;userAccount&quot; label=&quot;è´¦å·&quot;&gt;</span><br><span class="line">        &lt;a-input v-model=&quot;form.userAccount&quot; placeholder=&quot;è¯·è¾“å…¥è´¦å·...&quot; /&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">      &lt;a-form-item field=&quot;userPassword&quot; tooltip=&quot;å¯†ç ä¸å°äº8ä½&quot; label=&quot;å¯†ç &quot;&gt;</span><br><span class="line">        &lt;a-input-password</span><br><span class="line">          v-model=&quot;form.userPassword&quot;</span><br><span class="line">          placeholder=&quot;è¯·è¾“å…¥å¯†ç ...&quot;</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">      &lt;a-form-item</span><br><span class="line">        field=&quot;checkPassword&quot;</span><br><span class="line">        tooltip=&quot;å¯†ç ä¸å°äº8ä½&quot;</span><br><span class="line">        label=&quot;ç¡®è®¤å¯†ç &quot;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;a-input-password</span><br><span class="line">          v-model=&quot;form.checkPassword&quot;</span><br><span class="line">          placeholder=&quot;è¯·å†æ¬¡ç¡®è®¤å¯†ç ...&quot;</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">      &lt;a-form-item&gt;</span><br><span class="line">        &lt;div</span><br><span class="line">          style=&quot;</span><br><span class="line">            display: flex;</span><br><span class="line">            width: 100%;</span><br><span class="line">            align-items: center;</span><br><span class="line">            justify-content: space-between;</span><br><span class="line">          &quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;a-button</span><br><span class="line">            type=&quot;primary&quot;</span><br><span class="line">            shape=&quot;round&quot;</span><br><span class="line">            long</span><br><span class="line">            style=&quot;width: 100px&quot;</span><br><span class="line">            html-type=&quot;submit&quot;</span><br><span class="line">            &gt;æ³¨å†Œ</span><br><span class="line">          &lt;/a-button&gt;</span><br><span class="line">          &lt;a-link href=&quot;/user/login&quot;&gt;è€ç”¨æˆ·ç™»å½•&lt;/a-link&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">    &lt;/a-form&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; reactive &#125; from &quot;vue&quot;;</span><br><span class="line">import API from &quot;@/api&quot;;</span><br><span class="line">import &#123; userRegisterUsingPost &#125; from &quot;@/api/userController&quot;;</span><br><span class="line">import message from &quot;@arco-design/web-vue/es/message&quot;;</span><br><span class="line">import &#123; useRouter &#125; from &quot;vue-router&quot;;</span><br><span class="line"></span><br><span class="line">const router = useRouter();</span><br><span class="line">const form = reactive(&#123;</span><br><span class="line">  userAccount: &quot;&quot;,</span><br><span class="line">  userPassword: &quot;&quot;,</span><br><span class="line">  checkPassword: &quot;&quot;,</span><br><span class="line">&#125; as API.UserRegisterRequest);</span><br><span class="line">const handleSubmit = async () =&gt; &#123;</span><br><span class="line">  const res = await userRegisterUsingPost(form);</span><br><span class="line">  if (res.data.code === 0) &#123;</span><br><span class="line">    message.success(&quot;æ³¨å†ŒæˆåŠŸ&quot;);</span><br><span class="line">    router.push(&#123;</span><br><span class="line">      path: &quot;/user/login&quot;,</span><br><span class="line">      replace: true,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    message.error(&quot;æ³¨å†Œå¤±è´¥,&quot; + res.data.message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ç”¨æˆ·ç™»å½•é¡µé¢"><a href="#ç”¨æˆ·ç™»å½•é¡µé¢" class="headerlink" title="ç”¨æˆ·ç™»å½•é¡µé¢"></a>ç”¨æˆ·ç™»å½•é¡µé¢</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;userLoginPage&quot;&gt;</span><br><span class="line">    &lt;h2 style=&quot;margin-bottom: 16px&quot;&gt;ç”¨æˆ·ç™»å½•&lt;/h2&gt;</span><br><span class="line">    &lt;a-form</span><br><span class="line">      :model=&quot;form&quot;</span><br><span class="line">      :style=&quot;&#123; width: &#x27;480px&#x27;, margin: &#x27;50px auto&#x27; &#125;&quot;</span><br><span class="line">      label-align=&quot;left&quot;</span><br><span class="line">      @submit=&quot;handleSubmit&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;a-form-item field=&quot;userAccount&quot; label=&quot;è´¦å·&quot;&gt;</span><br><span class="line">        &lt;a-input v-model=&quot;form.userAccount&quot; placeholder=&quot;è¯·è¾“å…¥è´¦å·...&quot; /&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">      &lt;a-form-item field=&quot;userPassword&quot; tooltip=&quot;å¯†ç ä¸å°äº8ä½&quot; label=&quot;å¯†ç &quot;&gt;</span><br><span class="line">        &lt;a-input-password</span><br><span class="line">          v-model=&quot;form.userPassword&quot;</span><br><span class="line">          placeholder=&quot;è¯·è¾“å…¥å¯†ç ...&quot;</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">      &lt;a-form-item&gt;</span><br><span class="line">        &lt;div</span><br><span class="line">          style=&quot;</span><br><span class="line">            display: flex;</span><br><span class="line">            width: 100%;</span><br><span class="line">            align-items: center;</span><br><span class="line">            justify-content: space-between;</span><br><span class="line">          &quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;a-button</span><br><span class="line">            type=&quot;primary&quot;</span><br><span class="line">            shape=&quot;round&quot;</span><br><span class="line">            long</span><br><span class="line">            style=&quot;width: 100px&quot;</span><br><span class="line">            html-type=&quot;submit&quot;</span><br><span class="line">            &gt;ç™»å½•</span><br><span class="line">          &lt;/a-button&gt;</span><br><span class="line">          &lt;a-link href=&quot;/user/register&quot;&gt;æ–°ç”¨æˆ·æ³¨å†Œ&lt;/a-link&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">    &lt;/a-form&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; reactive &#125; from &quot;vue&quot;;</span><br><span class="line">import API from &quot;@/api&quot;;</span><br><span class="line">import &#123; userLoginUsingPost &#125; from &quot;@/api/userController&quot;;</span><br><span class="line">import &#123; useLoginUserStore &#125; from &quot;@/store/userStore&quot;;</span><br><span class="line">import message from &quot;@arco-design/web-vue/es/message&quot;;</span><br><span class="line">import &#123; useRouter &#125; from &quot;vue-router&quot;;</span><br><span class="line"></span><br><span class="line">const router = useRouter();</span><br><span class="line">const loginUserStore = useLoginUserStore();</span><br><span class="line">const form = reactive(&#123;</span><br><span class="line">  userAccount: &quot;&quot;,</span><br><span class="line">  userPassword: &quot;&quot;,</span><br><span class="line">&#125; as API.UserLoginRequest);</span><br><span class="line">const handleSubmit = async () =&gt; &#123;</span><br><span class="line">  const res = await userLoginUsingPost(form);</span><br><span class="line">  if (res.data.code === 0) &#123;</span><br><span class="line">    await loginUserStore.fetchLoginUser();</span><br><span class="line">    message.success(&quot;ç™»å½•æˆåŠŸ&quot;);</span><br><span class="line">    router.push(&#123;</span><br><span class="line">      path: &quot;/&quot;,</span><br><span class="line">      replace: true,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    message.error(&quot;ç™»å½•å¤±è´¥,&quot; + res.data.message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ç®¡ç†æ¨¡å—"><a href="#ç®¡ç†æ¨¡å—" class="headerlink" title="ç®¡ç†æ¨¡å—"></a>ç®¡ç†æ¨¡å—</h2><h3 id="å‰ç½®å‡†å¤‡"><a href="#å‰ç½®å‡†å¤‡" class="headerlink" title="å‰ç½®å‡†å¤‡"></a>å‰ç½®å‡†å¤‡</h3><p>ç®¡ç†ç•Œé¢ä¸€èˆ¬éœ€è¦å¼•å…¥è¡¨æ ¼ç»„ä»¶Table<a href="https://arco.design/vue/component/table">Arco Design Vue</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;a-table :columns=&quot;columns&quot; :data=&quot;data&quot; @change=&quot;handleChange&quot;&gt;</span><br><span class="line">    &lt;template #name-filter=&quot;&#123; filterValue, setFilterValue, handleFilterConfirm, handleFilterReset&#125;&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;custom-filter&quot;&gt;</span><br><span class="line">        &lt;a-space direction=&quot;vertical&quot;&gt;</span><br><span class="line">          &lt;a-input :model-value=&quot;filterValue[0]&quot; @input=&quot;(value)=&gt;setFilterValue([value])&quot; /&gt;</span><br><span class="line">          &lt;div class=&quot;custom-filter-footer&quot;&gt;</span><br><span class="line">            &lt;a-button @click=&quot;handleFilterConfirm&quot;&gt;Confirm&lt;/a-button&gt;</span><br><span class="line">            &lt;a-button @click=&quot;handleFilterReset&quot;&gt;Reset&lt;/a-button&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/a-space&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/a-table&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><p>ç„¶åéœ€è¦æ ¹æ®å±•ç¤ºå†…å®¹ï¼Œå®šä¹‰è¡¨æ ¼åˆ—</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// è¡¨æ ¼åˆ—é…ç½®</span><br><span class="line">const columns = [</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;id&quot;,</span><br><span class="line">    dataIndex: &quot;id&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;åç§°&quot;,</span><br><span class="line">    dataIndex: &quot;appName&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>å¯¹äºä¸€äº›éœ€è¦ä¸ªæ€§åŒ–å±•ç¤ºçš„å†…å®¹ï¼Œæ¯”å¦‚å¤´åƒã€æ—¶é—´ç­‰éœ€è¦åœ¨columnsä¸­å¼€å¯æ’æ§½é…ç½®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    title: &quot;å›¾æ ‡&quot;,</span><br><span class="line">    dataIndex: &quot;appIcon&quot;,</span><br><span class="line">    slotName: &quot;appIcon&quot;,</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><p>å¯¹äºæ—¶é—´çš„æ ¼å¼åŒ–ï¼Œå¯ä»¥ä½¿ç”¨dayjså·¥å…·<br><a href="https://day.js.org/docs/zh-CN/display/format">Format Â· Day.js</a><br>æœç´¢æ¡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// åˆå§‹åŒ–æœç´¢æ¡ä»¶ï¼ˆä¸åº”è¯¥è¢«ä¿®æ”¹ï¼‰</span><br><span class="line">const initSearchParams = &#123;</span><br><span class="line">  current: 1,</span><br><span class="line">  pageSize: 10,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ•°æ®åŠ è½½</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * å½“åˆ†é¡µå˜åŒ–æ—¶ï¼Œæ”¹å˜æœç´¢æ¡ä»¶ï¼Œè§¦å‘æ•°æ®åŠ è½½</span><br><span class="line"> * @param page</span><br><span class="line"> */</span><br><span class="line">const onPageChange = (page: number) =&gt; &#123;</span><br><span class="line">  searchParams.value = &#123;</span><br><span class="line">    ...searchParams.value,</span><br><span class="line">    current: page,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line">/**</span><br><span class="line"> * ç›‘å¬ searchParams å˜é‡ï¼Œæ”¹å˜æ—¶è§¦å‘æ•°æ®çš„é‡æ–°åŠ è½½</span><br><span class="line"> */</span><br><span class="line">watchEffect(() =&gt; &#123;</span><br><span class="line">  loadData();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ è·¯ç”±-1"><a href="#æ·»åŠ è·¯ç”±-1" class="headerlink" title="æ·»åŠ è·¯ç”±"></a>æ·»åŠ è·¯ç”±</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/admin/user&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;ç”¨æˆ·ç®¡ç†&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">AdminUserPage</span>,</span><br><span class="line">    <span class="attr">meta</span>: &#123;</span><br><span class="line">      <span class="attr">access</span>: <span class="title class_">AccessEnum</span>.<span class="property">ADMIN</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/admin/app&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;åº”ç”¨ç®¡ç†&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">AdminAppPage</span>,</span><br><span class="line">    <span class="attr">meta</span>: &#123;</span><br><span class="line">      <span class="attr">access</span>: <span class="title class_">AccessEnum</span>.<span class="property">ADMIN</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/admin/question&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;é¢˜ç›®ç®¡ç†&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">AdminQuestionPage</span>,</span><br><span class="line">    <span class="attr">meta</span>: &#123;</span><br><span class="line">      <span class="attr">access</span>: <span class="title class_">AccessEnum</span>.<span class="property">ADMIN</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/admin/scoring_result&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;è¯„åˆ†ç®¡ç†&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">AdminScoringResultPage</span>,</span><br><span class="line">    <span class="attr">meta</span>: &#123;</span><br><span class="line">      <span class="attr">access</span>: <span class="title class_">AccessEnum</span>.<span class="property">ADMIN</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/admin/user_answer&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;å›ç­”ç®¡ç†&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">AdminUserAnswerPage</span>,</span><br><span class="line">    <span class="attr">meta</span>: &#123;</span><br><span class="line">      <span class="attr">access</span>: <span class="title class_">AccessEnum</span>.<span class="property">ADMIN</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><h3 id="ç”¨æˆ·ç®¡ç†é¡µé¢"><a href="#ç”¨æˆ·ç®¡ç†é¡µé¢" class="headerlink" title="ç”¨æˆ·ç®¡ç†é¡µé¢"></a>ç”¨æˆ·ç®¡ç†é¡µé¢</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;a-form</span><br><span class="line">    :model=&quot;formSearchParams&quot;</span><br><span class="line">    :style=&quot;&#123; marginBottom: &#x27;10px&#x27; &#125;&quot;</span><br><span class="line">    layout=&quot;inline&quot;</span><br><span class="line">    @submit=&quot;doSearch&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;a-form-item field=&quot;userName&quot; label=&quot;ç”¨æˆ·å&quot;&gt;</span><br><span class="line">      &lt;a-input</span><br><span class="line">        allow-clear</span><br><span class="line">        v-model=&quot;formSearchParams.userName&quot;</span><br><span class="line">        placeholder=&quot;è¯·è¾“å…¥ç”¨æˆ·å&quot;</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">    &lt;a-form-item field=&quot;userProfile&quot; label=&quot;ç”¨æˆ·ç®€ä»‹&quot;&gt;</span><br><span class="line">      &lt;a-input</span><br><span class="line">        allow-clear</span><br><span class="line">        v-model=&quot;formSearchParams.userProfile&quot;</span><br><span class="line">        placeholder=&quot;è¯·è¾“å…¥ç”¨æˆ·ç®€ä»‹&quot;</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">    &lt;a-form-item&gt;</span><br><span class="line">      &lt;a-button type=&quot;primary&quot; html-type=&quot;submit&quot; style=&quot;width: 90px&quot;&gt;</span><br><span class="line">        æœç´¢</span><br><span class="line">      &lt;/a-button&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">  &lt;/a-form&gt;</span><br><span class="line"></span><br><span class="line">  &lt;a-table</span><br><span class="line">    :columns=&quot;columns&quot;</span><br><span class="line">    :data=&quot;dataList&quot;</span><br><span class="line">    :pagination=&quot;&#123;</span><br><span class="line">      showTotal: true,</span><br><span class="line">      pageSize: searchParams.pageSize,</span><br><span class="line">      current: searchParams.current,</span><br><span class="line">      total,</span><br><span class="line">    &#125;&quot;</span><br><span class="line">    @page-change=&quot;onPageChange&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;template #userAvatar=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &lt;a-image width=&quot;64&quot; :src=&quot;record.userAvatar&quot; /&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #createTime=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &#123;&#123; dayjs(record.createTime).format(&quot;YYYY-MM-DD HH:mm:ss&quot;) &#125;&#125;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #updateTime=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &#123;&#123; dayjs(record.updateTime).format(&quot;YYYY-MM-DD HH:mm:ss&quot;) &#125;&#125;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #optional=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &lt;a-space&gt;</span><br><span class="line">        &lt;a-button status=&quot;danger&quot; @click=&quot;doDelete(record)&quot;&gt;åˆ é™¤&lt;/a-button&gt;</span><br><span class="line">      &lt;/a-space&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/a-table&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref, watchEffect &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123;</span><br><span class="line">  deleteUserUsingPost,</span><br><span class="line">  listUserByPageUsingPost,</span><br><span class="line">&#125; from &quot;@/api/userController&quot;;</span><br><span class="line">import API from &quot;@/api&quot;;</span><br><span class="line">import message from &quot;@arco-design/web-vue/es/message&quot;;</span><br><span class="line">import dayjs from &quot;dayjs&quot;;</span><br><span class="line"></span><br><span class="line">const formSearchParams = ref&lt;API.UserQueryRequest&gt;(&#123;&#125;);</span><br><span class="line"></span><br><span class="line">// åˆå§‹åŒ–æœç´¢æ¡ä»¶ï¼ˆä¸åº”è¯¥è¢«ä¿®æ”¹ï¼‰</span><br><span class="line">const initSearchParams = &#123;</span><br><span class="line">  current: 1,</span><br><span class="line">  pageSize: 10,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const searchParams = ref&lt;API.UserQueryRequest&gt;(&#123;</span><br><span class="line">  ...initSearchParams,</span><br><span class="line">&#125;);</span><br><span class="line">const dataList = ref&lt;API.User[]&gt;([]);</span><br><span class="line">const total = ref&lt;number&gt;(0);</span><br><span class="line">const loadData = async () =&gt; &#123;</span><br><span class="line">  const res = await listUserByPageUsingPost(searchParams.value);</span><br><span class="line">  if (res.data.code === 0) &#123;</span><br><span class="line">    dataList.value = res.data.data?.records || [];</span><br><span class="line">    total.value = res.data.data?.total || 0;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    message.error(&quot;è·å–æ•°æ®å¤±è´¥ï¼Œ&quot; + res.data.message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">/**</span><br><span class="line"> * æ‰§è¡Œæœç´¢</span><br><span class="line"> */</span><br><span class="line">const doSearch = () =&gt; &#123;</span><br><span class="line">  searchParams.value = &#123;</span><br><span class="line">    ...initSearchParams,</span><br><span class="line">    ...formSearchParams.value,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * å½“åˆ†é¡µå˜åŒ–æ—¶ï¼Œæ¸²æŸ“ä¸åŒçš„æ•°æ®</span><br><span class="line"> * @param page</span><br><span class="line"> */</span><br><span class="line">const onPageChange = (page: number) =&gt; &#123;</span><br><span class="line">  searchParams.value = &#123;</span><br><span class="line">    ...searchParams.value,</span><br><span class="line">    current: page,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * åˆ é™¤</span><br><span class="line"> * @param record</span><br><span class="line"> */</span><br><span class="line">const doDelete = async (record: API.User) =&gt; &#123;</span><br><span class="line">  if (!record.id) &#123;</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  const res = await deleteUserUsingPost(&#123;</span><br><span class="line">    id: record.id,</span><br><span class="line">  &#125;);</span><br><span class="line">  if (res.data.code === 0) &#123;</span><br><span class="line">    loadData();</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    message.error(&quot;åˆ é™¤å¤±è´¥ï¼Œ&quot; + res.data.message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * ç›‘è§†é¡µé¢å˜åŒ–ï¼Œå¦‚æœå˜åŒ–ï¼Œåˆ™ç«‹å³é‡æ–°æ¸²æŸ“é¡µé¢</span><br><span class="line"> */</span><br><span class="line">watchEffect(() =&gt; &#123;</span><br><span class="line">  loadData();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * è¡¨æ ¼åˆ—é…ç½®</span><br><span class="line"> */</span><br><span class="line">const columns = [</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;id&quot;,</span><br><span class="line">    dataIndex: &quot;id&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;è´¦å·&quot;,</span><br><span class="line">    dataIndex: &quot;userAccount&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;ç”¨æˆ·å&quot;,</span><br><span class="line">    dataIndex: &quot;userName&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;ç”¨æˆ·å¤´åƒ&quot;,</span><br><span class="line">    dataIndex: &quot;userAvatar&quot;,</span><br><span class="line">    slotName: &quot;userAvatar&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;ç”¨æˆ·ç®€ä»‹&quot;,</span><br><span class="line">    dataIndex: &quot;userProfile&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;æƒé™&quot;,</span><br><span class="line">    dataIndex: &quot;userRole&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;åˆ›å»ºæ—¶é—´&quot;,</span><br><span class="line">    dataIndex: &quot;createTime&quot;,</span><br><span class="line">    slotName: &quot;createTime&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;æ›´æ–°æ—¶é—´&quot;,</span><br><span class="line">    dataIndex: &quot;updateTime&quot;,</span><br><span class="line">    slotName: &quot;updateTime&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;æ“ä½œ&quot;,</span><br><span class="line">    slotName: &quot;optional&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="åº”ç”¨ç®¡ç†é¡µé¢"><a href="#åº”ç”¨ç®¡ç†é¡µé¢" class="headerlink" title="åº”ç”¨ç®¡ç†é¡µé¢"></a>åº”ç”¨ç®¡ç†é¡µé¢</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;a-form</span><br><span class="line">    :model=&quot;formSearchParams&quot;</span><br><span class="line">    :style=&quot;&#123; marginBottom: &#x27;20px&#x27; &#125;&quot;</span><br><span class="line">    layout=&quot;inline&quot;</span><br><span class="line">    @submit=&quot;doSearch&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;a-form-item field=&quot;appName&quot; label=&quot;åº”ç”¨åç§°&quot;&gt;</span><br><span class="line">      &lt;a-input</span><br><span class="line">        v-model=&quot;formSearchParams.appName&quot;</span><br><span class="line">        placeholder=&quot;è¯·è¾“å…¥åº”ç”¨åç§°&quot;</span><br><span class="line">        allow-clear</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">    &lt;a-form-item field=&quot;appDesc&quot; label=&quot;åº”ç”¨æè¿°&quot;&gt;</span><br><span class="line">      &lt;a-input</span><br><span class="line">        v-model=&quot;formSearchParams.appDesc&quot;</span><br><span class="line">        placeholder=&quot;è¯·è¾“å…¥åº”ç”¨æè¿°&quot;</span><br><span class="line">        allow-clear</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">    &lt;a-form-item&gt;</span><br><span class="line">      &lt;a-button type=&quot;primary&quot; html-type=&quot;submit&quot; style=&quot;width: 100px&quot;&gt;</span><br><span class="line">        æœç´¢</span><br><span class="line">      &lt;/a-button&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">  &lt;/a-form&gt;</span><br><span class="line">  &lt;a-table</span><br><span class="line">    :columns=&quot;columns&quot;</span><br><span class="line">    :data=&quot;dataList&quot;</span><br><span class="line">    :pagination=&quot;&#123;</span><br><span class="line">      showTotal: true,</span><br><span class="line">      pageSize: searchParams.pageSize,</span><br><span class="line">      current: searchParams.current,</span><br><span class="line">      total,</span><br><span class="line">    &#125;&quot;</span><br><span class="line">    @page-change=&quot;onPageChange&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;template #appIcon=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &lt;a-image width=&quot;64&quot; :src=&quot;record.appIcon&quot; /&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #appType=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &#123;&#123; APP_TYPE_MAP[record.appType] &#125;&#125;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #scoringStrategy=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &#123;&#123; APP_SCORING_STRATEGY_MAP[record.scoringStrategy] &#125;&#125;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #reviewStatus=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &#123;&#123; REVIEW_STATUS_MAP[record.reviewStatus] &#125;&#125;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #reviewTime=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &#123;&#123;</span><br><span class="line">        record.reviewTime &amp;&amp;</span><br><span class="line">        dayjs(record.reviewTime).format(&quot;YYYY-MM-DD HH:mm:ss&quot;)</span><br><span class="line">      &#125;&#125;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #createTime=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &#123;&#123; dayjs(record.createTime).format(&quot;YYYY-MM-DD HH:mm:ss&quot;) &#125;&#125;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #updateTime=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &#123;&#123; dayjs(record.updateTime).format(&quot;YYYY-MM-DD HH:mm:ss&quot;) &#125;&#125;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #optional=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &lt;a-space&gt;</span><br><span class="line">        &lt;a-button</span><br><span class="line">          v-if=&quot;record.reviewStatus !== REVIEW_STATUS_ENUM.PASS&quot;</span><br><span class="line">          status=&quot;success&quot;</span><br><span class="line">          @click=&quot;doReview(record, REVIEW_STATUS_ENUM.PASS, &#x27;&#x27;)&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          é€šè¿‡</span><br><span class="line">        &lt;/a-button&gt;</span><br><span class="line">        &lt;a-button</span><br><span class="line">          v-if=&quot;record.reviewStatus !== REVIEW_STATUS_ENUM.REJECT&quot;</span><br><span class="line">          status=&quot;warning&quot;</span><br><span class="line">          @click=&quot;doReview(record, REVIEW_STATUS_ENUM.REJECT, &#x27;ä¸ç¬¦åˆä¸Šæ¶è¦æ±‚&#x27;)&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          æ‹’ç»</span><br><span class="line">        &lt;/a-button&gt;</span><br><span class="line">        &lt;a-button status=&quot;danger&quot; @click=&quot;doDelete(record)&quot;&gt;åˆ é™¤&lt;/a-button&gt;</span><br><span class="line">      &lt;/a-space&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/a-table&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref, watchEffect &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123;</span><br><span class="line">  deleteAppUsingPost,</span><br><span class="line">  doAppReviewUsingPost,</span><br><span class="line">  listAppByPageUsingPost,</span><br><span class="line">&#125; from &quot;@/api/appController&quot;;</span><br><span class="line">import API from &quot;@/api&quot;;</span><br><span class="line">import message from &quot;@arco-design/web-vue/es/message&quot;;</span><br><span class="line">import &#123; dayjs &#125; from &quot;@arco-design/web-vue/es/_utils/date&quot;;</span><br><span class="line">import &#123;</span><br><span class="line">  APP_SCORING_STRATEGY_MAP,</span><br><span class="line">  APP_TYPE_MAP,</span><br><span class="line">  REVIEW_STATUS_ENUM,</span><br><span class="line">  REVIEW_STATUS_MAP,</span><br><span class="line">&#125; from &quot;@/constant/app&quot;;</span><br><span class="line"></span><br><span class="line">const formSearchParams = ref&lt;API.AppQueryRequest&gt;(&#123;&#125;);</span><br><span class="line"></span><br><span class="line">// åˆå§‹åŒ–æœç´¢æ¡ä»¶ï¼ˆä¸åº”è¯¥è¢«ä¿®æ”¹ï¼‰</span><br><span class="line">const initSearchParams = &#123;</span><br><span class="line">  current: 1,</span><br><span class="line">  pageSize: 10,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const searchParams = ref&lt;API.AppQueryRequest&gt;(&#123;</span><br><span class="line">  ...initSearchParams,</span><br><span class="line">&#125;);</span><br><span class="line">const dataList = ref&lt;API.App[]&gt;([]);</span><br><span class="line">const total = ref&lt;number&gt;(0);</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * åŠ è½½æ•°æ®</span><br><span class="line"> */</span><br><span class="line">const loadData = async () =&gt; &#123;</span><br><span class="line">  const res = await listAppByPageUsingPost(searchParams.value);</span><br><span class="line">  if (res.data.code === 0) &#123;</span><br><span class="line">    dataList.value = res.data.data?.records || [];</span><br><span class="line">    total.value = res.data.data?.total || 0;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    message.error(&quot;è·å–æ•°æ®å¤±è´¥ï¼Œ&quot; + res.data.message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * æ‰§è¡Œæœç´¢</span><br><span class="line"> */</span><br><span class="line">const doSearch = () =&gt; &#123;</span><br><span class="line">  searchParams.value = &#123;</span><br><span class="line">    ...initSearchParams,</span><br><span class="line">    ...formSearchParams.value,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * å½“åˆ†é¡µå˜åŒ–æ—¶ï¼Œæ”¹å˜æœç´¢æ¡ä»¶ï¼Œè§¦å‘æ•°æ®åŠ è½½</span><br><span class="line"> * @param page</span><br><span class="line"> */</span><br><span class="line">const onPageChange = (page: number) =&gt; &#123;</span><br><span class="line">  searchParams.value = &#123;</span><br><span class="line">    ...searchParams.value,</span><br><span class="line">    current: page,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * åˆ é™¤</span><br><span class="line"> * @param record</span><br><span class="line"> */</span><br><span class="line">const doDelete = async (record: API.App) =&gt; &#123;</span><br><span class="line">  if (!record.id) &#123;</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  const res = await deleteAppUsingPost(&#123;</span><br><span class="line">    id: record.id,</span><br><span class="line">  &#125;);</span><br><span class="line">  if (res.data.code === 0) &#123;</span><br><span class="line">    loadData();</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    message.error(&quot;åˆ é™¤å¤±è´¥ï¼Œ&quot; + res.data.message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * å®¡æ ¸</span><br><span class="line"> * @param record</span><br><span class="line"> * @param reviewStatus</span><br><span class="line"> * @param reviewMessage</span><br><span class="line"> */</span><br><span class="line">const doReview = async (</span><br><span class="line">  record: API.App,</span><br><span class="line">  reviewStatus: number,</span><br><span class="line">  reviewMessage?: string</span><br><span class="line">) =&gt; &#123;</span><br><span class="line">  if (!record.id) &#123;</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  const res = await doAppReviewUsingPost(&#123;</span><br><span class="line">    id: record.id,</span><br><span class="line">    reviewStatus,</span><br><span class="line">    reviewMessage,</span><br><span class="line">  &#125;);</span><br><span class="line">  if (res.data.code === 0) &#123;</span><br><span class="line">    loadData();</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    message.error(&quot;å®¡æ ¸å¤±è´¥ï¼Œ&quot; + res.data.message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * ç›‘å¬ searchParams å˜é‡ï¼Œæ”¹å˜æ—¶è§¦å‘æ•°æ®çš„é‡æ–°åŠ è½½</span><br><span class="line"> */</span><br><span class="line">watchEffect(() =&gt; &#123;</span><br><span class="line">  loadData();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// è¡¨æ ¼åˆ—é…ç½®</span><br><span class="line">const columns = [</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;id&quot;,</span><br><span class="line">    dataIndex: &quot;id&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;åç§°&quot;,</span><br><span class="line">    dataIndex: &quot;appName&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;æè¿°&quot;,</span><br><span class="line">    dataIndex: &quot;appDesc&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;å›¾æ ‡&quot;,</span><br><span class="line">    dataIndex: &quot;appIcon&quot;,</span><br><span class="line">    slotName: &quot;appIcon&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;åº”ç”¨ç±»å‹&quot;,</span><br><span class="line">    dataIndex: &quot;appType&quot;,</span><br><span class="line">    slotName: &quot;appType&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;è¯„åˆ†ç­–ç•¥&quot;,</span><br><span class="line">    dataIndex: &quot;scoringStrategy&quot;,</span><br><span class="line">    slotName: &quot;scoringStrategy&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;å®¡æ ¸çŠ¶æ€&quot;,</span><br><span class="line">    dataIndex: &quot;reviewStatus&quot;,</span><br><span class="line">    slotName: &quot;reviewStatus&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;å®¡æ ¸ä¿¡æ¯&quot;,</span><br><span class="line">    dataIndex: &quot;reviewMessage&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;å®¡æ ¸æ—¶é—´&quot;,</span><br><span class="line">    dataIndex: &quot;reviewTime&quot;,</span><br><span class="line">    slotName: &quot;reviewTime&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;å®¡æ ¸äºº id&quot;,</span><br><span class="line">    dataIndex: &quot;reviewerId&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;ç”¨æˆ· id&quot;,</span><br><span class="line">    dataIndex: &quot;userId&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;åˆ›å»ºæ—¶é—´&quot;,</span><br><span class="line">    dataIndex: &quot;createTime&quot;,</span><br><span class="line">    slotName: &quot;createTime&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;æ›´æ–°æ—¶é—´&quot;,</span><br><span class="line">    dataIndex: &quot;updateTime&quot;,</span><br><span class="line">    slotName: &quot;updateTime&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;æ“ä½œ&quot;,</span><br><span class="line">    slotName: &quot;optional&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="é¢˜ç›®ç®¡ç†é¡µé¢"><a href="#é¢˜ç›®ç®¡ç†é¡µé¢" class="headerlink" title="é¢˜ç›®ç®¡ç†é¡µé¢"></a>é¢˜ç›®ç®¡ç†é¡µé¢</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;a-form</span><br><span class="line">    :model=&quot;formSearchParams&quot;</span><br><span class="line">    :style=&quot;&#123; marginBottom: &#x27;20px&#x27; &#125;&quot;</span><br><span class="line">    layout=&quot;inline&quot;</span><br><span class="line">    @submit=&quot;doSearch&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;a-form-item field=&quot;appId&quot; label=&quot;åº”ç”¨ id&quot;&gt;</span><br><span class="line">      &lt;a-input</span><br><span class="line">        v-model=&quot;formSearchParams.appId&quot;</span><br><span class="line">        placeholder=&quot;è¯·è¾“å…¥åº”ç”¨ id&quot;</span><br><span class="line">        allow-clear</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">    &lt;a-form-item field=&quot;userId&quot; label=&quot;ç”¨æˆ· id&quot;&gt;</span><br><span class="line">      &lt;a-input</span><br><span class="line">        v-model=&quot;formSearchParams.userId&quot;</span><br><span class="line">        placeholder=&quot;è¯·è¾“å…¥ç”¨æˆ· id&quot;</span><br><span class="line">        allow-clear</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">    &lt;a-form-item&gt;</span><br><span class="line">      &lt;a-button type=&quot;primary&quot; html-type=&quot;submit&quot; style=&quot;width: 100px&quot;&gt;</span><br><span class="line">        æœç´¢</span><br><span class="line">      &lt;/a-button&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">  &lt;/a-form&gt;</span><br><span class="line">  &lt;a-table</span><br><span class="line">    :columns=&quot;columns&quot;</span><br><span class="line">    :data=&quot;dataList&quot;</span><br><span class="line">    :pagination=&quot;&#123;</span><br><span class="line">      showTotal: true,</span><br><span class="line">      pageSize: searchParams.pageSize,</span><br><span class="line">      current: searchParams.current,</span><br><span class="line">      total,</span><br><span class="line">    &#125;&quot;</span><br><span class="line">    @page-change=&quot;onPageChange&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;template #questionContent=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &lt;div</span><br><span class="line">        v-for=&quot;question in JSON.parse(record.questionContent)&quot;</span><br><span class="line">        :key=&quot;question.title&quot;</span><br><span class="line">      &gt;</span><br><span class="line">        &#123;&#123; question &#125;&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #createTime=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &#123;&#123; dayjs(record.createTime).format(&quot;YYYY-MM-DD HH:mm:ss&quot;) &#125;&#125;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #updateTime=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &#123;&#123; dayjs(record.updateTime).format(&quot;YYYY-MM-DD HH:mm:ss&quot;) &#125;&#125;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #optional=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &lt;a-space&gt;</span><br><span class="line">        &lt;a-button status=&quot;danger&quot; @click=&quot;doDelete(record)&quot;&gt;åˆ é™¤&lt;/a-button&gt;</span><br><span class="line">      &lt;/a-space&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/a-table&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref, watchEffect &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123;</span><br><span class="line">  deleteQuestionUsingPost,</span><br><span class="line">  listQuestionByPageUsingPost,</span><br><span class="line">&#125; from &quot;@/api/questionController&quot;;</span><br><span class="line">import API from &quot;@/api&quot;;</span><br><span class="line">import message from &quot;@arco-design/web-vue/es/message&quot;;</span><br><span class="line">import &#123; dayjs &#125; from &quot;@arco-design/web-vue/es/_utils/date&quot;;</span><br><span class="line"></span><br><span class="line">const formSearchParams = ref&lt;API.QuestionQueryRequest&gt;(&#123;&#125;);</span><br><span class="line"></span><br><span class="line">// åˆå§‹åŒ–æœç´¢æ¡ä»¶ï¼ˆä¸åº”è¯¥è¢«ä¿®æ”¹ï¼‰</span><br><span class="line">const initSearchParams = &#123;</span><br><span class="line">  current: 1,</span><br><span class="line">  pageSize: 10,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const searchParams = ref&lt;API.QuestionQueryRequest&gt;(&#123;</span><br><span class="line">  ...initSearchParams,</span><br><span class="line">&#125;);</span><br><span class="line">const dataList = ref&lt;API.Question[]&gt;([]);</span><br><span class="line">const total = ref&lt;number&gt;(0);</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * åŠ è½½æ•°æ®</span><br><span class="line"> */</span><br><span class="line">const loadData = async () =&gt; &#123;</span><br><span class="line">  const res = await listQuestionByPageUsingPost(searchParams.value);</span><br><span class="line">  if (res.data.code === 0) &#123;</span><br><span class="line">    dataList.value = res.data.data?.records || [];</span><br><span class="line">    total.value = res.data.data?.total || 0;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    message.error(&quot;è·å–æ•°æ®å¤±è´¥ï¼Œ&quot; + res.data.message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * æ‰§è¡Œæœç´¢</span><br><span class="line"> */</span><br><span class="line">const doSearch = () =&gt; &#123;</span><br><span class="line">  searchParams.value = &#123;</span><br><span class="line">    ...initSearchParams,</span><br><span class="line">    ...formSearchParams.value,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * å½“åˆ†é¡µå˜åŒ–æ—¶ï¼Œæ”¹å˜æœç´¢æ¡ä»¶ï¼Œè§¦å‘æ•°æ®åŠ è½½</span><br><span class="line"> * @param page</span><br><span class="line"> */</span><br><span class="line">const onPageChange = (page: number) =&gt; &#123;</span><br><span class="line">  searchParams.value = &#123;</span><br><span class="line">    ...searchParams.value,</span><br><span class="line">    current: page,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * åˆ é™¤</span><br><span class="line"> * @param record</span><br><span class="line"> */</span><br><span class="line">const doDelete = async (record: API.Question) =&gt; &#123;</span><br><span class="line">  if (!record.id) &#123;</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  const res = await deleteQuestionUsingPost(&#123;</span><br><span class="line">    id: record.id,</span><br><span class="line">  &#125;);</span><br><span class="line">  if (res.data.code === 0) &#123;</span><br><span class="line">    loadData();</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    message.error(&quot;åˆ é™¤å¤±è´¥ï¼Œ&quot; + res.data.message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * ç›‘å¬ searchParams å˜é‡ï¼Œæ”¹å˜æ—¶è§¦å‘æ•°æ®çš„é‡æ–°åŠ è½½</span><br><span class="line"> */</span><br><span class="line">watchEffect(() =&gt; &#123;</span><br><span class="line">  loadData();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// è¡¨æ ¼åˆ—é…ç½®</span><br><span class="line">const columns = [</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;id&quot;,</span><br><span class="line">    dataIndex: &quot;id&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;é¢˜ç›®å†…å®¹&quot;,</span><br><span class="line">    dataIndex: &quot;questionContent&quot;,</span><br><span class="line">    slotName: &quot;questionContent&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;åº”ç”¨ id&quot;,</span><br><span class="line">    dataIndex: &quot;appId&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;ç”¨æˆ· id&quot;,</span><br><span class="line">    dataIndex: &quot;userId&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;åˆ›å»ºæ—¶é—´&quot;,</span><br><span class="line">    dataIndex: &quot;createTime&quot;,</span><br><span class="line">    slotName: &quot;createTime&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;æ›´æ–°æ—¶é—´&quot;,</span><br><span class="line">    dataIndex: &quot;updateTime&quot;,</span><br><span class="line">    slotName: &quot;updateTime&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;æ“ä½œ&quot;,</span><br><span class="line">    slotName: &quot;optional&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="è¯„åˆ†ç»“æœé¡µé¢"><a href="#è¯„åˆ†ç»“æœé¡µé¢" class="headerlink" title="è¯„åˆ†ç»“æœé¡µé¢"></a>è¯„åˆ†ç»“æœé¡µé¢</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;a-form</span><br><span class="line">    :model=&quot;formSearchParams&quot;</span><br><span class="line">    :style=&quot;&#123; marginBottom: &#x27;20px&#x27; &#125;&quot;</span><br><span class="line">    layout=&quot;inline&quot;</span><br><span class="line">    @submit=&quot;doSearch&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;a-form-item field=&quot;resultName&quot; label=&quot;ç»“æœåç§°&quot;&gt;</span><br><span class="line">      &lt;a-input</span><br><span class="line">        v-model=&quot;formSearchParams.resultName&quot;</span><br><span class="line">        placeholder=&quot;è¯·è¾“å…¥ç»“æœåç§°&quot;</span><br><span class="line">        allow-clear</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">    &lt;a-form-item field=&quot;resultDesc&quot; label=&quot;ç»“æœæè¿°&quot;&gt;</span><br><span class="line">      &lt;a-input</span><br><span class="line">        v-model=&quot;formSearchParams.resultDesc&quot;</span><br><span class="line">        placeholder=&quot;è¯·è¾“å…¥ç»“æœæè¿°&quot;</span><br><span class="line">        allow-clear</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">    &lt;a-form-item field=&quot;appId&quot; label=&quot;åº”ç”¨ id&quot;&gt;</span><br><span class="line">      &lt;a-input</span><br><span class="line">        v-model=&quot;formSearchParams.appId&quot;</span><br><span class="line">        placeholder=&quot;è¯·è¾“å…¥åº”ç”¨ id&quot;</span><br><span class="line">        allow-clear</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">    &lt;a-form-item field=&quot;userId&quot; label=&quot;ç”¨æˆ· id&quot;&gt;</span><br><span class="line">      &lt;a-input</span><br><span class="line">        v-model=&quot;formSearchParams.userId&quot;</span><br><span class="line">        placeholder=&quot;è¯·è¾“å…¥ç”¨æˆ· id&quot;</span><br><span class="line">        allow-clear</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">    &lt;a-form-item&gt;</span><br><span class="line">      &lt;a-button type=&quot;primary&quot; html-type=&quot;submit&quot; style=&quot;width: 100px&quot;&gt;</span><br><span class="line">        æœç´¢</span><br><span class="line">      &lt;/a-button&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">  &lt;/a-form&gt;</span><br><span class="line">  &lt;a-table</span><br><span class="line">    :columns=&quot;columns&quot;</span><br><span class="line">    :data=&quot;dataList&quot;</span><br><span class="line">    :pagination=&quot;&#123;</span><br><span class="line">      showTotal: true,</span><br><span class="line">      pageSize: searchParams.pageSize,</span><br><span class="line">      current: searchParams.current,</span><br><span class="line">      total,</span><br><span class="line">    &#125;&quot;</span><br><span class="line">    @page-change=&quot;onPageChange&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;template #resultPicture=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &lt;a-image width=&quot;64&quot; :src=&quot;record.resultPicture&quot; /&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #createTime=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &#123;&#123; dayjs(record.createTime).format(&quot;YYYY-MM-DD HH:mm:ss&quot;) &#125;&#125;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #updateTime=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &#123;&#123; dayjs(record.updateTime).format(&quot;YYYY-MM-DD HH:mm:ss&quot;) &#125;&#125;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #optional=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &lt;a-space&gt;</span><br><span class="line">        &lt;a-button status=&quot;danger&quot; @click=&quot;doDelete(record)&quot;&gt;åˆ é™¤&lt;/a-button&gt;</span><br><span class="line">      &lt;/a-space&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/a-table&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref, watchEffect &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123;</span><br><span class="line">  deleteScoringResultUsingPost,</span><br><span class="line">  listScoringResultByPageUsingPost,</span><br><span class="line">&#125; from &quot;@/api/scoringResultController&quot;;</span><br><span class="line">import API from &quot;@/api&quot;;</span><br><span class="line">import message from &quot;@arco-design/web-vue/es/message&quot;;</span><br><span class="line">import &#123; dayjs &#125; from &quot;@arco-design/web-vue/es/_utils/date&quot;;</span><br><span class="line"></span><br><span class="line">const formSearchParams = ref&lt;API.ScoringResultQueryRequest&gt;(&#123;&#125;);</span><br><span class="line"></span><br><span class="line">// åˆå§‹åŒ–æœç´¢æ¡ä»¶ï¼ˆä¸åº”è¯¥è¢«ä¿®æ”¹ï¼‰</span><br><span class="line">const initSearchParams = &#123;</span><br><span class="line">  current: 1,</span><br><span class="line">  pageSize: 10,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const searchParams = ref&lt;API.ScoringResultQueryRequest&gt;(&#123;</span><br><span class="line">  ...initSearchParams,</span><br><span class="line">&#125;);</span><br><span class="line">const dataList = ref&lt;API.ScoringResult[]&gt;([]);</span><br><span class="line">const total = ref&lt;number&gt;(0);</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * åŠ è½½æ•°æ®</span><br><span class="line"> */</span><br><span class="line">const loadData = async () =&gt; &#123;</span><br><span class="line">  const res = await listScoringResultByPageUsingPost(searchParams.value);</span><br><span class="line">  if (res.data.code === 0) &#123;</span><br><span class="line">    dataList.value = res.data.data?.records || [];</span><br><span class="line">    total.value = res.data.data?.total || 0;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    message.error(&quot;è·å–æ•°æ®å¤±è´¥ï¼Œ&quot; + res.data.message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * æ‰§è¡Œæœç´¢</span><br><span class="line"> */</span><br><span class="line">const doSearch = () =&gt; &#123;</span><br><span class="line">  searchParams.value = &#123;</span><br><span class="line">    ...initSearchParams,</span><br><span class="line">    ...formSearchParams.value,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * å½“åˆ†é¡µå˜åŒ–æ—¶ï¼Œæ”¹å˜æœç´¢æ¡ä»¶ï¼Œè§¦å‘æ•°æ®åŠ è½½</span><br><span class="line"> * @param page</span><br><span class="line"> */</span><br><span class="line">const onPageChange = (page: number) =&gt; &#123;</span><br><span class="line">  searchParams.value = &#123;</span><br><span class="line">    ...searchParams.value,</span><br><span class="line">    current: page,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * åˆ é™¤</span><br><span class="line"> * @param record</span><br><span class="line"> */</span><br><span class="line">const doDelete = async (record: API.ScoringResult) =&gt; &#123;</span><br><span class="line">  if (!record.id) &#123;</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  const res = await deleteScoringResultUsingPost(&#123;</span><br><span class="line">    id: record.id,</span><br><span class="line">  &#125;);</span><br><span class="line">  if (res.data.code === 0) &#123;</span><br><span class="line">    loadData();</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    message.error(&quot;åˆ é™¤å¤±è´¥ï¼Œ&quot; + res.data.message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * ç›‘å¬ searchParams å˜é‡ï¼Œæ”¹å˜æ—¶è§¦å‘æ•°æ®çš„é‡æ–°åŠ è½½</span><br><span class="line"> */</span><br><span class="line">watchEffect(() =&gt; &#123;</span><br><span class="line">  loadData();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// è¡¨æ ¼åˆ—é…ç½®</span><br><span class="line">const columns = [</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;id&quot;,</span><br><span class="line">    dataIndex: &quot;id&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;åç§°&quot;,</span><br><span class="line">    dataIndex: &quot;resultName&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;æè¿°&quot;,</span><br><span class="line">    dataIndex: &quot;resultDesc&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;å›¾ç‰‡&quot;,</span><br><span class="line">    dataIndex: &quot;resultPicture&quot;,</span><br><span class="line">    slotName: &quot;resultPicture&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;ç»“æœå±æ€§&quot;,</span><br><span class="line">    dataIndex: &quot;resultProp&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;è¯„åˆ†èŒƒå›´&quot;,</span><br><span class="line">    dataIndex: &quot;resultScoreRange&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;åº”ç”¨ id&quot;,</span><br><span class="line">    dataIndex: &quot;appId&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;ç”¨æˆ· id&quot;,</span><br><span class="line">    dataIndex: &quot;userId&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;åˆ›å»ºæ—¶é—´&quot;,</span><br><span class="line">    dataIndex: &quot;createTime&quot;,</span><br><span class="line">    slotName: &quot;createTime&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;æ›´æ–°æ—¶é—´&quot;,</span><br><span class="line">    dataIndex: &quot;updateTime&quot;,</span><br><span class="line">    slotName: &quot;updateTime&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;æ“ä½œ&quot;,</span><br><span class="line">    slotName: &quot;optional&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å›ç­”ç®¡ç†é¡µé¢"><a href="#å›ç­”ç®¡ç†é¡µé¢" class="headerlink" title="å›ç­”ç®¡ç†é¡µé¢"></a>å›ç­”ç®¡ç†é¡µé¢</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;a-form</span><br><span class="line">    :model=&quot;formSearchParams&quot;</span><br><span class="line">    :style=&quot;&#123; marginBottom: &#x27;20px&#x27; &#125;&quot;</span><br><span class="line">    layout=&quot;inline&quot;</span><br><span class="line">    @submit=&quot;doSearch&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;a-form-item field=&quot;resultName&quot; label=&quot;ç»“æœåç§°&quot;&gt;</span><br><span class="line">      &lt;a-input</span><br><span class="line">        v-model=&quot;formSearchParams.resultName&quot;</span><br><span class="line">        placeholder=&quot;è¯·è¾“å…¥ç»“æœåç§°&quot;</span><br><span class="line">        allow-clear</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">    &lt;a-form-item field=&quot;resultDesc&quot; label=&quot;ç»“æœæè¿°&quot;&gt;</span><br><span class="line">      &lt;a-input</span><br><span class="line">        v-model=&quot;formSearchParams.resultDesc&quot;</span><br><span class="line">        placeholder=&quot;è¯·è¾“å…¥ç»“æœæè¿°&quot;</span><br><span class="line">        allow-clear</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">    &lt;a-form-item field=&quot;appId&quot; label=&quot;åº”ç”¨ id&quot;&gt;</span><br><span class="line">      &lt;a-input</span><br><span class="line">        v-model=&quot;formSearchParams.appId&quot;</span><br><span class="line">        placeholder=&quot;è¯·è¾“å…¥åº”ç”¨ id&quot;</span><br><span class="line">        allow-clear</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">    &lt;a-form-item field=&quot;userId&quot; label=&quot;ç”¨æˆ· id&quot;&gt;</span><br><span class="line">      &lt;a-input</span><br><span class="line">        v-model=&quot;formSearchParams.userId&quot;</span><br><span class="line">        placeholder=&quot;è¯·è¾“å…¥ç”¨æˆ· id&quot;</span><br><span class="line">        allow-clear</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">    &lt;a-form-item&gt;</span><br><span class="line">      &lt;a-button type=&quot;primary&quot; html-type=&quot;submit&quot; style=&quot;width: 100px&quot;&gt;</span><br><span class="line">        æœç´¢</span><br><span class="line">      &lt;/a-button&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">  &lt;/a-form&gt;</span><br><span class="line">  &lt;a-table</span><br><span class="line">    :columns=&quot;columns&quot;</span><br><span class="line">    :data=&quot;dataList&quot;</span><br><span class="line">    :pagination=&quot;&#123;</span><br><span class="line">      showTotal: true,</span><br><span class="line">      pageSize: searchParams.pageSize,</span><br><span class="line">      current: searchParams.current,</span><br><span class="line">      total,</span><br><span class="line">    &#125;&quot;</span><br><span class="line">    @page-change=&quot;onPageChange&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;template #resultPicture=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &lt;a-image width=&quot;64&quot; :src=&quot;record.resultPicture&quot; /&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #appType=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &#123;&#123; APP_TYPE_MAP[record.appType] &#125;&#125;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #scoringStrategy=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &#123;&#123; APP_SCORING_STRATEGY_MAP[record.scoringStrategy] &#125;&#125;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #createTime=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &#123;&#123; dayjs(record.createTime).format(&quot;YYYY-MM-DD HH:mm:ss&quot;) &#125;&#125;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #updateTime=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &#123;&#123; dayjs(record.updateTime).format(&quot;YYYY-MM-DD HH:mm:ss&quot;) &#125;&#125;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #optional=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &lt;a-space&gt;</span><br><span class="line">        &lt;a-button status=&quot;danger&quot; @click=&quot;doDelete(record)&quot;&gt;åˆ é™¤&lt;/a-button&gt;</span><br><span class="line">      &lt;/a-space&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/a-table&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref, watchEffect &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123;</span><br><span class="line">  deleteUserAnswerUsingPost,</span><br><span class="line">  listUserAnswerByPageUsingPost,</span><br><span class="line">&#125; from &quot;@/api/userAnswerController&quot;;</span><br><span class="line">import API from &quot;@/api&quot;;</span><br><span class="line">import message from &quot;@arco-design/web-vue/es/message&quot;;</span><br><span class="line">import &#123; dayjs &#125; from &quot;@arco-design/web-vue/es/_utils/date&quot;;</span><br><span class="line">import &#123; APP_SCORING_STRATEGY_MAP, APP_TYPE_MAP &#125; from &quot;@/constant/app&quot;;</span><br><span class="line"></span><br><span class="line">const formSearchParams = ref&lt;API.UserAnswerQueryRequest&gt;(&#123;&#125;);</span><br><span class="line"></span><br><span class="line">// åˆå§‹åŒ–æœç´¢æ¡ä»¶ï¼ˆä¸åº”è¯¥è¢«ä¿®æ”¹ï¼‰</span><br><span class="line">const initSearchParams = &#123;</span><br><span class="line">  current: 1,</span><br><span class="line">  pageSize: 10,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const searchParams = ref&lt;API.UserAnswerQueryRequest&gt;(&#123;</span><br><span class="line">  ...initSearchParams,</span><br><span class="line">&#125;);</span><br><span class="line">const dataList = ref&lt;API.UserAnswer[]&gt;([]);</span><br><span class="line">const total = ref&lt;number&gt;(0);</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * åŠ è½½æ•°æ®</span><br><span class="line"> */</span><br><span class="line">const loadData = async () =&gt; &#123;</span><br><span class="line">  const res = await listUserAnswerByPageUsingPost(searchParams.value);</span><br><span class="line">  if (res.data.code === 0) &#123;</span><br><span class="line">    dataList.value = res.data.data?.records || [];</span><br><span class="line">    total.value = res.data.data?.total || 0;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    message.error(&quot;è·å–æ•°æ®å¤±è´¥ï¼Œ&quot; + res.data.message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * æ‰§è¡Œæœç´¢</span><br><span class="line"> */</span><br><span class="line">const doSearch = () =&gt; &#123;</span><br><span class="line">  searchParams.value = &#123;</span><br><span class="line">    ...initSearchParams,</span><br><span class="line">    ...formSearchParams.value,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * å½“åˆ†é¡µå˜åŒ–æ—¶ï¼Œæ”¹å˜æœç´¢æ¡ä»¶ï¼Œè§¦å‘æ•°æ®åŠ è½½</span><br><span class="line"> * @param page</span><br><span class="line"> */</span><br><span class="line">const onPageChange = (page: number) =&gt; &#123;</span><br><span class="line">  searchParams.value = &#123;</span><br><span class="line">    ...searchParams.value,</span><br><span class="line">    current: page,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * åˆ é™¤</span><br><span class="line"> * @param record</span><br><span class="line"> */</span><br><span class="line">const doDelete = async (record: API.UserAnswer) =&gt; &#123;</span><br><span class="line">  if (!record.id) &#123;</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  const res = await deleteUserAnswerUsingPost(&#123;</span><br><span class="line">    id: record.id,</span><br><span class="line">  &#125;);</span><br><span class="line">  if (res.data.code === 0) &#123;</span><br><span class="line">    loadData();</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    message.error(&quot;åˆ é™¤å¤±è´¥ï¼Œ&quot; + res.data.message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * ç›‘å¬ searchParams å˜é‡ï¼Œæ”¹å˜æ—¶è§¦å‘æ•°æ®çš„é‡æ–°åŠ è½½</span><br><span class="line"> */</span><br><span class="line">watchEffect(() =&gt; &#123;</span><br><span class="line">  loadData();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// è¡¨æ ¼åˆ—é…ç½®</span><br><span class="line">const columns = [</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;id&quot;,</span><br><span class="line">    dataIndex: &quot;id&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;é€‰é¡¹&quot;,</span><br><span class="line">    dataIndex: &quot;choices&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;ç»“æœ id&quot;,</span><br><span class="line">    dataIndex: &quot;resultId&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;åç§°&quot;,</span><br><span class="line">    dataIndex: &quot;resultName&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;æè¿°&quot;,</span><br><span class="line">    dataIndex: &quot;resultDesc&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;å›¾ç‰‡&quot;,</span><br><span class="line">    dataIndex: &quot;resultPicture&quot;,</span><br><span class="line">    slotName: &quot;resultPicture&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;å¾—åˆ†&quot;,</span><br><span class="line">    dataIndex: &quot;resultScore&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;åº”ç”¨ id&quot;,</span><br><span class="line">    dataIndex: &quot;appId&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;åº”ç”¨ç±»å‹&quot;,</span><br><span class="line">    dataIndex: &quot;appType&quot;,</span><br><span class="line">    slotName: &quot;appType&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;è¯„åˆ†ç­–ç•¥&quot;,</span><br><span class="line">    dataIndex: &quot;scoringStrategy&quot;,</span><br><span class="line">    slotName: &quot;scoringStrategy&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;ç”¨æˆ· id&quot;,</span><br><span class="line">    dataIndex: &quot;userId&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;åˆ›å»ºæ—¶é—´&quot;,</span><br><span class="line">    dataIndex: &quot;createTime&quot;,</span><br><span class="line">    slotName: &quot;createTime&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;æ›´æ–°æ—¶é—´&quot;,</span><br><span class="line">    dataIndex: &quot;updateTime&quot;,</span><br><span class="line">    slotName: &quot;updateTime&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;æ“ä½œ&quot;,</span><br><span class="line">    slotName: &quot;optional&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›® </category>
          
          <category> AIç­”é¢˜åº”ç”¨å¹³å° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javaé¡¹ç›® </tag>
            
            <tag> AIç­”é¢˜åº”ç”¨å¹³å° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AIç­”é¢˜åº”ç”¨å¹³å°_2åç«¯å¼€å‘</title>
      <link href="/2024/07/03/AI%E7%AD%94%E9%A2%98%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0_2%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
      <url>/2024/07/03/AI%E7%AD%94%E9%A2%98%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0_2%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/</url>
      
        <content type="html"><![CDATA[<p>åå°å¼€å‘çš„åŸºæœ¬æ­¥éª¤</p><ul><li>éœ€æ±‚åˆ†æ</li><li>åº“è¡¨è®¾è®¡</li><li>åç«¯é¡¹ç›®åˆå§‹åŒ–</li><li>åç«¯é¡¹ç›®åŸºç¡€å¼€å‘-å¢åˆ æ”¹æŸ¥</li><li>åç«¯æ ¸å¿ƒä¸šåŠ¡å¼€å‘</li></ul><h1 id="éœ€æ±‚åˆ†æ"><a href="#éœ€æ±‚åˆ†æ" class="headerlink" title="éœ€æ±‚åˆ†æ"></a>éœ€æ±‚åˆ†æ</h1><h2 id="ç”¨æˆ·æ¨¡å—"><a href="#ç”¨æˆ·æ¨¡å—" class="headerlink" title="ç”¨æˆ·æ¨¡å—"></a>ç”¨æˆ·æ¨¡å—</h2><ul><li>æ³¨å†Œ</li><li>ç™»å½•</li><li>ç®¡ç†ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰</li></ul><h2 id="åº”ç”¨æ¨¡å—"><a href="#åº”ç”¨æ¨¡å—" class="headerlink" title="åº”ç”¨æ¨¡å—"></a>åº”ç”¨æ¨¡å—</h2><ul><li>åˆ›å»ºåº”ç”¨</li><li>ä¿®æ”¹åº”ç”¨</li><li>åˆ é™¤åº”ç”¨</li><li>æŸ¥çœ‹åº”ç”¨è¯¦æƒ…</li><li>æŸ¥çœ‹åº”ç”¨åˆ—è¡¨</li><li>æŸ¥çœ‹è‡ªå·±åˆ›å»ºçš„åº”ç”¨</li><li>åˆ†äº«åº”ç”¨</li><li>ç®¡ç†åº”ç”¨-å¢åˆ æ”¹æŸ¥ï¼ˆä»…ç®¡ç†å‘˜ï¼‰</li><li>ç®¡ç†åº”ç”¨-ä¸Šçº¿å’Œä¸‹æ¶ï¼ˆä»…ç®¡ç†å‘˜ï¼‰</li></ul><h2 id="é¢˜ç›®æ¨¡å—"><a href="#é¢˜ç›®æ¨¡å—" class="headerlink" title="é¢˜ç›®æ¨¡å—"></a>é¢˜ç›®æ¨¡å—</h2><ul><li>åˆ›å»ºé¢˜ç›®</li><li>åˆ é™¤é¢˜ç›®</li><li>ä¿®æ”¹é¢˜ç›®</li><li>ç®¡ç†é¢˜ç›®-å¢åˆ æ”¹æŸ¥ï¼ˆä»…ç®¡ç†å‘˜ï¼‰</li><li>AIç”Ÿæˆé¢˜ç›®</li></ul><h2 id="è¯„åˆ†æ¨¡å—"><a href="#è¯„åˆ†æ¨¡å—" class="headerlink" title="è¯„åˆ†æ¨¡å—"></a>è¯„åˆ†æ¨¡å—</h2><ul><li>åˆ›å»ºè¯„åˆ†ç»“æœ</li><li>åˆ é™¤è¯„åˆ†ç»“æœ</li><li>ä¿®æ”¹è¯„åˆ†ç»“æœ</li><li>è®¡ç®—è¯„åˆ†ç»“æœï¼ˆå¤šç§è¯„åˆ†ç­–ç•¥ï¼‰<ul><li>è‡ªå®šä¹‰æ‰“åˆ†ç±»ç­–ç•¥</li><li>è‡ªå®šä¹‰æµ‹è¯„ç±»ç­–ç•¥</li><li>AIåˆ†ææµ‹è¯„ç±»ç­–ç•¥</li></ul></li><li>ç®¡ç†è¯„åˆ†ç»“æœ-å¢åˆ æ”¹æŸ¥ï¼ˆä»…ç®¡ç†å‘˜ï¼‰</li></ul><h2 id="å›ç­”æ¨¡å—"><a href="#å›ç­”æ¨¡å—" class="headerlink" title="å›ç­”æ¨¡å—"></a>å›ç­”æ¨¡å—</h2><ul><li>æäº¤å›ç­”</li><li>æŸ¥çœ‹è‡ªå·±æäº¤çš„å›ç­”åˆ—è¡¨</li><li>æŸ¥çœ‹æŸæ¬¡å›ç­”çš„å›ç­”ç»“æœ</li><li>ç®¡ç†å›ç­”-å¢åˆ æ”¹æŸ¥ï¼ˆä»…ç®¡ç†å‘˜ï¼‰</li></ul><h2 id="ç»Ÿè®¡åˆ†ææ¨¡å—"><a href="#ç»Ÿè®¡åˆ†ææ¨¡å—" class="headerlink" title="ç»Ÿè®¡åˆ†ææ¨¡å—"></a>ç»Ÿè®¡åˆ†ææ¨¡å—</h2><ul><li>åº”ç”¨ç»“æœåˆ†æä¸æŸ¥çœ‹<ul><li>åˆ†æçƒ­é—¨åº”ç”¨</li><li>åˆ†ææŸä¸€åº”ç”¨ä¸‹çš„ç»“æœæ¯”ä¾‹</li></ul></li></ul><h1 id="åº“è¡¨è®¾è®¡"><a href="#åº“è¡¨è®¾è®¡" class="headerlink" title="åº“è¡¨è®¾è®¡"></a>åº“è¡¨è®¾è®¡</h1><p>æœ¬é¡¹ç›®ä¸»è¦æ¶‰åŠ5ä¸ªåº“è¡¨ï¼ŒåŒ…æ‹¬ï¼š<strong>ç”¨æˆ·è¡¨</strong>ã€<strong>åº”ç”¨è¡¨</strong>ã€<strong>é¢˜ç›®è¡¨</strong>ã€<strong>ç”¨æˆ·å›ç­”è¡¨</strong>ã€<strong>è¯„åˆ†ç»“æœè¡¨.</strong></p><h2 id="ç”¨æˆ·è¡¨"><a href="#ç”¨æˆ·è¡¨" class="headerlink" title="ç”¨æˆ·è¡¨"></a><strong>ç”¨æˆ·è¡¨</strong></h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- ç”¨æˆ·è¡¨</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> <span class="keyword">user</span></span><br><span class="line">(</span><br><span class="line">    id           <span class="type">bigint</span> auto_increment comment <span class="string">&#x27;id&#x27;</span> <span class="keyword">primary</span> key,</span><br><span class="line">    userAccount  <span class="type">varchar</span>(<span class="number">256</span>)                           <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;è´¦å·&#x27;</span>,</span><br><span class="line">    userPassword <span class="type">varchar</span>(<span class="number">512</span>)                           <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;å¯†ç &#x27;</span>,</span><br><span class="line">    unionId      <span class="type">varchar</span>(<span class="number">256</span>)                           <span class="keyword">null</span> comment <span class="string">&#x27;å¾®ä¿¡å¼€æ”¾å¹³å°id&#x27;</span>,</span><br><span class="line">    mpOpenId     <span class="type">varchar</span>(<span class="number">256</span>)                           <span class="keyword">null</span> comment <span class="string">&#x27;å…¬ä¼—å·openId&#x27;</span>,</span><br><span class="line">    userName     <span class="type">varchar</span>(<span class="number">256</span>)                           <span class="keyword">null</span> comment <span class="string">&#x27;ç”¨æˆ·æ˜µç§°&#x27;</span>,</span><br><span class="line">    userAvatar   <span class="type">varchar</span>(<span class="number">1024</span>)                          <span class="keyword">null</span> comment <span class="string">&#x27;ç”¨æˆ·å¤´åƒ&#x27;</span>,</span><br><span class="line">    userProfile  <span class="type">varchar</span>(<span class="number">512</span>)                           <span class="keyword">null</span> comment <span class="string">&#x27;ç”¨æˆ·ç®€ä»‹&#x27;</span>,</span><br><span class="line">    userRole     <span class="type">varchar</span>(<span class="number">256</span>) <span class="keyword">default</span> <span class="string">&#x27;user&#x27;</span>            <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;ç”¨æˆ·è§’è‰²ï¼šuser/admin/ban&#x27;</span>,</span><br><span class="line">    createTime   datetime     <span class="keyword">default</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">    updateTime   datetime     <span class="keyword">default</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">on</span> <span class="keyword">update</span> <span class="built_in">CURRENT_TIMESTAMP</span> comment <span class="string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>,</span><br><span class="line">    isDelete     tinyint      <span class="keyword">default</span> <span class="number">0</span>                 <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;æ˜¯å¦åˆ é™¤&#x27;</span>,</span><br><span class="line">    index idx_unionId (unionId)</span><br><span class="line">) comment <span class="string">&#x27;ç”¨æˆ·&#x27;</span> <span class="keyword">collate</span> <span class="operator">=</span> utf8mb4_unicode_ci;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="åº”ç”¨è¡¨"><a href="#åº”ç”¨è¡¨" class="headerlink" title="åº”ç”¨è¡¨"></a><strong>åº”ç”¨è¡¨</strong></h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- åº”ç”¨è¡¨</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> app</span><br><span class="line">(</span><br><span class="line">    id              <span class="type">bigint</span> auto_increment comment <span class="string">&#x27;id&#x27;</span> <span class="keyword">primary</span> key,</span><br><span class="line">    appName         <span class="type">varchar</span>(<span class="number">128</span>)                       <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;åº”ç”¨å&#x27;</span>,</span><br><span class="line">    appDesc         <span class="type">varchar</span>(<span class="number">2048</span>)                      <span class="keyword">null</span> comment <span class="string">&#x27;åº”ç”¨æè¿°&#x27;</span>,</span><br><span class="line">    appIcon         <span class="type">varchar</span>(<span class="number">1024</span>)                      <span class="keyword">null</span> comment <span class="string">&#x27;åº”ç”¨å›¾æ ‡&#x27;</span>,</span><br><span class="line">    appType         tinyint  <span class="keyword">default</span> <span class="number">0</span>                 <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;åº”ç”¨ç±»å‹ï¼ˆ0-å¾—åˆ†ç±»ï¼Œ1-æµ‹è¯„ç±»ï¼‰&#x27;</span>,</span><br><span class="line">    scoringStrategy tinyint  <span class="keyword">default</span> <span class="number">0</span>                 <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;è¯„åˆ†ç­–ç•¥ï¼ˆ0-è‡ªå®šä¹‰ï¼Œ1-AIï¼‰&#x27;</span>,</span><br><span class="line">    reviewStatus    <span class="type">int</span>      <span class="keyword">default</span> <span class="number">0</span>                 <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;å®¡æ ¸çŠ¶æ€ï¼š0-å¾…å®¡æ ¸, 1-é€šè¿‡, 2-æ‹’ç»&#x27;</span>,</span><br><span class="line">    reviewMessage   <span class="type">varchar</span>(<span class="number">512</span>)                       <span class="keyword">null</span> comment <span class="string">&#x27;å®¡æ ¸ä¿¡æ¯&#x27;</span>,</span><br><span class="line">    reviewerId      <span class="type">bigint</span>                             <span class="keyword">null</span> comment <span class="string">&#x27;å®¡æ ¸äºº id&#x27;</span>,</span><br><span class="line">    reviewTime      datetime                           <span class="keyword">null</span> comment <span class="string">&#x27;å®¡æ ¸æ—¶é—´&#x27;</span>,</span><br><span class="line">    userId          <span class="type">bigint</span>                             <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;åˆ›å»ºç”¨æˆ· id&#x27;</span>,</span><br><span class="line">    createTime      datetime <span class="keyword">default</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">    updateTime      datetime <span class="keyword">default</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">on</span> <span class="keyword">update</span> <span class="built_in">CURRENT_TIMESTAMP</span> comment <span class="string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>,</span><br><span class="line">    isDelete        tinyint  <span class="keyword">default</span> <span class="number">0</span>                 <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;æ˜¯å¦åˆ é™¤&#x27;</span>,</span><br><span class="line">    index idx_appName (appName)</span><br><span class="line">) comment <span class="string">&#x27;åº”ç”¨&#x27;</span> <span class="keyword">collate</span> <span class="operator">=</span> utf8mb4_unicode_ci;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­appTypeå’ŒscoringStrategyæ˜¯æœ€é‡è¦çš„å­—æ®µï¼ŒappTypeä¸»è¦æœ‰æµ‹è¯„ç±»å’Œæ‰“åˆ†ç±»ï¼ŒscoringStrategyä¸»è¦æ˜¯è‡ªå®šä¹‰ç­–ç•¥ä»¥åŠAIåˆ†æã€‚<br>å…¶ä¸­å®¡æ ¸å››ä»¶å¥—</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">reviewStatus    <span class="type">int</span>      <span class="keyword">default</span> <span class="number">0</span>                 <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;å®¡æ ¸çŠ¶æ€ï¼š0-å¾…å®¡æ ¸, 1-é€šè¿‡, 2-æ‹’ç»&#x27;</span>,</span><br><span class="line">reviewMessage   <span class="type">varchar</span>(<span class="number">512</span>)                       <span class="keyword">null</span> comment <span class="string">&#x27;å®¡æ ¸ä¿¡æ¯&#x27;</span>,</span><br><span class="line">reviewerId      <span class="type">bigint</span>                             <span class="keyword">null</span> comment <span class="string">&#x27;å®¡æ ¸äºº id&#x27;</span>,</span><br><span class="line">reviewTime      datetime                           <span class="keyword">null</span> comment <span class="string">&#x27;å®¡æ ¸æ—¶é—´&#x27;</span>,</span><br></pre></td></tr></table></figure><h2 id="é¢˜ç›®è¡¨"><a href="#é¢˜ç›®è¡¨" class="headerlink" title="é¢˜ç›®è¡¨"></a>é¢˜ç›®è¡¨</h2><p>æ¯ä¸€ä¸ªåº”ç”¨éƒ½å¯¹åº”ä¸€ä¸ªé¢˜ç›®è¡¨çš„è®°å½•ï¼Œå…¶ä¸­éœ€è¦æ³¨æ„å¯¹äº<code>questionContent</code>ä½¿ç”¨<strong>jsonå½¢å¼</strong>æ¥ä¿å­˜ï¼Œæ‰€ç”¨åˆ°çš„æ•°æ®ç±»å‹æ˜¯<strong>text</strong>ï¼Œæ•´ä½“æ¥æ›´æ–°æˆ–è€…ä¿®æ”¹åº”ç”¨çš„é¢˜ç›®ä¿¡æ¯ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- é¢˜ç›®è¡¨</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> question</span><br><span class="line">(</span><br><span class="line">    id              <span class="type">bigint</span> auto_increment comment <span class="string">&#x27;id&#x27;</span> <span class="keyword">primary</span> key,</span><br><span class="line">    questionContent text                               <span class="keyword">null</span> comment <span class="string">&#x27;é¢˜ç›®å†…å®¹ï¼ˆjsonæ ¼å¼ï¼‰&#x27;</span>,</span><br><span class="line">    appId           <span class="type">bigint</span>                             <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;åº”ç”¨ id&#x27;</span>,</span><br><span class="line">    userId          <span class="type">bigint</span>                             <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;åˆ›å»ºç”¨æˆ· id&#x27;</span>,</span><br><span class="line">    createTime      datetime <span class="keyword">default</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">    updateTime      datetime <span class="keyword">default</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">on</span> <span class="keyword">update</span> <span class="built_in">CURRENT_TIMESTAMP</span> comment <span class="string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>,</span><br><span class="line">    isDelete        tinyint  <span class="keyword">default</span> <span class="number">0</span>                 <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;æ˜¯å¦åˆ é™¤&#x27;</span>,</span><br><span class="line">    index idx_appId (appId)</span><br><span class="line">) comment <span class="string">&#x27;é¢˜ç›®&#x27;</span> <span class="keyword">collate</span> <span class="operator">=</span> utf8mb4_unicode_ci;</span><br></pre></td></tr></table></figure><p>å¯¹äº<code>questionContent</code>å­—æ®µï¼Œè¿˜éœ€è¦æ³¨æ„åŒºåˆ†<code>result</code>å’Œ<code>score</code>ï¼Œè¿™ä¸¤ä¸ªå­—æ®µå¹¶ä¸æ˜¯å…¨éƒ½èµ‹å€¼ï¼Œå®ƒä»¬åˆ†åˆ«ç”¨æ¥ç»Ÿè®¡ä¸¤ç§ä¸åŒåº”ç”¨ç±»å‹çš„ç»“æœ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    &quot;options&quot;: [</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;result&quot;: &quot;I&quot;, <span class="operator">/</span><span class="operator">/</span> å¦‚æœæ˜¯æµ‹è¯„ç±»ï¼Œåˆ™ç”¨ reslut æ¥ä¿å­˜ç­”æ¡ˆå±æ€§</span><br><span class="line">        &quot;score&quot;: <span class="number">1</span>,    <span class="operator">/</span><span class="operator">/</span> å¦‚æœæ˜¯å¾—åˆ†ç±»ï¼Œåˆ™ç”¨ score æ¥è®¾ç½®æœ¬é¢˜åˆ†æ•°</span><br><span class="line">        &quot;value&quot;: &quot;Aé€‰é¡¹&quot;, <span class="operator">/</span><span class="operator">/</span>é€‰é¡¹å†…å®¹</span><br><span class="line">        &quot;key&quot;: &quot;A&quot;   <span class="operator">/</span><span class="operator">/</span>é€‰é¡¹ key</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;result&quot;: &quot;E&quot;, <span class="operator">/</span><span class="operator">/</span> å¦‚æœæ˜¯æµ‹è¯„ç±»ï¼Œåˆ™ç”¨ reslut æ¥ä¿å­˜ç­”æ¡ˆå±æ€§</span><br><span class="line">        &quot;score&quot;: <span class="number">0</span>,</span><br><span class="line">        &quot;value&quot;: &quot;Bé€‰é¡¹&quot;,</span><br><span class="line">        &quot;key&quot;: &quot;B&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    &quot;title&quot;: &quot;é¢˜ç›®&quot;</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h2 id="è¯„åˆ†ç»“æœè¡¨"><a href="#è¯„åˆ†ç»“æœè¡¨" class="headerlink" title="è¯„åˆ†ç»“æœè¡¨"></a>è¯„åˆ†ç»“æœè¡¨</h2><p>å½“ç”¨æˆ·ç­”å®Œé¢˜åï¼Œä¼šè·³è½¬åˆ°ä¸€ä¸ªç»“æœè¯¦æƒ…é¡µï¼Œè¯¥é¡µé¢è¦å±•ç¤ºç”¨æˆ·çš„ç­”é¢˜ç»“æœä¿¡æ¯ï¼Œï¼ˆæ¯”å¦‚ï¼šå¦‚æœæ˜¯MBTIæ€§æ ¼æµ‹è¯•ï¼Œé‚£ä¹ˆä¼šå±•ç¤ºâ€œISTPâ€ç­‰ä¿¡æ¯ï¼‰å…¶å®å°±æ˜¯è¿™äº›é¢˜ç›®çš„ç­”æ¡ˆåˆ—è¡¨ï¼Œçœ‹ç”¨æˆ·çš„é€‰é¡¹ç¬¦åˆè¿™äº›ç»“æœä¸­çš„å“ªä¸€ä¸ªã€‚è¯¥è¡¨å°±æ˜¯ä¿å­˜è¿™äº›ä¿¡æ¯çš„ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- è¯„åˆ†ç»“æœè¡¨</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> scoring_result</span><br><span class="line">(</span><br><span class="line">    id               <span class="type">bigint</span> auto_increment comment <span class="string">&#x27;id&#x27;</span> <span class="keyword">primary</span> key,</span><br><span class="line">    resultName       <span class="type">varchar</span>(<span class="number">128</span>)                       <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;ç»“æœåç§°ï¼Œå¦‚ç‰©æµå¸ˆ&#x27;</span>,</span><br><span class="line">    resultDesc       text                               <span class="keyword">null</span> comment <span class="string">&#x27;ç»“æœæè¿°&#x27;</span>,</span><br><span class="line">    resultPicture    <span class="type">varchar</span>(<span class="number">1024</span>)                      <span class="keyword">null</span> comment <span class="string">&#x27;ç»“æœå›¾ç‰‡&#x27;</span>,</span><br><span class="line">    resultProp       <span class="type">varchar</span>(<span class="number">128</span>)                       <span class="keyword">null</span> comment <span class="string">&#x27;ç»“æœå±æ€§é›†åˆ JSONï¼Œå¦‚ [I,S,T,J]&#x27;</span>,</span><br><span class="line">    resultScoreRange <span class="type">int</span>                                <span class="keyword">null</span> comment <span class="string">&#x27;ç»“æœå¾—åˆ†èŒƒå›´ï¼Œå¦‚ 80ï¼Œè¡¨ç¤º 80åŠä»¥ä¸Šçš„åˆ†æ•°å‘½ä¸­æ­¤ç»“æœ&#x27;</span>,</span><br><span class="line">    appId            <span class="type">bigint</span>                             <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;åº”ç”¨ id&#x27;</span>,</span><br><span class="line">    userId           <span class="type">bigint</span>                             <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;åˆ›å»ºç”¨æˆ· id&#x27;</span>,</span><br><span class="line">    createTime       datetime <span class="keyword">default</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">    updateTime       datetime <span class="keyword">default</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">on</span> <span class="keyword">update</span> <span class="built_in">CURRENT_TIMESTAMP</span> comment <span class="string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>,</span><br><span class="line">    isDelete         tinyint  <span class="keyword">default</span> <span class="number">0</span>                 <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;æ˜¯å¦åˆ é™¤&#x27;</span>,</span><br><span class="line">    index idx_appId (appId)</span><br><span class="line">) comment <span class="string">&#x27;è¯„åˆ†ç»“æœ&#x27;</span> <span class="keyword">collate</span> <span class="operator">=</span> utf8mb4_unicode_ci;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å…¶ä¸­æœ‰ä¸¤ä¸ªå­—æ®µéœ€è¦æ³¨æ„ï¼š<code>resultProp</code>å’Œ<code>resultScoreRange</code>,å¯¹äºæµ‹è¯„ç±»åº”ç”¨ï¼Œç”¨<code>resultProp</code>å­˜å‚¨ç»“æœï¼Œå¯¹äºå¾—åˆ†ç±»åº”ç”¨ï¼Œç”¨<code>resultScoreRange</code>æ¥ä¿å­˜ç»“æœã€‚<br><strong>æµ‹è¯„ç±»ç»“æœé›†</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span><span class="string">&quot;I&quot;</span><span class="punctuation">,</span> <span class="string">&quot;S&quot;</span><span class="punctuation">,</span> <span class="string">&quot;T&quot;</span><span class="punctuation">,</span> <span class="string">&quot;J&quot;</span><span class="punctuation">]</span></span><br></pre></td></tr></table></figure><p><strong>å¾—åˆ†ç±»ç»“æœé›†</strong><br>é»˜è®¤ResultScoringå­—æ®µçš„ä½¿ç”¨è§„åˆ™æ˜¯â€œå¤§äºç­‰äºè®¾å®šçš„åˆ†æ•°åˆ™å‘½ä¸­å¯¹åº”çš„resultâ€ã€‚<br>ä¸¾ä¸€ä¸ªå¾—åˆ†ç±»çš„ä¾‹å­</p><ul><li>ResultNameï¼šçŸ¥è¯†å¤§å¸ˆ</li><li>ResultDescï¼šçŸ¥è¯†æŒæ¡çš„å¾ˆæ£’</li><li>ResultIconï¼šé¢„ç•™å­—æ®µï¼Œå¯ä»¥å¡«å……ç»“æœå›¾ç‰‡</li><li>ResultScoringRangeï¼š9</li></ul><h2 id="ç”¨æˆ·ç­”é¢˜è®°å½•è¡¨"><a href="#ç”¨æˆ·ç­”é¢˜è®°å½•è¡¨" class="headerlink" title="ç”¨æˆ·ç­”é¢˜è®°å½•è¡¨"></a>ç”¨æˆ·ç­”é¢˜è®°å½•è¡¨</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- ç”¨æˆ·ç­”é¢˜è®°å½•è¡¨</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> user_answer</span><br><span class="line">(</span><br><span class="line">    id              <span class="type">bigint</span> auto_increment <span class="keyword">primary</span> key,</span><br><span class="line">    appId           <span class="type">bigint</span>                             <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;åº”ç”¨ id&#x27;</span>,</span><br><span class="line">    appType         tinyint  <span class="keyword">default</span> <span class="number">0</span>                 <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;åº”ç”¨ç±»å‹ï¼ˆ0-å¾—åˆ†ç±»ï¼Œ1-è§’è‰²æµ‹è¯„ç±»ï¼‰&#x27;</span>,</span><br><span class="line">    scoringStrategy tinyint  <span class="keyword">default</span> <span class="number">0</span>                 <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;è¯„åˆ†ç­–ç•¥ï¼ˆ0-è‡ªå®šä¹‰ï¼Œ1-AIï¼‰&#x27;</span>,</span><br><span class="line">    choices         text                               <span class="keyword">null</span> comment <span class="string">&#x27;ç”¨æˆ·ç­”æ¡ˆï¼ˆJSON æ•°ç»„ï¼‰&#x27;</span>,</span><br><span class="line">    resultId        <span class="type">bigint</span>                             <span class="keyword">null</span> comment <span class="string">&#x27;è¯„åˆ†ç»“æœ id&#x27;</span>,</span><br><span class="line">    resultName      <span class="type">varchar</span>(<span class="number">128</span>)                       <span class="keyword">null</span> comment <span class="string">&#x27;ç»“æœåç§°ï¼Œå¦‚ç‰©æµå¸ˆ&#x27;</span>,</span><br><span class="line">    resultDesc      text                               <span class="keyword">null</span> comment <span class="string">&#x27;ç»“æœæè¿°&#x27;</span>,</span><br><span class="line">    resultPicture   <span class="type">varchar</span>(<span class="number">1024</span>)                      <span class="keyword">null</span> comment <span class="string">&#x27;ç»“æœå›¾æ ‡&#x27;</span>,</span><br><span class="line">    resultScore     <span class="type">int</span>                                <span class="keyword">null</span> comment <span class="string">&#x27;å¾—åˆ†&#x27;</span>,</span><br><span class="line">    userId          <span class="type">bigint</span>                             <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;ç”¨æˆ· id&#x27;</span>,</span><br><span class="line">    createTime      datetime <span class="keyword">default</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">    updateTime      datetime <span class="keyword">default</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">on</span> <span class="keyword">update</span> <span class="built_in">CURRENT_TIMESTAMP</span> comment <span class="string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>,</span><br><span class="line">    isDelete        tinyint  <span class="keyword">default</span> <span class="number">0</span>                 <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;æ˜¯å¦åˆ é™¤&#x27;</span>,</span><br><span class="line">    index idx_appId (appId),</span><br><span class="line">    index idx_userId (userId)</span><br><span class="line">) comment <span class="string">&#x27;ç”¨æˆ·ç­”é¢˜è®°å½•&#x27;</span> <span class="keyword">collate</span> <span class="operator">=</span> utf8mb4_unicode_ci;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¯¹äºè¿™ä¸ªè¡¨ï¼Œéœ€è¦æ³¨æ„ä¸¤ä¸ªç‚¹</p><ol><li>å¯¹äºResultId,å®ƒå¯èƒ½ä¸ºç©ºï¼Œå› ä¸ºå¦‚æœä½¿ç”¨AIæ¥åˆ†æç”¨æˆ·ç­”æ¡ˆçš„æ—¶å€™ï¼Œæ˜¯æ²¡æœ‰ç»“æœå±æ€§çš„ï¼Œå®ƒä¸ä¼šä»ç»“æœè¡¨ä¸­æŸ¥æ‰¾ç¬¦åˆçš„ç»“æœã€‚</li><li>é¢˜ç›®ä¸­è®¾ç½®äº†ä¸€äº›å†—ä½™å­—æ®µï¼Œæ¯”å¦‚åº”ç”¨è¡¨ä¸­çš„appIDã€scoringStrategyã€appTypeä»¥åŠç»“æœè¡¨ä¸­çš„resultNameã€ resultDesc ã€resultPicture ç­‰ï¼Œè¿™äº›å­—æ®µå¯ä»¥è”è¡¨æŸ¥è¯¢ï¼Œä¸ºä»€ä¹ˆè¿˜è¦éƒ½æ·»åŠ åˆ°è¯¥è¡¨ä¸­ï¼Ÿå› ä¸ºç­”é¢˜è®°å½•ä¸€æ—¦è®¾ç½®ï¼Œå‡ ä¹ä¸ä¼šä¿®æ”¹ï¼Œä¾¿äºæŸ¥è¯¢ï¼Œä¸ç”¨è”è¡¨ï¼ŒèŠ‚çº¦å¼€å‘æˆæœ¬</li></ol><p>choicesæ˜¯ç”¨æˆ·æäº¤çš„ç­”æ¡ˆï¼Œæ˜¯é¢˜ç›®çš„keyå­—æ®µï¼Œç”¨jsonæ¥ä¿å­˜</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span><span class="string">&quot;A&quot;</span><span class="punctuation">,</span> <span class="string">&quot;B&quot;</span><span class="punctuation">,</span> <span class="string">&quot;C&quot;</span><span class="punctuation">]</span></span><br></pre></td></tr></table></figure><h1 id="åç«¯é¡¹ç›®åˆå§‹åŒ–"><a href="#åç«¯é¡¹ç›®åˆå§‹åŒ–" class="headerlink" title="åç«¯é¡¹ç›®åˆå§‹åŒ–"></a>åç«¯é¡¹ç›®åˆå§‹åŒ–</h1><h2 id="ä¸‹è½½åç«¯é¡¹ç›®æ¨¡æ¿"><a href="#ä¸‹è½½åç«¯é¡¹ç›®æ¨¡æ¿" class="headerlink" title="ä¸‹è½½åç«¯é¡¹ç›®æ¨¡æ¿"></a>ä¸‹è½½åç«¯é¡¹ç›®æ¨¡æ¿</h2><p><a href="https://github.com/stufz/springboot-init">GitHub - stufz&#x2F;springboot-init: Springbootåç«¯åˆå§‹åŒ–é¡¹ç›®</a></p><h2 id="å‡†å¤‡ä¾èµ–"><a href="#å‡†å¤‡ä¾èµ–" class="headerlink" title="å‡†å¤‡ä¾èµ–"></a>å‡†å¤‡ä¾èµ–</h2><ul><li>MySQLï¼š8.0+</li><li>Redisï¼šé»˜è®¤ä¸å¼€å¯</li><li>ElasticSearchï¼šé»˜è®¤ä¸å¼€å¯</li><li>Mavenï¼š3.5+ï¼ˆå¼€å¯IDEAåéœ€è¦ä¿®æ”¹mavené…ç½®ï¼Œè¯¥ä¸ºè‡ªå·±å®‰è£…çš„mavenï¼Œå¦åˆ™ideaé»˜è®¤ä¼šä½¿ç”¨è‡ªå·±çš„mavenï¼Œæ„å»ºçš„æ—¶å€™å¯èƒ½ä¼šæŠ¥é”™ï¼‰</li></ul><h2 id="æ‰§è¡Œæ¨¡æ¿çš„åˆå§‹åŒ–sql"><a href="#æ‰§è¡Œæ¨¡æ¿çš„åˆå§‹åŒ–sql" class="headerlink" title="æ‰§è¡Œæ¨¡æ¿çš„åˆå§‹åŒ–sql"></a>æ‰§è¡Œæ¨¡æ¿çš„åˆå§‹åŒ–sql</h2><p>éœ€è¦åœ¨application.ymlä¸­é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ï¼Œæ”¹ä¸ºè‡ªå·±æœ¬åœ°çš„ç«¯å£å’Œç”¨æˆ·ä¿¡æ¯<br><img src="https://fanzher.xyz/img/1722222176711-873ebc9b-bbcc-41df-9822-72fcef7a84aa.png" alt="image.png"></p><h2 id="æ¨¡æ¿æ”¹é€ "><a href="#æ¨¡æ¿æ”¹é€ " class="headerlink" title="æ¨¡æ¿æ”¹é€ "></a>æ¨¡æ¿æ”¹é€ </h2><ul><li>ä¿®æ”¹æ¨¡å—åï¼šå°†springboot-initæ¢æˆè‡ªå·±fandada(ctrl+shift+r)</li><li>æ”¹åŒ…åï¼šé‡æ„+å…¨å±€æ›¿æ¢ï¼Œcom.stufz.fandada</li><li>ç§»é™¤ä¸å¿…è¦çš„æ¨¡å—ï¼ˆæ¯”å¦‚ï¼šå¾®ä¿¡ã€ESç­‰ï¼‰</li></ul><h2 id="å¯åŠ¨æµ‹è¯•"><a href="#å¯åŠ¨æµ‹è¯•" class="headerlink" title="å¯åŠ¨æµ‹è¯•"></a>å¯åŠ¨æµ‹è¯•</h2><p><img src="https://fanzher.xyz/img/1722222970312-fbc4de14-0c55-4cac-9d8b-d0fe0f2625cb.png" alt="image.png"><br>æ˜¾ç¤ºä»¥ä¸Šæ—¥å¿—ï¼Œå¹¶ä¸”è®¿é—®<code>http://localhost:ç«¯å£å·/é¡¹ç›®ä¸Šä¸‹æ–‡è·¯å¾„/doc.html</code>è®¿é—®åœ¨çº¿æ¥å£æ–‡æ¡£ï¼Œå¦‚æœå¯ä»¥æ­£å¸¸æ˜¾ç¤ºï¼Œé‚£ä¹ˆé¡¹ç›®åˆå§‹åŒ–æˆåŠŸã€‚ï¼ˆè¿™é‡Œçš„ç«¯å£å·å’Œé¡¹ç›®ä¸Šä¸‹æ–‡è·¯å¾„éƒ½æ˜¯åœ¨é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼‰<br><img src="https://fanzher.xyz/img/1722223132137-2c5c51ca-f4a6-43f5-97d2-060662b329d0.png" alt="image.png"></p><h1 id="åç«¯åŸºç¡€å¼€å‘-å¢åˆ æ”¹æŸ¥"><a href="#åç«¯åŸºç¡€å¼€å‘-å¢åˆ æ”¹æŸ¥" class="headerlink" title="åç«¯åŸºç¡€å¼€å‘-å¢åˆ æ”¹æŸ¥"></a>åç«¯åŸºç¡€å¼€å‘-å¢åˆ æ”¹æŸ¥</h1><h2 id="æ•°æ®è®¿é—®å±‚"><a href="#æ•°æ®è®¿é—®å±‚" class="headerlink" title="æ•°æ®è®¿é—®å±‚"></a>æ•°æ®è®¿é—®å±‚</h2><p>å¯¹äºæ•°æ®è®¿é—®å±‚å’ŒæœåŠ¡å±‚çš„åŸºç¡€ä»£ç ï¼Œå¯ä»¥é€šè¿‡IDEAä¸­çš„æ’ä»¶<strong>MybatisX</strong>æ¥è‡ªåŠ¨ç”Ÿæˆã€‚<br>å…·ä½“æ“ä½œæµç¨‹ï¼šé€‰ä¸­åˆ›å»ºå¥½çš„è¡¨-&gt;å³é”®é€‰æ‹©-MybatisX-Generator<br><img src="https://fanzher.xyz/img/1722224181802-d47c70f7-c731-4bc9-a638-5df30e6dc105.png" alt="image.png"><br>ä¹‹åç‚¹next<br><img src="https://fanzher.xyz/img/1722224247071-49b85e2e-7f5c-410c-92bd-1c3defbe6357.png" alt="image.png"><br>é€‰æ‹©ä»¥ä¸Šé€‰æ‹©çš„é€‰é¡¹åï¼Œä¸‹é¢ä¼šå‡ºç°ä¼šç”Ÿæˆå“ªäº›æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯mapperå±‚å’Œserviceå±‚åŸºç¡€ä»£ç ã€‚<br>ç”Ÿæˆä¹‹åéœ€è¦åšä¸¤ä¸ªä¿®æ”¹</p><ol><li>ä¸»é”®çš„ç”Ÿæˆç­–ç•¥@TableId(type &#x3D; IdType.ASSIGN_ID)</li><li>é€»è¾‘åˆ é™¤å­—æ®µéœ€è¦æ·»åŠ @TableLogic</li></ol><h2 id="ä¸šåŠ¡é€»è¾‘ä»£ç ç”Ÿæˆ"><a href="#ä¸šåŠ¡é€»è¾‘ä»£ç ç”Ÿæˆ" class="headerlink" title="ä¸šåŠ¡é€»è¾‘ä»£ç ç”Ÿæˆ"></a>ä¸šåŠ¡é€»è¾‘ä»£ç ç”Ÿæˆ</h2><p>è¿™é‡Œä½¿ç”¨ä¸‡èƒ½æ¨¡æ¿ä¸­çš„ä»£ç ç”Ÿæˆå™¨ï¼ˆCodeGeneratorï¼‰æ¥ç”Ÿæˆä»£ç ï¼ŒåŒ…æ‹¬ï¼šControllerã€Serviceæ¥å£å’Œå®ç°ç±»ã€æ•°æ®æ¨¡å‹åŒ…è£…ç±»å’Œæšä¸¾ç±»ï¼Œç›´æ¥è¿è¡ŒCodeGenerator.javaå³å¯<br><strong>æ³¨æ„ï¼šè¿è¡Œå‰éœ€è¦ä¿®æ”¹ç”Ÿæˆå‚æ•°ï¼šåŒ…æ‹¬åŒ…åã€æ•°æ®åç§°ã€æ•°æ®å°å†™å’Œå¤§å†™è‹±æ–‡åç§°</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.stufz.fandada.generate;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.io.FileUtil;</span><br><span class="line"><span class="keyword">import</span> freemarker.template.Configuration;</span><br><span class="line"><span class="keyword">import</span> freemarker.template.Template;</span><br><span class="line"><span class="keyword">import</span> freemarker.template.TemplateException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.io.FileWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.Writer;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä»£ç ç”Ÿæˆå™¨</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CodeGenerator</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”¨æ³•ï¼šä¿®æ”¹ç”Ÿæˆå‚æ•°å’Œç”Ÿæˆè·¯å¾„ï¼Œæ³¨é‡Šæ‰ä¸éœ€è¦çš„ç”Ÿæˆé€»è¾‘ï¼Œç„¶åè¿è¡Œå³å¯</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> TemplateException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> TemplateException, IOException &#123;</span><br><span class="line">        <span class="comment">// æŒ‡å®šç”Ÿæˆå‚æ•°</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">packageName</span> <span class="operator">=</span> <span class="string">&quot;com.stufz.fandada&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">dataName</span> <span class="operator">=</span> <span class="string">&quot;è¯„åˆ†ç»“æœ&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">dataKey</span> <span class="operator">=</span> <span class="string">&quot;scoringResult&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">upperDataKey</span> <span class="operator">=</span> <span class="string">&quot;ScoringResult&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å°è£…ç”Ÿæˆå‚æ•°</span></span><br><span class="line">        Map&lt;String, Object&gt; dataModel = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        dataModel.put(<span class="string">&quot;packageName&quot;</span>, packageName);</span><br><span class="line">        dataModel.put(<span class="string">&quot;dataName&quot;</span>, dataName);</span><br><span class="line">        dataModel.put(<span class="string">&quot;dataKey&quot;</span>, dataKey);</span><br><span class="line">        dataModel.put(<span class="string">&quot;upperDataKey&quot;</span>, upperDataKey);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç”Ÿæˆè·¯å¾„é»˜è®¤å€¼</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">projectPath</span> <span class="operator">=</span> System.getProperty(<span class="string">&quot;user.dir&quot;</span>);</span><br><span class="line">        <span class="comment">// å‚è€ƒè·¯å¾„ï¼Œå¯ä»¥è‡ªå·±è°ƒæ•´ä¸‹é¢çš„ outputPath</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">inputPath</span> <span class="operator">=</span> projectPath + File.separator + <span class="string">&quot;src/main/resources/templates/æ¨¡æ¿åç§°.java.ftl&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">outputPath</span> <span class="operator">=</span> String.format(<span class="string">&quot;%s/generator/åŒ…å/%sç±»åç¼€.java&quot;</span>, projectPath, upperDataKey);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1ã€ç”Ÿæˆ Controller</span></span><br><span class="line">        <span class="comment">// æŒ‡å®šç”Ÿæˆè·¯å¾„</span></span><br><span class="line">        inputPath = projectPath + File.separator + <span class="string">&quot;src/main/resources/templates/TemplateController.java.ftl&quot;</span>;</span><br><span class="line">        outputPath = String.format(<span class="string">&quot;%s/generator/controller/%sController.java&quot;</span>, projectPath, upperDataKey);</span><br><span class="line">        <span class="comment">// ç”Ÿæˆ</span></span><br><span class="line">        doGenerate(inputPath, outputPath, dataModel);</span><br><span class="line">        System.out.println(<span class="string">&quot;ç”Ÿæˆ Controller æˆåŠŸï¼Œæ–‡ä»¶è·¯å¾„ï¼š&quot;</span> + outputPath);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2ã€ç”Ÿæˆ Service æ¥å£å’Œå®ç°ç±»</span></span><br><span class="line">        <span class="comment">// ç”Ÿæˆ Service æ¥å£</span></span><br><span class="line">        inputPath = projectPath + File.separator + <span class="string">&quot;src/main/resources/templates/TemplateService.java.ftl&quot;</span>;</span><br><span class="line">        outputPath = String.format(<span class="string">&quot;%s/generator/service/%sService.java&quot;</span>, projectPath, upperDataKey);</span><br><span class="line">        doGenerate(inputPath, outputPath, dataModel);</span><br><span class="line">        System.out.println(<span class="string">&quot;ç”Ÿæˆ Service æ¥å£æˆåŠŸï¼Œæ–‡ä»¶è·¯å¾„ï¼š&quot;</span> + outputPath);</span><br><span class="line">        <span class="comment">// ç”Ÿæˆ Service å®ç°ç±»</span></span><br><span class="line">        inputPath = projectPath + File.separator + <span class="string">&quot;src/main/resources/templates/TemplateServiceImpl.java.ftl&quot;</span>;</span><br><span class="line">        outputPath = String.format(<span class="string">&quot;%s/generator/service/impl/%sServiceImpl.java&quot;</span>, projectPath, upperDataKey);</span><br><span class="line">        doGenerate(inputPath, outputPath, dataModel);</span><br><span class="line">        System.out.println(<span class="string">&quot;ç”Ÿæˆ Service å®ç°ç±»æˆåŠŸï¼Œæ–‡ä»¶è·¯å¾„ï¼š&quot;</span> + outputPath);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3ã€ç”Ÿæˆæ•°æ®æ¨¡å‹å°è£…ç±»ï¼ˆåŒ…æ‹¬ DTO å’Œ VOï¼‰</span></span><br><span class="line">        <span class="comment">// ç”Ÿæˆ DTO</span></span><br><span class="line">        inputPath = projectPath + File.separator + <span class="string">&quot;src/main/resources/templates/model/TemplateAddRequest.java.ftl&quot;</span>;</span><br><span class="line">        outputPath = String.format(<span class="string">&quot;%s/generator/model/dto/%sAddRequest.java&quot;</span>, projectPath, upperDataKey);</span><br><span class="line">        doGenerate(inputPath, outputPath, dataModel);</span><br><span class="line">        inputPath = projectPath + File.separator + <span class="string">&quot;src/main/resources/templates/model/TemplateQueryRequest.java.ftl&quot;</span>;</span><br><span class="line">        outputPath = String.format(<span class="string">&quot;%s/generator/model/dto/%sQueryRequest.java&quot;</span>, projectPath, upperDataKey);</span><br><span class="line">        doGenerate(inputPath, outputPath, dataModel);</span><br><span class="line">        inputPath = projectPath + File.separator + <span class="string">&quot;src/main/resources/templates/model/TemplateEditRequest.java.ftl&quot;</span>;</span><br><span class="line">        outputPath = String.format(<span class="string">&quot;%s/generator/model/dto/%sEditRequest.java&quot;</span>, projectPath, upperDataKey);</span><br><span class="line">        doGenerate(inputPath, outputPath, dataModel);</span><br><span class="line">        inputPath = projectPath + File.separator + <span class="string">&quot;src/main/resources/templates/model/TemplateUpdateRequest.java.ftl&quot;</span>;</span><br><span class="line">        outputPath = String.format(<span class="string">&quot;%s/generator/model/dto/%sUpdateRequest.java&quot;</span>, projectPath, upperDataKey);</span><br><span class="line">        doGenerate(inputPath, outputPath, dataModel);</span><br><span class="line">        System.out.println(<span class="string">&quot;ç”Ÿæˆ DTO æˆåŠŸï¼Œæ–‡ä»¶è·¯å¾„ï¼š&quot;</span> + outputPath);</span><br><span class="line">        <span class="comment">// ç”Ÿæˆ VO</span></span><br><span class="line">        inputPath = projectPath + File.separator + <span class="string">&quot;src/main/resources/templates/model/TemplateVO.java.ftl&quot;</span>;</span><br><span class="line">        outputPath = String.format(<span class="string">&quot;%s/generator/model/vo/%sVO.java&quot;</span>, projectPath, upperDataKey);</span><br><span class="line">        doGenerate(inputPath, outputPath, dataModel);</span><br><span class="line">        System.out.println(<span class="string">&quot;ç”Ÿæˆ VO æˆåŠŸï¼Œæ–‡ä»¶è·¯å¾„ï¼š&quot;</span> + outputPath);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”Ÿæˆæ–‡ä»¶</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> inputPath  æ¨¡æ¿æ–‡ä»¶è¾“å…¥è·¯å¾„</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> outputPath è¾“å‡ºè·¯å¾„</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> model      æ•°æ®æ¨¡å‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> TemplateException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">doGenerate</span><span class="params">(String inputPath, String outputPath, Object model)</span> <span class="keyword">throws</span> IOException, TemplateException &#123;</span><br><span class="line">        <span class="comment">// new å‡º Configuration å¯¹è±¡ï¼Œå‚æ•°ä¸º FreeMarker ç‰ˆæœ¬å·</span></span><br><span class="line">        <span class="type">Configuration</span> <span class="variable">configuration</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Configuration</span>(Configuration.VERSION_2_3_31);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æŒ‡å®šæ¨¡æ¿æ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">templateDir</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(inputPath).getParentFile();</span><br><span class="line">        configuration.setDirectoryForTemplateLoading(templateDir);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¾ç½®æ¨¡æ¿æ–‡ä»¶ä½¿ç”¨çš„å­—ç¬¦é›†</span></span><br><span class="line">        configuration.setDefaultEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ›å»ºæ¨¡æ¿å¯¹è±¡ï¼ŒåŠ è½½æŒ‡å®šæ¨¡æ¿</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">templateName</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(inputPath).getName();</span><br><span class="line">        <span class="type">Template</span> <span class="variable">template</span> <span class="operator">=</span> configuration.getTemplate(templateName);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºæ–‡ä»¶å’Œçˆ¶ç›®å½•</span></span><br><span class="line">        <span class="keyword">if</span> (!FileUtil.exist(outputPath)) &#123;</span><br><span class="line">            FileUtil.touch(outputPath);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç”Ÿæˆ</span></span><br><span class="line">        <span class="type">Writer</span> <span class="variable">out</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileWriter</span>(outputPath);</span><br><span class="line">        template.process(model, out);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç”Ÿæˆæ–‡ä»¶ååˆ«å¿˜äº†å…³é—­å“¦</span></span><br><span class="line">        out.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ç¼–å†™æ•°æ®æ¨¡å‹"><a href="#ç¼–å†™æ•°æ®æ¨¡å‹" class="headerlink" title="ç¼–å†™æ•°æ®æ¨¡å‹"></a>ç¼–å†™æ•°æ®æ¨¡å‹</h2><p>ç¼–å†™æ•°æ®æ¨¡å‹åŒ…è£…ç±»ï¼ŒåŒ…æ‹¬ï¼ˆDTOå’ŒVOï¼‰ï¼ŒJSONç»“æ„å¯¹åº”çš„ç±»ï¼Œæšä¸¾ç±»</p><ul><li><p>DTOä¸€èˆ¬ç”¨æ¥ä½œä¸ºæ•°æ®ä¼ è¾“å¯¹è±¡ï¼Œå¯ä»¥å»é™¤ä¸€äº›è„±æ•æ•°æ®ï¼Œåªä¿ç•™ä¸šåŠ¡æµç¨‹ä¸­éœ€è¦çš„æ•°æ®(æ¯”å¦‚ä¸šåŠ¡çš„å¢åˆ æ”¹æŸ¥ï¼šaddReuqest&#x2F;deleteRequest&#x2F;updateRequest&#x2F;queryRequest)</p></li><li><p>VOé€šå¸¸ç”¨æ¥å‰ç«¯é¡µé¢å±•ç¤ºæ‰€éœ€è¦çš„æ•°æ®(æ¯”å¦‚ï¼šUserVO&#x2F;QuestionVO)</p></li><li><p>JSONç»“æ„å¯¹åº”çš„ç±»ï¼ˆæ¯”å¦‚questionContentï¼‰éœ€è¦å®šä¹‰ä¸€ä¸ªç±»ä¸“é—¨å­˜æ”¾é¢˜ç›®å¯¹è±¡ï¼Œåœ¨ä¿å­˜åˆ°æ•°æ®åº“ä¸­æ—¶éœ€è¦å°†å¯¹è±¡è½¬æ¢ä¸ºjsonå­—ç¬¦ä¸²ï¼Œåœ¨è·å–æ•°æ®åº“ä¸­çš„é¢˜ç›®ä¿¡æ¯æ—¶ï¼Œä¹Ÿéœ€è¦å°†jsonå­—ç¬¦ä¸²è½¬åŒ–ä¸ºå¯¹è±¡æ–¹ä¾¿ä¸šåŠ¡å¤„ç†ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">å¸®æˆ‘æŠŠä¸‹åˆ— json ç»“æ„è½¬ä¸ºä½¿ç”¨ lombok çš„ java å¯¹è±¡ï¼š</span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;options&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;result&quot;</span><span class="punctuation">:</span> <span class="string">&quot;I&quot;</span><span class="punctuation">,</span> <span class="comment">// å¦‚æœæ˜¯æµ‹è¯„ç±»ï¼Œåˆ™ç”¨ reslut æ¥ä¿å­˜ç­”æ¡ˆå±æ€§</span></span><br><span class="line">      <span class="attr">&quot;score&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span>    <span class="comment">// å¦‚æœæ˜¯å¾—åˆ†ç±»ï¼Œåˆ™ç”¨ score æ¥è®¾ç½®æœ¬é¢˜åˆ†æ•°</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Aé€‰é¡¹&quot;</span><span class="punctuation">,</span> <span class="comment">//é€‰é¡¹å†…å®¹</span></span><br><span class="line">      <span class="attr">&quot;key&quot;</span><span class="punctuation">:</span> <span class="string">&quot;A&quot;</span>   <span class="comment">//é€‰é¡¹ key</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;result&quot;</span><span class="punctuation">:</span> <span class="string">&quot;E&quot;</span><span class="punctuation">,</span> <span class="comment">// å¦‚æœæ˜¯æµ‹è¯„ç±»ï¼Œåˆ™ç”¨ reslut æ¥ä¿å­˜ç­”æ¡ˆå±æ€§</span></span><br><span class="line">      <span class="attr">&quot;score&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Bé€‰é¡¹&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;key&quot;</span><span class="punctuation">:</span> <span class="string">&quot;B&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;é¢˜ç›®&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Builder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">QuestionContent</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Option&gt; options;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Data</span></span><br><span class="line">    <span class="meta">@NoArgsConstructor</span></span><br><span class="line">    <span class="meta">@AllArgsConstructor</span></span><br><span class="line">    <span class="meta">@Builder</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Option</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> String result;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> score;</span><br><span class="line">        <span class="keyword">private</span> String value;</span><br><span class="line">        <span class="keyword">private</span> String key;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>æšä¸¾ç±»ï¼š<strong>å®¡æ ¸çŠ¶æ€æšä¸¾ç±»</strong>&amp;<strong>è¯„åˆ†ç­–ç•¥æšä¸¾ç±»</strong>&amp;<strong>åº”ç”¨ç±»å‹æšä¸¾ç±»</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.stufz.fandada.model.enums;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.ObjectUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Collectors;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åº”ç”¨è¯„åˆ†ç­–ç•¥æšä¸¾</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">AppScoringStrategyEnum</span> &#123;</span><br><span class="line"></span><br><span class="line">    SCORE(<span class="string">&quot;è‡ªå®šä¹‰&quot;</span>, <span class="number">0</span>),</span><br><span class="line">    TEST(<span class="string">&quot;AI&quot;</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String text;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> value;</span><br><span class="line"></span><br><span class="line">    AppScoringStrategyEnum(String text, <span class="type">int</span> value) &#123;</span><br><span class="line">        <span class="built_in">this</span>.text = text;</span><br><span class="line">        <span class="built_in">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–å€¼åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;Integer&gt; <span class="title function_">getValues</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Arrays.stream(values()).map(item -&gt; item.value).collect(Collectors.toList());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® value è·å–æšä¸¾</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> AppScoringStrategyEnum <span class="title function_">getEnumByValue</span><span class="params">(Integer value)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (ObjectUtils.isEmpty(value)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (AppScoringStrategyEnum anEnum : AppScoringStrategyEnum.values()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (anEnum.value==value) &#123;</span><br><span class="line">                <span class="keyword">return</span> anEnum;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getValue</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getText</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> text;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.stufz.fandada.model.enums;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.models.auth.In;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.ObjectUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Collectors;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åº”ç”¨ç±»å‹æšä¸¾</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">AppTypeEnum</span> &#123;</span><br><span class="line"></span><br><span class="line">    SCORE(<span class="string">&quot;å¾—åˆ†ç±»&quot;</span>, <span class="number">0</span>),</span><br><span class="line">    TEST(<span class="string">&quot;æµ‹è¯•ç±»&quot;</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String text;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> value;</span><br><span class="line"></span><br><span class="line">    AppTypeEnum(String text, <span class="type">int</span> value) &#123;</span><br><span class="line">        <span class="built_in">this</span>.text = text;</span><br><span class="line">        <span class="built_in">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–å€¼åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;Integer&gt; <span class="title function_">getValues</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Arrays.stream(values()).map(item -&gt; item.value).collect(Collectors.toList());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® value è·å–æšä¸¾</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> AppTypeEnum <span class="title function_">getEnumByValue</span><span class="params">(Integer value)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (ObjectUtils.isEmpty(value)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (AppTypeEnum anEnum : AppTypeEnum.values()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (anEnum.value==value) &#123;</span><br><span class="line">                <span class="keyword">return</span> anEnum;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getValue</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getText</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> text;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.stufz.fandada.model.enums;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.util.ObjectUtil;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Collectors;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®¡æ ¸çŠ¶æ€æšä¸¾</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">ReviewStatusEnum</span> &#123;</span><br><span class="line"></span><br><span class="line">    REVIEWING(<span class="string">&quot;å¾…å®¡æ ¸&quot;</span>, <span class="number">0</span>),</span><br><span class="line">    PASS(<span class="string">&quot;é€šè¿‡&quot;</span>, <span class="number">1</span>),</span><br><span class="line">    REJECT(<span class="string">&quot;æ‹’ç»&quot;</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String text;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> value;</span><br><span class="line"></span><br><span class="line">    ReviewStatusEnum(String text, <span class="type">int</span> value) &#123;</span><br><span class="line">        <span class="built_in">this</span>.text = text;</span><br><span class="line">        <span class="built_in">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® value è·å–æšä¸¾</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ReviewStatusEnum <span class="title function_">getEnumByValue</span><span class="params">(Integer value)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (ObjectUtil.isEmpty(value)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (ReviewStatusEnum anEnum : ReviewStatusEnum.values()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (anEnum.value == value) &#123;</span><br><span class="line">                <span class="keyword">return</span> anEnum;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–å€¼åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;Integer&gt; <span class="title function_">getValues</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Arrays.stream(values()).map(item -&gt; item.value).collect(Collectors.toList());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getValue</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getText</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> text;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h2 id="æ¥å£å¼€å‘"><a href="#æ¥å£å¼€å‘" class="headerlink" title="æ¥å£å¼€å‘"></a>æ¥å£å¼€å‘</h2><p>Controllerå±‚</p><h2 id="æœåŠ¡å±‚å¼€å‘"><a href="#æœåŠ¡å±‚å¼€å‘" class="headerlink" title="æœåŠ¡å±‚å¼€å‘"></a>æœåŠ¡å±‚å¼€å‘</h2><p>ç¼–å†™Serviceæ¥å£å’Œå®ç°ç±»ï¼Œå®Œå–„ä¸šåŠ¡é€»è¾‘ï¼Œæ¯”å¦‚æ•°æ®æ ¡éªŒç­‰ã€‚</p><h1 id="åç«¯æ ¸å¿ƒä¸šåŠ¡æµç¨‹å¼€å‘"><a href="#åç«¯æ ¸å¿ƒä¸šåŠ¡æµç¨‹å¼€å‘" class="headerlink" title="åç«¯æ ¸å¿ƒä¸šåŠ¡æµç¨‹å¼€å‘"></a>åç«¯æ ¸å¿ƒä¸šåŠ¡æµç¨‹å¼€å‘</h1><p>æ ¸å¿ƒä¸šåŠ¡æµç¨‹:</p><ol><li>ç”¨æˆ·æ³¨å†Œ&#x3D;&gt;ç”¨æˆ·ç™»å½•</li><li>ç”¨æˆ·åˆ›å»ºåº”ç”¨&#x3D;&gt;åˆ›å»ºé¢˜ç›®å’Œé€‰é¡¹ï¼ˆåŒ…æ‹¬é€‰é¡¹å¾—åˆ†ï¼‰&#x3D;&gt;åˆ›å»ºè¯„åˆ†è§„åˆ™ï¼ˆè¯„åˆ†æ–¹å¼å’Œè¯„åˆ†ç»“æœï¼‰</li><li>ç®¡ç†å‘˜å®¡æ ¸åº”ç”¨ï¼Œå‘å¸ƒæˆ–ä¸‹æ¶</li><li>ç”¨æˆ·æŸ¥çœ‹æˆ–æ£€ç´¢åº”ç”¨åˆ—è¡¨ï¼Œè¿›å…¥åº”ç”¨è¯¦æƒ…é¡µï¼Œå¼€å§‹ç­”é¢˜ï¼Œå¹¶æäº¤ç­”æ¡ˆ</li><li>ç»è¿‡è¯„åˆ†æ¨¡å—è¯„åˆ†åï¼Œç”¨æˆ·å¾—åˆ°è¯„åˆ†ç»“æœ</li></ol><p>éœ€è¦é¢å¤–å¼€å‘çš„åŠŸèƒ½</p><ul><li>åº”ç”¨æ¨¡å—ï¼šå®¡æ ¸åº”ç”¨ï¼Œå‘å¸ƒæˆ–ä¸‹æ¶</li><li>è¯„åˆ†æ¨¡å—ï¼šæ ¹æ®å›ç­”è®¡ç®—è¯„åˆ†ç»“æœï¼ˆå¤šç§è¯„åˆ†ç­–ç•¥ï¼‰<ul><li>è‡ªå®šä¹‰è§„åˆ™è¯„åˆ†-æ‰“åˆ†ç±»åº”ç”¨</li><li>è‡ªå®šä¹‰è§„åˆ™è¯„åˆ†-æµ‹è¯„ç±»åº”ç”¨</li></ul></li><li>å›ç­”æ¨¡å—ï¼šæäº¤å›ç­”åå°±å¯ä»¥è°ƒç”¨è¯„åˆ†æ¨¡å—æ¥æ›´æ–°å›ç­”è¡¨</li></ul><h2 id="åº”ç”¨æ¨¡å—-å®¡æ ¸åŠŸèƒ½"><a href="#åº”ç”¨æ¨¡å—-å®¡æ ¸åŠŸèƒ½" class="headerlink" title="åº”ç”¨æ¨¡å—-å®¡æ ¸åŠŸèƒ½"></a>åº”ç”¨æ¨¡å—-å®¡æ ¸åŠŸèƒ½</h2><p>é¦–å…ˆéœ€è¦è®¾è®¡ä¸€ä¸ªå®¡æ ¸çš„è¯·æ±‚ç±»<code>ReviewRequest</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.stufz.fandada.common;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.models.auth.In;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®¡æ ¸çŠ¶æ€è¯·æ±‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReviewRequest</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åº”ç”¨id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å®¡æ ¸çŠ¶æ€ï¼š0-å¾…å®¡æ ¸  1-é€šè¿‡  2-æ‹’ç»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Integer reviewStatus;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å®¡æ ¸ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String reviewMessage;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¹‹åéœ€è¦è®¾è®¡ä¸€ä¸ªæ¥å£ï¼Œæ¥å¤„ç†å®¡æ ¸è¯·æ±‚<br>å®¡æ ¸æµç¨‹å›¾<br><img src="https://fanzher.xyz/img/1722235193517-c4d64337-bd58-4e0b-89fa-1002bd13718b.jpeg"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åº”ç”¨å®¡æ ¸</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> reviewRequest</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/review&quot;)</span></span><br><span class="line">    <span class="meta">@AuthCheck(mustRole = UserConstant.ADMIN_ROLE)</span></span><br><span class="line">    <span class="keyword">public</span> BaseResponse&lt;Boolean&gt; <span class="title function_">doAppReview</span><span class="params">(<span class="meta">@RequestBody</span> ReviewRequest reviewRequest, HttpServletRequest request)</span> &#123;</span><br><span class="line">        ThrowUtils.throwIf(reviewRequest == <span class="literal">null</span>, ErrorCode.PARAMS_ERROR);</span><br><span class="line">        <span class="type">Long</span> <span class="variable">id</span> <span class="operator">=</span> reviewRequest.getId();</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">reviewStatus</span> <span class="operator">=</span> reviewRequest.getReviewStatus();</span><br><span class="line">        <span class="comment">// æ ¡éªŒ</span></span><br><span class="line">        <span class="type">ReviewStatusEnum</span> <span class="variable">reviewStatusEnum</span> <span class="operator">=</span> ReviewStatusEnum.getEnumByValue(reviewStatus);</span><br><span class="line">        <span class="keyword">if</span> (id == <span class="literal">null</span> || reviewStatusEnum == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BusinessException</span>(ErrorCode.PARAMS_ERROR);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// åˆ¤æ–­æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">        <span class="type">App</span> <span class="variable">oldApp</span> <span class="operator">=</span> appService.getById(id);</span><br><span class="line">        ThrowUtils.throwIf(oldApp == <span class="literal">null</span>, ErrorCode.NOT_FOUND_ERROR);</span><br><span class="line">        <span class="comment">// å·²æ˜¯è¯¥çŠ¶æ€</span></span><br><span class="line">        <span class="keyword">if</span> (oldApp.getReviewStatus().equals(reviewStatus)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BusinessException</span>(ErrorCode.PARAMS_ERROR, <span class="string">&quot;è¯·å‹¿é‡å¤å®¡æ ¸&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ›´æ–°å®¡æ ¸çŠ¶æ€</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">loginUser</span> <span class="operator">=</span> userService.getLoginUser(request);</span><br><span class="line">        <span class="type">App</span> <span class="variable">app</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">App</span>();</span><br><span class="line">        app.setId(id);</span><br><span class="line">        app.setReviewStatus(reviewStatus);</span><br><span class="line">        app.setReviewMessage(reviewRequest.getReviewMessage());</span><br><span class="line">        app.setReviewerId(loginUser.getId());</span><br><span class="line">        app.setReviewTime(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">result</span> <span class="operator">=</span> appService.updateById(app);</span><br><span class="line">        ThrowUtils.throwIf(!result, ErrorCode.OPERATION_ERROR);</span><br><span class="line">        <span class="keyword">return</span> ResultUtils.success(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="è¯„åˆ†æ¨¡å—å®ç°"><a href="#è¯„åˆ†æ¨¡å—å®ç°" class="headerlink" title="è¯„åˆ†æ¨¡å—å®ç°"></a>è¯„åˆ†æ¨¡å—å®ç°</h2><p>éœ€æ±‚ï¼šå¯¹äºä¸åŒçš„åº”ç”¨ç±»å‹ä»¥åŠä¸åŒçš„è¯„åˆ†ç­–ç•¥ï¼Œå®ç°ä¸åŒçš„é€»è¾‘<br>æ ¸å¿ƒå®ç°æ–¹å¼ï¼šç­–ç•¥æ¨¡å¼ï¼ˆTODO æ·»åŠ ç­–ç•¥æ¨¡å¼è¯¦è§£ï¼‰<br>ç®€å•æ¥è¯´ï¼Œç­–ç•¥æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œå®ƒå®šä¹‰äº†ä¸€ç³»åˆ—ç®—æ³•ï¼Œå¹¶å°†æ¯ä¸ªç®—æ³•å°è£…åˆ°ç‹¬ç«‹çš„ç±»ä¸­ï¼Œä½¿å¾—å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ã€‚</p><h3 id="ç­–ç•¥æ¥å£çš„å®šä¹‰"><a href="#ç­–ç•¥æ¥å£çš„å®šä¹‰" class="headerlink" title="ç­–ç•¥æ¥å£çš„å®šä¹‰"></a><strong>ç­–ç•¥æ¥å£çš„å®šä¹‰</strong></h3><p><strong>å‚æ•°ï¼š</strong>åº”ç”¨ã€ç”¨æˆ·çš„é€‰æ‹©åˆ—è¡¨ï¼ˆå¯ä»¥é€šè¿‡åº”ç”¨è·å–åˆ°é¢˜ç›®ã€æµ‹è¯„ç»“æœï¼‰<br><strong>è¿”å›å€¼ï¼š</strong>ç”¨æˆ·ç­”æ¡ˆ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.stufz.fandada.scoring;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.stufz.fandada.model.entity.App;</span><br><span class="line"><span class="keyword">import</span> com.stufz.fandada.model.entity.UserAnswer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¾—åˆ†ç­–ç•¥---ä½¿ç”¨ç­–ç•¥æ¨¡å¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ScoringStrategy</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰§è¡Œè¯„åˆ†</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> choices åšé¢˜æ—¶çš„é€‰æ‹©</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> app é¢˜ç›®æ‰€å±çš„åº”ç”¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ ¹æ®å¾—åˆ†ç­–ç•¥è¿”å›ç”¨æˆ·ç­”æ¡ˆ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    UserAnswer <span class="title function_">doScore</span><span class="params">(List&lt;String&gt; choices, App app)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ä¸¤ç§ç­–ç•¥çš„å®ç°"><a href="#ä¸¤ç§ç­–ç•¥çš„å®ç°" class="headerlink" title="ä¸¤ç§ç­–ç•¥çš„å®ç°"></a>ä¸¤ç§ç­–ç•¥çš„å®ç°</h3><ol><li><p>è‡ªå®šä¹‰æµ‹è¯„ç±»åº”ç”¨å¾—åˆ†ç­–ç•¥</p><ol><li>æ ¹æ®idè·å–åˆ°é¢˜ç›®å’Œé¢˜ç›®ç»“æœä¿¡æ¯</li><li>ç»Ÿè®¡ç”¨æˆ·çš„æ¯ä¸ªé€‰æ‹©å¯¹åº”çš„å±æ€§ä¸ªæ•°ï¼Œæ¯”å¦‚ï¼šæœ‰15é“é¢˜ï¼Œé€‰æ‹©çš„ç»“æœä¸­I&#x3D;10ä¸ªï¼ŒE&#x3D;5ä¸ª</li><li>éå†æ¯ä¸€ç§é¢˜ç›®ç»“æœï¼Œè®¡ç®—å“ªä¸ªç»“æœçš„å¾—åˆ†æ›´é«˜</li><li>æ„é€ è¿”å›å€¼ï¼Œå¡«å……ç­”æ¡ˆå¯¹è±¡çš„å±æ€§<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ScoringStrategyConfig(appType = 1,scoringStrategy = 0)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomTestScoringStrategy</span> <span class="keyword">implements</span> <span class="title class_">ScoringStrategy</span>&#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> QuestionService questionService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> ScoringResultService scoringResultService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> UserAnswer <span class="title function_">doScore</span><span class="params">(List&lt;String&gt; choices, App app)</span> &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">appId</span> <span class="operator">=</span> app.getId();</span><br><span class="line">        <span class="comment">// 1. æ ¹æ® id æŸ¥è¯¢åˆ°é¢˜ç›®å’Œé¢˜ç›®ç»“æœä¿¡æ¯</span></span><br><span class="line">        <span class="type">Question</span> <span class="variable">question</span> <span class="operator">=</span> questionService.getOne(</span><br><span class="line">                Wrappers.lambdaQuery(Question.class).eq(Question::getAppId, appId)</span><br><span class="line">        );</span><br><span class="line">        List&lt;ScoringResult&gt; scoringResultList = scoringResultService.list(</span><br><span class="line">                Wrappers.lambdaQuery(ScoringResult.class)</span><br><span class="line">                        .eq(ScoringResult::getAppId, appId)</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. ç»Ÿè®¡ç”¨æˆ·æ¯ä¸ªé€‰æ‹©å¯¹åº”çš„å±æ€§ä¸ªæ•°ï¼Œå¦‚ I = 10 ä¸ªï¼ŒE = 5 ä¸ª</span></span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–ä¸€ä¸ªMapï¼Œç”¨äºå­˜å‚¨æ¯ä¸ªé€‰é¡¹çš„è®¡æ•°</span></span><br><span class="line">        Map&lt;String, Integer&gt; optionCount = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="type">QuestionVO</span> <span class="variable">questionVO</span> <span class="operator">=</span> QuestionVO.objToVo(question);</span><br><span class="line">        List&lt;QuestionContentDTO&gt; questionContent = questionVO.getQuestionContent();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// éå†é¢˜ç›®åˆ—è¡¨</span></span><br><span class="line">        <span class="keyword">for</span> (QuestionContentDTO questionContentDTO : questionContent) &#123;</span><br><span class="line">            <span class="comment">// éå†ç­”æ¡ˆåˆ—è¡¨</span></span><br><span class="line">            <span class="keyword">for</span> (String answer : choices) &#123;</span><br><span class="line">                <span class="comment">// éå†é¢˜ç›®ä¸­çš„é€‰é¡¹</span></span><br><span class="line">                <span class="keyword">for</span> (QuestionContentDTO.Option option : questionContentDTO.getOptions()) &#123;</span><br><span class="line">                    <span class="comment">// å¦‚æœç­”æ¡ˆå’Œé€‰é¡¹çš„keyåŒ¹é…</span></span><br><span class="line">                    <span class="keyword">if</span> (option.getKey().equals(answer)) &#123;</span><br><span class="line">                        <span class="comment">// è·å–é€‰é¡¹çš„resultå±æ€§</span></span><br><span class="line">                        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> option.getResult();</span><br><span class="line"></span><br><span class="line">                        <span class="comment">// å¦‚æœresultå±æ€§ä¸åœ¨optionCountä¸­ï¼Œåˆå§‹åŒ–ä¸º0</span></span><br><span class="line">                        <span class="keyword">if</span> (!optionCount.containsKey(result)) &#123;</span><br><span class="line">                            optionCount.put(result, <span class="number">0</span>);</span><br><span class="line">                        &#125;</span><br><span class="line"></span><br><span class="line">                        <span class="comment">// åœ¨optionCountä¸­å¢åŠ è®¡æ•°</span></span><br><span class="line">                        optionCount.put(result, optionCount.get(result) + <span class="number">1</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. éå†æ¯ç§è¯„åˆ†ç»“æœï¼Œè®¡ç®—å“ªä¸ªç»“æœçš„å¾—åˆ†æ›´é«˜</span></span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–æœ€é«˜åˆ†æ•°å’Œæœ€é«˜åˆ†æ•°å¯¹åº”çš„è¯„åˆ†ç»“æœ</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">maxScore</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">ScoringResult</span> <span class="variable">maxScoringResult</span> <span class="operator">=</span> scoringResultList.get(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// éå†è¯„åˆ†ç»“æœåˆ—è¡¨</span></span><br><span class="line">        <span class="keyword">for</span> (ScoringResult scoringResult : scoringResultList) &#123;</span><br><span class="line">            List&lt;String&gt; resultProp = JSONUtil.toList(scoringResult.getResultProp(), String.class);</span><br><span class="line">            <span class="comment">// è®¡ç®—å½“å‰è¯„åˆ†ç»“æœçš„åˆ†æ•°ï¼Œ[I, E] =&gt; [10, 5] =&gt; 15</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">score</span> <span class="operator">=</span> resultProp.stream()</span><br><span class="line">                    .mapToInt(prop -&gt; optionCount.getOrDefault(prop, <span class="number">0</span>))</span><br><span class="line">                    .sum();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å¦‚æœåˆ†æ•°é«˜äºå½“å‰æœ€é«˜åˆ†æ•°ï¼Œæ›´æ–°æœ€é«˜åˆ†æ•°å’Œæœ€é«˜åˆ†æ•°å¯¹åº”çš„è¯„åˆ†ç»“æœ</span></span><br><span class="line">            <span class="keyword">if</span> (score &gt; maxScore) &#123;</span><br><span class="line">                maxScore = score;</span><br><span class="line">                maxScoringResult = scoringResult;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4. æ„é€ è¿”å›å€¼ï¼Œå¡«å……ç­”æ¡ˆå¯¹è±¡çš„å±æ€§</span></span><br><span class="line">        <span class="type">UserAnswer</span> <span class="variable">userAnswer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserAnswer</span>();</span><br><span class="line">        userAnswer.setAppId(appId);</span><br><span class="line">        userAnswer.setAppType(app.getAppType());</span><br><span class="line">        userAnswer.setScoringStrategy(app.getScoringStrategy());</span><br><span class="line">        userAnswer.setChoices(JSONUtil.toJsonStr(choices));</span><br><span class="line">        userAnswer.setResultId(maxScoringResult.getId());</span><br><span class="line">        userAnswer.setResultName(maxScoringResult.getResultName());</span><br><span class="line">        userAnswer.setResultDesc(maxScoringResult.getResultDesc());</span><br><span class="line">        userAnswer.setResultPicture(maxScoringResult.getResultPicture());</span><br><span class="line">        <span class="keyword">return</span> userAnswer;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ol></li><li><p>è‡ªå®šä¹‰å¾—åˆ†ç±»åº”ç”¨è¯„åˆ†ç­–ç•¥</p><ol><li>æ ¹æ®idæŸ¥è¯¢åˆ°é¢˜ç›®å’Œé¢˜ç›®ç»“æœä¿¡æ¯ï¼ˆæŒ‰åˆ†æ•°é™åºæ’åºï¼‰</li><li>ç»Ÿè®¡ç”¨æˆ·çš„æ€»å¾—åˆ†</li><li>éå†å¾—åˆ†ç»“æœï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªç”¨æˆ·åˆ†æ•°å¤§äºå¾—åˆ†èŒƒå›´çš„ç»“æœï¼Œä½œä¸ºæœ€ç»ˆç»“æœ</li><li>æ„é€ è¿”å›å€¼ï¼Œå¡«å……ç­”æ¡ˆå¯¹è±¡çš„å±æ€§<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ScoringStrategyConfig(appType = 0,scoringStrategy = 0)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomScoreScoringStrategy</span> <span class="keyword">implements</span> <span class="title class_">ScoringStrategy</span>&#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> QuestionService questionService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> ScoringResultService scoringResultService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> UserAnswer <span class="title function_">doScore</span><span class="params">(List&lt;String&gt; choices, App app)</span>  &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">appId</span> <span class="operator">=</span> app.getId();</span><br><span class="line">        <span class="comment">// 1. æ ¹æ® id æŸ¥è¯¢åˆ°é¢˜ç›®å’Œé¢˜ç›®ç»“æœä¿¡æ¯ï¼ˆæŒ‰åˆ†æ•°é™åºæ’åºï¼‰</span></span><br><span class="line">        <span class="type">Question</span> <span class="variable">question</span> <span class="operator">=</span> questionService.getOne(</span><br><span class="line">                Wrappers.lambdaQuery(Question.class).eq(Question::getAppId, appId)</span><br><span class="line">        );</span><br><span class="line">        List&lt;ScoringResult&gt; scoringResultList = scoringResultService.list(</span><br><span class="line">                Wrappers.lambdaQuery(ScoringResult.class)</span><br><span class="line">                        .eq(ScoringResult::getAppId, appId)</span><br><span class="line">                        .orderByDesc(ScoringResult::getResultScoreRange)</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. ç»Ÿè®¡ç”¨æˆ·çš„æ€»å¾—åˆ†</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">totalScore</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">QuestionVO</span> <span class="variable">questionVO</span> <span class="operator">=</span> QuestionVO.objToVo(question);</span><br><span class="line">        List&lt;QuestionContentDTO&gt; questionContent = questionVO.getQuestionContent();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// éå†é¢˜ç›®åˆ—è¡¨</span></span><br><span class="line">        <span class="keyword">for</span> (QuestionContentDTO questionContentDTO : questionContent) &#123;</span><br><span class="line">            <span class="comment">// éå†ç­”æ¡ˆåˆ—è¡¨</span></span><br><span class="line">            <span class="keyword">for</span> (String answer : choices) &#123;</span><br><span class="line">                <span class="comment">// éå†é¢˜ç›®ä¸­çš„é€‰é¡¹</span></span><br><span class="line">                <span class="keyword">for</span> (QuestionContentDTO.Option option : questionContentDTO.getOptions()) &#123;</span><br><span class="line">                    <span class="comment">// å¦‚æœç­”æ¡ˆå’Œé€‰é¡¹çš„keyåŒ¹é…</span></span><br><span class="line">                    <span class="keyword">if</span> (option.getKey().equals(answer)) &#123;</span><br><span class="line">                        <span class="type">int</span> <span class="variable">score</span> <span class="operator">=</span> Optional.of(option.getScore()).orElse(<span class="number">0</span>);</span><br><span class="line">                        totalScore += score;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. éå†å¾—åˆ†ç»“æœï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªç”¨æˆ·åˆ†æ•°å¤§äºå¾—åˆ†èŒƒå›´çš„ç»“æœï¼Œä½œä¸ºæœ€ç»ˆç»“æœ</span></span><br><span class="line">        <span class="type">ScoringResult</span> <span class="variable">maxScoringResult</span> <span class="operator">=</span> scoringResultList.get(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">for</span> (ScoringResult scoringResult : scoringResultList) &#123;</span><br><span class="line">            <span class="keyword">if</span> (totalScore &gt;= scoringResult.getResultScoreRange()) &#123;</span><br><span class="line">                maxScoringResult = scoringResult;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4. æ„é€ è¿”å›å€¼ï¼Œå¡«å……ç­”æ¡ˆå¯¹è±¡çš„å±æ€§</span></span><br><span class="line">        <span class="type">UserAnswer</span> <span class="variable">userAnswer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserAnswer</span>();</span><br><span class="line">        userAnswer.setAppId(appId);</span><br><span class="line">        userAnswer.setAppType(app.getAppType());</span><br><span class="line">        userAnswer.setScoringStrategy(app.getScoringStrategy());</span><br><span class="line">        userAnswer.setChoices(JSONUtil.toJsonStr(choices));</span><br><span class="line">        userAnswer.setResultId(maxScoringResult.getId());</span><br><span class="line">        userAnswer.setResultName(maxScoringResult.getResultName());</span><br><span class="line">        userAnswer.setResultDesc(maxScoringResult.getResultDesc());</span><br><span class="line">        userAnswer.setResultPicture(maxScoringResult.getResultPicture());</span><br><span class="line">        userAnswer.setResultScore(totalScore);</span><br><span class="line">        <span class="keyword">return</span> userAnswer;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ol></li></ol><h3 id="å…¨å±€æ‰§è¡Œå™¨"><a href="#å…¨å±€æ‰§è¡Œå™¨" class="headerlink" title="å…¨å±€æ‰§è¡Œå™¨"></a>å…¨å±€æ‰§è¡Œå™¨</h3><p>å¯¹äºä¸åŒçš„åº”ç”¨å’Œè¯„åˆ†ç­–ç•¥ï¼Œå¯ä»¥å®šåˆ¶ä¸€ä¸ª<strong>å…¨å±€æ‰§è¡Œå™¨ï¼Œ</strong>æ¥ç®€åŒ–è°ƒç”¨ã€‚<br>å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªæ³¨è§£ï¼ŒåŒ…å«åº”ç”¨ç±»å‹å’Œè¯„åˆ†ç­–ç•¥ï¼Œä¹‹ååœ¨å…·ä½“çš„è¯„åˆ†ç­–ç•¥å®ç°ç±»ä¸­å¯ä»¥é€šè¿‡é…ç½®ä¸åŒçš„æ³¨è§£æ¥è°ƒç”¨ä¸åŒçš„è¯„åˆ†ç­–ç•¥ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.stufz.fandada.scoring;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.ElementType;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Retention;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.RetentionPolicy;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Target;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Target(ElementType.TYPE)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> ScoringStrategyConfig &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åº”ç”¨ç±»å‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">appType</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¯„åˆ†ç­–ç•¥</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">scoringStrategy</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡åŠ å¦‚ä¸‹æ³¨è§£ï¼Œæ¥æ ‡è¯†ä¸åŒçš„åº”ç”¨ç±»å‹å’Œè¯„åˆ†ç­–ç•¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ScoringStrategyConfig(appType = 0,scoringStrategy = 0)</span></span><br><span class="line"><span class="meta">@ScoringStrategyConfig(appType = 1,scoringStrategy = 0)</span></span><br></pre></td></tr></table></figure><p>ä¹‹ååªéœ€è¦å®šä¹‰ä¸€ä¸ªå…¨å±€çš„æ‰§è¡Œå™¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.stufz.fandada.scoring;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.stufz.fandada.common.ErrorCode;</span><br><span class="line"><span class="keyword">import</span> com.stufz.fandada.exception.BusinessException;</span><br><span class="line"><span class="keyword">import</span> com.stufz.fandada.model.entity.App;</span><br><span class="line"><span class="keyword">import</span> com.stufz.fandada.model.entity.UserAnswer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¯„åˆ†ç­–ç•¥æ‰§è¡Œå™¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ScoringStrategyExecutor</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç­–ç•¥åˆ—è¡¨</span></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;ScoringStrategy&gt; scoringStrategyList;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¯„åˆ†</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> choiceList</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> app</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> UserAnswer <span class="title function_">doScore</span><span class="params">(List&lt;String&gt; choiceList, App app)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">appType</span> <span class="operator">=</span> app.getAppType();</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">appScoringStrategy</span> <span class="operator">=</span> app.getScoringStrategy();</span><br><span class="line">        <span class="keyword">if</span> (appType == <span class="literal">null</span> || appScoringStrategy == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BusinessException</span>(ErrorCode.SYSTEM_ERROR, <span class="string">&quot;åº”ç”¨é…ç½®æœ‰è¯¯ï¼Œæœªæ‰¾åˆ°åŒ¹é…çš„ç­–ç•¥&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ ¹æ®æ³¨è§£è·å–ç­–ç•¥</span></span><br><span class="line">        <span class="keyword">for</span> (ScoringStrategy strategy : scoringStrategyList) &#123;</span><br><span class="line">            <span class="keyword">if</span> (strategy.getClass().isAnnotationPresent(ScoringStrategyConfig.class)) &#123;</span><br><span class="line">                <span class="type">ScoringStrategyConfig</span> <span class="variable">scoringStrategyConfig</span> <span class="operator">=</span> strategy.getClass().getAnnotation(ScoringStrategyConfig.class);</span><br><span class="line">                <span class="keyword">if</span> (scoringStrategyConfig.appType() == appType &amp;&amp; scoringStrategyConfig.scoringStrategy() == appScoringStrategy) &#123;</span><br><span class="line">                    <span class="keyword">return</span> strategy.doScore(choiceList, app);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BusinessException</span>(ErrorCode.SYSTEM_ERROR, <span class="string">&quot;åº”ç”¨é…ç½®æœ‰è¯¯ï¼Œæœªæ‰¾åˆ°åŒ¹é…çš„ç­–ç•¥&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œæœ‰å‡ ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹</p><ol><li>å°†è‡ªå®šä¹‰çš„æ³¨è§£ä½¿ç”¨@Componentæ³¨è§£æ¥æ³¨é‡Šï¼Œå³æŠŠè¯¥æ³¨è§£äº¤ç»™iocå®¹å™¨æ¥ç®¡ç†ï¼Œé‚£ä¹ˆä½¿ç”¨è¯¥æ³¨è§£çš„ç­–ç•¥å®ç°ç±»ä¹Ÿå¯ä»¥è¢«äº¤ç»™IOCå®¹å™¨æ¥ç®¡ç†ï¼Œæ‰€ä»¥åœ¨å…¨å±€æ‰§è¡Œå™¨<code>ScoringStrategyExecutor</code>ä¸­å¯ä»¥ç›´æ¥æ³¨å…¥</li><li>é€šè¿‡æ³¨è§£æ¥è·å–ç­–ç•¥ï¼Œä¹‹åå°†ç­–ç•¥å’Œåº”ç”¨çš„ç±»å‹ä»¥åŠè¯„åˆ†ç­–ç•¥è¿›è¡Œæ¯”è¾ƒï¼Œæ‰¾åˆ°åŒ¹é…çš„ç­–ç•¥è¿›è¡Œæ‰§è¡Œï¼Œè¿™é‡Œç”¨åˆ°äº†ä¸¤ä¸ªæ³¨è§£çš„æ–¹æ³•ï¼ŒisAnnotationPresent(xxx.class)ç”¨æ¥åˆ¤æ–­æ˜¯å¦å­˜åœ¨è¿™æ ·xxxç±»å‹çš„æ³¨è§£ï¼ŒgetAnnotation(xxx.class)ç”¨æ¥è·å–è¯¥æ³¨è§£ã€‚</li></ol></blockquote><h3 id="å›ç­”æ¨¡å—-1"><a href="#å›ç­”æ¨¡å—-1" class="headerlink" title="å›ç­”æ¨¡å—"></a>å›ç­”æ¨¡å—</h3><p>å›ç­”æ¨¡å—å°±å¯ä»¥è°ƒç”¨è¯„åˆ†æ¨¡å—æ¥æ›´æ–°å›ç­”è¡¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºç”¨æˆ·ç­”æ¡ˆ</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> userAnswerAddRequest</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/add&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> BaseResponse&lt;Long&gt; <span class="title function_">addUserAnswer</span><span class="params">(<span class="meta">@RequestBody</span> UserAnswerAddRequest userAnswerAddRequest, HttpServletRequest request)</span>  &#123;</span><br><span class="line">        ThrowUtils.throwIf(userAnswerAddRequest == <span class="literal">null</span>, ErrorCode.PARAMS_ERROR);</span><br><span class="line">        <span class="comment">// åœ¨æ­¤å¤„å°†å®ä½“ç±»å’Œ DTO è¿›è¡Œè½¬æ¢</span></span><br><span class="line">        <span class="type">UserAnswer</span> <span class="variable">userAnswer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserAnswer</span>();</span><br><span class="line">        BeanUtils.copyProperties(userAnswerAddRequest, userAnswer);</span><br><span class="line">        List&lt;String&gt; choices = userAnswerAddRequest.getChoices();</span><br><span class="line">        userAnswer.setChoices(JSONUtil.toJsonStr(choices));</span><br><span class="line">        <span class="comment">// æ•°æ®æ ¡éªŒ</span></span><br><span class="line">        userAnswerService.validUserAnswer(userAnswer, <span class="literal">true</span>);</span><br><span class="line">        <span class="comment">// åˆ¤æ–­ app æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">        <span class="type">Long</span> <span class="variable">appId</span> <span class="operator">=</span> userAnswerAddRequest.getAppId();</span><br><span class="line">        <span class="type">App</span> <span class="variable">app</span> <span class="operator">=</span> appService.getById(appId);</span><br><span class="line">        ThrowUtils.throwIf(app == <span class="literal">null</span>, ErrorCode.NOT_FOUND_ERROR);</span><br><span class="line">        <span class="keyword">if</span> (!ReviewStatusEnum.PASS.equals(ReviewStatusEnum.getEnumByValue(app.getReviewStatus())))&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BusinessException</span>(ErrorCode.NO_AUTH_ERROR,<span class="string">&quot;åº”ç”¨æœªé€šè¿‡å®¡æ ¸ï¼Œä¸èƒ½ç­”é¢˜&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¡«å……é»˜è®¤å€¼</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">loginUser</span> <span class="operator">=</span> userService.getLoginUser(request);</span><br><span class="line">        userAnswer.setUserId(loginUser.getId());</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">// å†™å…¥æ•°æ®åº“</span></span><br><span class="line">            <span class="type">boolean</span> <span class="variable">result</span> <span class="operator">=</span> userAnswerService.save(userAnswer);</span><br><span class="line">            ThrowUtils.throwIf(!result, ErrorCode.OPERATION_ERROR);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (DuplicateKeyException e)&#123;</span><br><span class="line">            <span class="comment">//ignore error</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è¿”å›æ–°å†™å…¥çš„æ•°æ® id</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">newUserAnswerId</span> <span class="operator">=</span> userAnswer.getId();</span><br><span class="line">        <span class="comment">//è°ƒç”¨è¯„åˆ†æ¨¡å—</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">UserAnswer</span> <span class="variable">userAnswerWithResult</span> <span class="operator">=</span> scoringStrategyExecutor.doScore(choices,app);</span><br><span class="line">            userAnswerWithResult.setId(newUserAnswerId);</span><br><span class="line">            userAnswerWithResult.setAppId(<span class="literal">null</span>);</span><br><span class="line">            userAnswerService.updateById(userAnswerWithResult);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BusinessException</span>(ErrorCode.OPERATION_ERROR,<span class="string">&quot;è¯„åˆ†é”™è¯¯&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ResultUtils.success(newUserAnswerId);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›® </category>
          
          <category> AIç­”é¢˜åº”ç”¨å¹³å° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javaé¡¹ç›® </tag>
            
            <tag> AIç­”é¢˜åº”ç”¨å¹³å° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AIç­”é¢˜åº”ç”¨å¹³å°_1é¡¹ç›®æ€»è§ˆ</title>
      <link href="/2024/07/01/AI%E7%AD%94%E9%A2%98%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0_1%E9%A1%B9%E7%9B%AE%E6%80%BB%E8%A7%88/"/>
      <url>/2024/07/01/AI%E7%AD%94%E9%A2%98%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0_1%E9%A1%B9%E7%9B%AE%E6%80%BB%E8%A7%88/</url>
      
        <content type="html"><![CDATA[<h1 id="é¡¹ç›®ä»‹ç»"><a href="#é¡¹ç›®ä»‹ç»" class="headerlink" title="é¡¹ç›®ä»‹ç»"></a>é¡¹ç›®ä»‹ç»</h1><p>è¿™æ˜¯ä¸€ä¸ªåŸºäºVue3+SpringBoot+Redis+ChatGLM+RxJava+SSEçš„<strong>AIç­”é¢˜åº”ç”¨å¹³å°</strong>ã€‚<br>é‚£è¿™ä¸ªå¹³å°å¯ä»¥åšä»€ä¹ˆå‘¢ï¼Ÿ<br>é¦–å…ˆç”¨æˆ·å¯ä»¥è‡ªå·±åˆ›å»ºåº”ç”¨ï¼Œå¯¹äºåº”ç”¨çš„é¢˜ç›®å¯ä»¥é€šè¿‡è‡ªå®šä¹‰è®¾è®¡ï¼Œä¹Ÿå¯ä»¥é€šè¿‡AIæ¥ç”Ÿæˆï¼Œæ”¯æŒç”¨æˆ·æ£€ç´¢ã€åˆ†äº«ã€åœ¨çº¿ç­”é¢˜å¹¶åŸºäºAIå¾—åˆ°å›ç­”ç»“æœï¼Œç®¡ç†å‘˜å¯ä»¥é›†ä¸­çš„ç®¡ç†å’Œå®¡æ ¸åº”ç”¨ç­‰ä¿¡æ¯ã€‚</p><h1 id="æ ¸å¿ƒä¸šåŠ¡æµç¨‹"><a href="#æ ¸å¿ƒä¸šåŠ¡æµç¨‹" class="headerlink" title="æ ¸å¿ƒä¸šåŠ¡æµç¨‹"></a>æ ¸å¿ƒä¸šåŠ¡æµç¨‹</h1><p><img src="https://fanzher.xyz/img/1722149179081-005eb93e-0eee-4a8a-9ab0-26c0a44600cc.jpeg"></p><h1 id="æ—¶åºå›¾"><a href="#æ—¶åºå›¾" class="headerlink" title="æ—¶åºå›¾"></a>æ—¶åºå›¾</h1><p><img src="https://fanzher.xyz/img/1722151289083-5879aa07-6dbc-4257-bd74-23155c2afee0.jpeg"></p><h1 id="æŠ€æœ¯é€‰å‹"><a href="#æŠ€æœ¯é€‰å‹" class="headerlink" title="æŠ€æœ¯é€‰å‹"></a>æŠ€æœ¯é€‰å‹</h1><p><strong>å‰ç«¯</strong></p><blockquote><p>Vue3+Vue-cliè„šæ‰‹æ¶å¿«é€Ÿåˆå§‹åŒ–é¡¹ç›®<br>AcroDesignç»„ä»¶åº“<br>PiniaçŠ¶æ€ç®¡ç†<br>Axiosè¯·æ±‚åº“+openApiè‡ªåŠ¨ç”Ÿæˆå¯¹åç«¯æ¥å£çš„è¯·æ±‚æ–¹æ³•<br>å‰ç«¯å·¥ç¨‹åŒ–ï¼šESLint+Prettier+TypeScript æ ¡éªŒä»£ç æ ¼å¼ä»¥åŠä»£ç ç¾åŒ–<br>QRcodeç”Ÿæˆåˆ†äº«äºŒç»´ç </p></blockquote><p><strong>åç«¯</strong></p><blockquote><p>SpringBootï¼šåˆå§‹åŒ–åç«¯é¡¹ç›®<br>å­˜å‚¨å±‚ï¼šMySQL+redisç¼“å­˜<br>MyBatisPlus+MybatisXè‡ªåŠ¨ç”Ÿæˆmapperå’Œserviceå±‚ä»£ç <br>Redissionåˆ†å¸ƒå¼é”<br>caffeineå®ç°æœ¬åœ°ç¼“å­˜<br>åŸºäºChatGLMå¤§æ¨¡å‹å®ç°AIèµ‹èƒ½<br>RxJavaå“åº”å¼æ¡†æ¶+çº¿ç¨‹æ± <br>Shardingshpereå®ç°åˆ†åº“åˆ†è¡¨<br>SSEæœåŠ¡ç«¯æ¨é€<br>å¤šç§è®¾è®¡æ¨¡å¼</p></blockquote><h1 id="åŠŸèƒ½æ¨¡å—æ¢³ç†"><a href="#åŠŸèƒ½æ¨¡å—æ¢³ç†" class="headerlink" title="åŠŸèƒ½æ¨¡å—æ¢³ç†"></a>åŠŸèƒ½æ¨¡å—æ¢³ç†</h1><h2 id="ç”¨æˆ·æ¨¡å—"><a href="#ç”¨æˆ·æ¨¡å—" class="headerlink" title="ç”¨æˆ·æ¨¡å—"></a>ç”¨æˆ·æ¨¡å—</h2><ul><li>æ³¨å†Œ</li><li>ç™»å½•</li><li>ç®¡ç†ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰</li></ul><h2 id="åº”ç”¨æ¨¡å—"><a href="#åº”ç”¨æ¨¡å—" class="headerlink" title="åº”ç”¨æ¨¡å—"></a>åº”ç”¨æ¨¡å—</h2><ul><li>åˆ›å»ºåº”ç”¨</li><li>ä¿®æ”¹åº”ç”¨</li><li>åˆ é™¤åº”ç”¨</li><li>æŸ¥çœ‹åº”ç”¨è¯¦æƒ…</li><li>æŸ¥çœ‹åº”ç”¨åˆ—è¡¨</li><li>æŸ¥çœ‹è‡ªå·±åˆ›å»ºçš„åº”ç”¨</li><li>åˆ†äº«åº”ç”¨</li><li>ç®¡ç†åº”ç”¨-å¢åˆ æ”¹æŸ¥ï¼ˆä»…ç®¡ç†å‘˜ï¼‰</li><li>ç®¡ç†åº”ç”¨-ä¸Šçº¿å’Œä¸‹æ¶ï¼ˆä»…ç®¡ç†å‘˜ï¼‰</li></ul><h2 id="é¢˜ç›®æ¨¡å—"><a href="#é¢˜ç›®æ¨¡å—" class="headerlink" title="é¢˜ç›®æ¨¡å—"></a>é¢˜ç›®æ¨¡å—</h2><ul><li>åˆ›å»ºé¢˜ç›®</li><li>åˆ é™¤é¢˜ç›®</li><li>ä¿®æ”¹é¢˜ç›®</li><li>ç®¡ç†é¢˜ç›®-å¢åˆ æ”¹æŸ¥ï¼ˆä»…ç®¡ç†å‘˜ï¼‰</li><li>AIç”Ÿæˆé¢˜ç›®</li></ul><h2 id="è¯„åˆ†æ¨¡å—"><a href="#è¯„åˆ†æ¨¡å—" class="headerlink" title="è¯„åˆ†æ¨¡å—"></a>è¯„åˆ†æ¨¡å—</h2><ul><li>åˆ›å»ºè¯„åˆ†ç»“æœ</li><li>åˆ é™¤è¯„åˆ†ç»“æœ</li><li>ä¿®æ”¹è¯„åˆ†ç»“æœ</li><li>è®¡ç®—è¯„åˆ†ç»“æœï¼ˆå¤šç§è¯„åˆ†ç­–ç•¥ï¼‰<ul><li>è‡ªå®šä¹‰æ‰“åˆ†ç±»ç­–ç•¥</li><li>è‡ªå®šä¹‰æµ‹è¯„ç±»ç­–ç•¥</li><li>AIåˆ†ææµ‹è¯„ç±»ç­–ç•¥</li></ul></li><li>ç®¡ç†è¯„åˆ†ç»“æœ-å¢åˆ æ”¹æŸ¥ï¼ˆä»…ç®¡ç†å‘˜ï¼‰</li></ul><h2 id="å›ç­”æ¨¡å—"><a href="#å›ç­”æ¨¡å—" class="headerlink" title="å›ç­”æ¨¡å—"></a>å›ç­”æ¨¡å—</h2><ul><li>æäº¤å›ç­”</li><li>æŸ¥çœ‹è‡ªå·±æäº¤çš„å›ç­”åˆ—è¡¨</li><li>æŸ¥çœ‹æŸæ¬¡å›ç­”çš„å›ç­”ç»“æœ</li><li>ç®¡ç†å›ç­”-å¢åˆ æ”¹æŸ¥ï¼ˆä»…ç®¡ç†å‘˜ï¼‰</li></ul><h2 id="ç»Ÿè®¡åˆ†ææ¨¡å—"><a href="#ç»Ÿè®¡åˆ†ææ¨¡å—" class="headerlink" title="ç»Ÿè®¡åˆ†ææ¨¡å—"></a>ç»Ÿè®¡åˆ†ææ¨¡å—</h2><ul><li>åº”ç”¨ç»“æœåˆ†æä¸æŸ¥çœ‹<ul><li>åˆ†æçƒ­é—¨åº”ç”¨</li><li>åˆ†ææŸä¸€åº”ç”¨ä¸‹çš„ç»“æœæ¯”ä¾‹</li></ul></li></ul><h1 id="ç•Œé¢å±•ç¤º"><a href="#ç•Œé¢å±•ç¤º" class="headerlink" title="ç•Œé¢å±•ç¤º"></a>ç•Œé¢å±•ç¤º</h1><p><img src="https://fanzher.xyz/img/1722254635103-3e302ef3-34fa-44a4-a9ff-6c66a89c5816.png" alt="image.png"><br><img src="https://fanzher.xyz/img/1722254838598-41202638-e943-4f3f-8c15-30076e556242.png" alt="image.png"><br><img src="https://fanzher.xyz/img/1722254896659-5dfedec8-924d-4670-a6df-ae6fcad3101d.png" alt="image.png"><br><img src="https://fanzher.xyz/img/1722254867850-998d1830-2e93-4f87-84a3-ef06a4e88b8b.png" alt="image.png"></p>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›® </category>
          
          <category> AIç­”é¢˜åº”ç”¨å¹³å° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javaé¡¹ç›® </tag>
            
            <tag> AIç­”é¢˜åº”ç”¨å¹³å° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SQLä¼˜åŒ–</title>
      <link href="/2024/06/26/SQL%E4%BC%98%E5%8C%96/"/>
      <url>/2024/06/26/SQL%E4%BC%98%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<p>å¸¸è§çš„SQLä¼˜åŒ–åˆ†ä¸ºä»¥ä¸‹å‡ ç±»<br><img src="https://fanzher.xyz/img/1719398846884-6949f355-7e1b-4297-80d9-8d47c86f612b.jpeg"></p><h1 id="æ’å…¥æ•°æ®æ•°æ®ä¼˜åŒ–"><a href="#æ’å…¥æ•°æ®æ•°æ®ä¼˜åŒ–" class="headerlink" title="æ’å…¥æ•°æ®æ•°æ®ä¼˜åŒ–"></a>æ’å…¥æ•°æ®æ•°æ®ä¼˜åŒ–</h1><p>å¹³å¸¸æˆ‘ä»¬åœ¨æ’å…¥æ•°æ®æ—¶ï¼Œå¯èƒ½é€šå¸¸æ˜¯ä¸€æ¡ä¸€æ¡æ’å…¥ï¼Œè¿™æ ·çš„æ•ˆç‡æ˜¾ç„¶ä¸é«˜ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡ä¸€æ¬¡æ€§å¾€æ•°æ®åº“ä¸­æ’å…¥å¤šæ¡è®°å½•ï¼Œä¸»è¦çš„ä¼˜åŒ–ç‚¹æœ‰ä¸‰ä¸ª</p><h2 id="ç›´æ¥åœ¨valuesåé¢é€šè¿‡é€—å·æ¥åˆ†å‰²å¤šæ¡æ•°æ®"><a href="#ç›´æ¥åœ¨valuesåé¢é€šè¿‡é€—å·æ¥åˆ†å‰²å¤šæ¡æ•°æ®" class="headerlink" title="ç›´æ¥åœ¨valuesåé¢é€šè¿‡é€—å·æ¥åˆ†å‰²å¤šæ¡æ•°æ®"></a>ç›´æ¥åœ¨valuesåé¢é€šè¿‡é€—å·æ¥åˆ†å‰²å¤šæ¡æ•°æ®</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;å¼ ä¸‰&#x27;</span>),(<span class="number">2</span>,<span class="string">&#x27;æå››&#x27;</span>),(<span class="number">3</span>,<span class="string">&#x27;ç‹äº”&#x27;</span>);</span><br></pre></td></tr></table></figure><h2 id="æŒ‰ä¸»é”®é¡ºåºæ’å…¥"><a href="#æŒ‰ä¸»é”®é¡ºåºæ’å…¥" class="headerlink" title="æŒ‰ä¸»é”®é¡ºåºæ’å…¥"></a>æŒ‰ä¸»é”®é¡ºåºæ’å…¥</h2><p>å› ä¸ºæŒ‰ä¸»é”®é¡ºåºæ’å…¥çš„æ–¹å¼æ€§èƒ½è¦é«˜äºä¹±åºæ’å…¥ï¼ˆå…·ä½“åœ¨ä¸‹é¢ä¸»é”®ä¼˜åŒ–é‚£é‡Œä¼šè¯´ï¼‰</p><h2 id="ä½¿ç”¨loadæŒ‡ä»¤æ¥æ’å…¥"><a href="#ä½¿ç”¨loadæŒ‡ä»¤æ¥æ’å…¥" class="headerlink" title="ä½¿ç”¨loadæŒ‡ä»¤æ¥æ’å…¥"></a>ä½¿ç”¨loadæŒ‡ä»¤æ¥æ’å…¥</h2><p>å¦‚æœä¸€æ¬¡æ€§éœ€è¦æ’å…¥å¤§æ‰¹é‡æ•°æ®ï¼Œæ¯”å¦‚å‡ ç™¾ä¸‡æ¡ï¼Œä½¿ç”¨insertè¯­å¥æ’å…¥æ€§èƒ½è¾ƒä½ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨mysqlæ•°æ®åº“æä¾›çš„loadæŒ‡ä»¤è¿›è¡Œæ’å…¥</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- å®¢æˆ·ç«¯è¿æ¥æœåŠ¡ç«¯æ—¶ï¼ŒåŠ ä¸Šå‚æ•° -â€“local-infile</span></span><br><span class="line">mysql â€“<span class="operator">-</span><span class="keyword">local</span><span class="operator">-</span>infile <span class="operator">-</span>u root <span class="operator">-</span>p</span><br><span class="line"><span class="comment">-- è®¾ç½®å…¨å±€å‚æ•°local_infileä¸º1ï¼Œå¼€å¯ä»æœ¬åœ°åŠ è½½æ–‡ä»¶å¯¼å…¥æ•°æ®çš„å¼€å…³</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> local_infile <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="comment">-- æ‰§è¡ŒloadæŒ‡ä»¤å°†å‡†å¤‡å¥½çš„æ•°æ®ï¼ŒåŠ è½½åˆ°è¡¨ç»“æ„ä¸­</span></span><br><span class="line">load data <span class="keyword">local</span> infile <span class="string">&#x27;/root/sql1.log&#x27;</span> <span class="keyword">into</span> <span class="keyword">table</span> tb_user fields</span><br><span class="line">terminated <span class="keyword">by</span> <span class="string">&#x27;,&#x27;</span> lines terminated <span class="keyword">by</span> <span class="string">&#x27;\n&#x27;</span> ;</span><br></pre></td></tr></table></figure><h1 id="ä¸»é”®ä¼˜åŒ–"><a href="#ä¸»é”®ä¼˜åŒ–" class="headerlink" title="ä¸»é”®ä¼˜åŒ–"></a>ä¸»é”®ä¼˜åŒ–</h1><p>åœ¨innoDBå­˜å‚¨å¼•æ“ä¸­ï¼Œè¡¨æ•°æ®éƒ½æ˜¯æ ¹æ®ä¸»é”®é¡ºåºç»„ç»‡å­˜æ”¾çš„<br><img src="https://fanzher.xyz/img/1719399580077-44fe4428-d799-4163-a138-c03a88154a49.png" alt="image.png"><br>å¯¹äºèšé›†ç´¢å¼•ï¼Œè¡Œæ•°æ®ï¼Œéƒ½æ˜¯å­˜å‚¨åœ¨èšé›†ç´¢å¼•çš„å¶å­èŠ‚ç‚¹ä¸Šçš„<br><img src="https://fanzher.xyz/img/1719399852420-35ee803b-a605-4224-8231-d082a2399d65.png" alt="image.png"><br>åœ¨innoDBå¼•æ“ä¸­ï¼Œæ•°æ®è¡Œæ˜¯è®°å½•åœ¨é€»è¾‘ç»“æ„pageé¡µä¸­ï¼Œè€Œæ¯ä¸€é¡µçš„å¤§å°éƒ½æ˜¯å›ºå®šçš„ï¼Œé»˜è®¤16Kã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€é¡µä¸­æ‰€å­˜å‚¨çš„è¡Œæ˜¯æœ‰é™çš„ï¼Œå¦‚æœæ’å…¥çš„æ•°æ®è¡Œrowåœ¨è¯¥é¡µå­˜å‚¨ä¸ä¸‹ï¼Œå°±ä¼šå­˜å‚¨åˆ°ä¸‹ä¸€ä¸ªé¡µä¸­ï¼Œé¡µä¸é¡µä¹‹é—´ä¼šé€šè¿‡æŒ‡é’ˆè¿æ¥ã€‚<br>å¦‚æœä¸æ˜¯æŒ‰ä¸»é”®é¡ºåºæ’å…¥çš„è¯ï¼Œè€Œæ˜¯é‡‡ç”¨ä¹±åºæ’å…¥ï¼Œé‚£ä¹ˆå½“æ’å…¥çš„ä¸»é”®éœ€è¦åœ¨å·²æ’å…¥çš„ä¸»é”®ä¸­é—´å»æ’å…¥ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šå‡ºç°<strong>é¡µåˆ†è£‚</strong>çš„ç°è±¡ï¼Œå¹¶ä¸”é¡µåˆ†è£‚åè¿˜éœ€è¦é‡æ–°è®¾ç½®é“¾è¡¨æŒ‡é’ˆï¼Œä¿è¯æ˜¯æŒ‰ä¸»é”®é¡ºåºæ¥ç»„ç»‡çš„ï¼Œè¿™æ˜¯æ¯”è¾ƒè€—è´¹æ€§èƒ½çš„æ“ä½œã€‚<br><img src="https://fanzher.xyz/img/1719400871488-eb55e19b-44e4-4b95-a167-f42617268800.png" alt="image.png"><br><img src="https://fanzher.xyz/img/1719400887390-c6472641-1577-4055-8b34-89ec2436e469.png" alt="image.png"></p><h1 id="order-byä¼˜åŒ–"><a href="#order-byä¼˜åŒ–" class="headerlink" title="order byä¼˜åŒ–"></a>order byä¼˜åŒ–</h1><p>åœ¨MySQLä¸­ï¼Œæ’åºæ–¹å¼ä¸»è¦æœ‰ä¸¤ç§</p><ul><li>Using filesort:é€šè¿‡è¡¨çš„ç´¢å¼•æˆ–è€…å…¨è¡¨æ‰«æï¼Œè¯»å–æ»¡è¶³æ¡ä»¶çš„æ•°æ®ï¼Œç„¶åå†æ’åºç¼“å†²æ± ä¸­å®Œæˆæ’åºæ“ä½œï¼Œæ‰€æœ‰ä¸æ˜¯é€šè¿‡ç´¢å¼•ç›´æ¥è¿”å›æ’åºç»“æœçš„æ’åºéƒ½æ˜¯å…¨è¡¨æ‰«æ</li><li>Using index: é€šè¿‡æœ‰åºç´¢å¼•é¡ºåºæ‰«æç›´æ¥è¿”å›æœ‰åºæ•°æ®ï¼Œä¸éœ€è¦é¢å¤–æ’åº</li></ul><p>ä½¿ç”¨Using indexçš„æ’åºæ•ˆç‡æ›´é«˜ï¼Œæ‰€ä»¥åœ¨ä¼˜åŒ–æ’åºæ“ä½œçš„æ—¶å€™ï¼Œå°½é‡ä½¿ç”¨Using index</p><blockquote><p>order byä¼˜åŒ–åŸåˆ™</p><ol><li>æ ¹æ®æ’åºå­—æ®µå»ºç«‹åˆé€‚çš„ç´¢å¼•ï¼Œå¤šå­—æ®µæ’åºæ—¶ï¼Œä¹Ÿéµå¾ªæœ€å·¦å‰ç¼€æ³•åˆ™</li><li>å°½é‡ä½¿ç”¨è¦†ç›–ç´¢å¼•</li><li>å¤šå­—æ®µæ’åºï¼Œä¸€ä¸ªå‡åºä¸€ä¸ªé™åºï¼Œæ­¤æ—¶éœ€è¦æ³¨æ„è”åˆç´¢å¼•åœ¨åˆ›å»ºæ—¶çš„è§„åˆ™</li><li>å¦‚æœä¸å¯é¿å…å‡ºç°filesort,å¤§æ•°æ®é‡æ’åºæ—¶ï¼Œå¯ä»¥é€‚å½“å¢å¤§æ’åºç¼“å†²åŒºå¤§å°</li></ol></blockquote><h1 id="group-byä¼˜åŒ–"><a href="#group-byä¼˜åŒ–" class="headerlink" title="group byä¼˜åŒ–"></a>group byä¼˜åŒ–</h1><p>å…¶å®å¤§éƒ¨åˆ†ä¼˜åŒ–æ“ä½œï¼Œéƒ½æ˜¯å¯¹ç´¢å¼•çš„åˆç†è®¾è®¡ï¼Œå¯¹äºåˆ†ç»„æ“ä½œï¼Œä¹Ÿæ˜¯çœ‹ç´¢å¼•å¯¹åˆ†ç»„æ“ä½œçš„å½±å“ã€‚</p><blockquote><p>group byä¼˜åŒ–åŸåˆ™</p><ol><li>åœ¨åˆ†ç»„æ“ä½œæ—¶ï¼Œå¯ä»¥é€šè¿‡ç´¢å¼•æ¥æé«˜æ•ˆç‡</li><li>åˆ†ç»„æ“ä½œæ—¶ï¼Œç´¢å¼•çš„ä½¿ç”¨ä¹Ÿæ˜¯æ»¡è¶³æœ€å·¦å‰ç¼€æ³•åˆ™çš„</li></ol></blockquote><h1 id="limitä¼˜åŒ–"><a href="#limitä¼˜åŒ–" class="headerlink" title="limitä¼˜åŒ–"></a>limitä¼˜åŒ–</h1><p>å¯¹äºlimitåˆ†é¡µæ“ä½œï¼Œè¶Šå¾€åï¼Œåˆ†é¡µæŸ¥è¯¢æ•ˆç‡è¶Šä½ï¼Œå› ä¸ºåœ¨åˆ†é¡µæŸ¥è¯¢æ—¶ï¼Œæ¯”å¦‚æ‰§è¡Œ limit 20000 10,æ­¤æ—¶éœ€è¦æ’åºå‰20010è®°å½•ï¼Œä»…ä»…è¿”å›20000-20010çš„è®°å½•ï¼Œå…¶ä»–è®°å½•ä¸¢å¼ƒï¼ŒæŸ¥è¯¢æ’åºçš„ä»£ä»·éå¸¸å¤§ã€‚</p><blockquote><p>limitä¼˜åŒ–åŸåˆ™<br>å¯ä»¥é€šè¿‡åˆ›å»º<strong>è¦†ç›–ç´¢å¼•</strong>çš„æ–¹å¼æå‡æ€§èƒ½</p></blockquote><h1 id="countä¼˜åŒ–"><a href="#countä¼˜åŒ–" class="headerlink" title="countä¼˜åŒ–"></a>countä¼˜åŒ–</h1><p>å¯¹äºInnoDBå¼•æ“ï¼Œå®ƒæ‰§è¡Œcount(*)çš„æ—¶å€™ï¼Œéœ€è¦æŠŠæ•°æ®ä¸€è¡Œä¸€è¡Œåœ°ä»å¼•æ“é‡Œé¢è¯»å‡ºæ¥ï¼Œç„¶åç´¯ç§¯è®¡æ•°ã€‚</p><table><thead><tr><th>countç”¨æ³•</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>count(*)</td><td>InnoDBå¼•æ“å¹¶ä¸ä¼šæŠŠå…¨éƒ¨å­—æ®µå–å‡ºæ¥ï¼Œè€Œæ˜¯ä¸“é—¨åšäº†ä¼˜åŒ–ï¼Œä¸å–å€¼ï¼ŒæœåŠ¡å±‚ç›´æ¥æŒ‰è¡Œè¿›è¡Œç´¯åŠ ã€‚</td></tr><tr><td>count(ä¸»é”®)</td><td>InnoDB å¼•æ“ä¼šéå†æ•´å¼ è¡¨ï¼ŒæŠŠæ¯ä¸€è¡Œçš„ä¸»é”®id å€¼éƒ½å–å‡ºæ¥ï¼Œè¿”å›ç»™æœåŠ¡å±‚ã€‚ æœåŠ¡å±‚æ‹¿åˆ°ä¸»é”®åï¼Œç›´æ¥æŒ‰è¡Œè¿›è¡Œç´¯åŠ (ä¸»é”®ä¸å¯èƒ½ä¸ºnull)</td></tr><tr><td>count(å­—æ®µ)</td><td>æ²¡æœ‰not null çº¦æŸ : InnoDB å¼•æ“ä¼šéå†æ•´å¼ è¡¨æŠŠæ¯ä¸€è¡Œçš„å­—æ®µå€¼éƒ½å–å‡ºæ¥ï¼Œè¿”å›ç»™æœåŠ¡å±‚ï¼ŒæœåŠ¡å±‚åˆ¤æ–­æ˜¯å¦ä¸ºnullï¼Œä¸ä¸ºnullï¼Œè®¡æ•°ç´¯åŠ ã€‚ æœ‰not null çº¦æŸï¼šInnoDB å¼•æ“ä¼šéå†æ•´å¼ è¡¨æŠŠæ¯ä¸€è¡Œçš„å­—æ®µå€¼éƒ½å–å‡ºæ¥ï¼Œè¿”å›ç»™æœåŠ¡å±‚ï¼Œç›´æ¥æŒ‰è¡Œè¿›è¡Œç´¯åŠ ã€‚</td></tr><tr><td>count(æ•°å­—)</td><td>InnoDB å¼•æ“éå†æ•´å¼ è¡¨ï¼Œä½†ä¸å–å€¼ã€‚æœåŠ¡å±‚å¯¹äºè¿”å›çš„æ¯ä¸€è¡Œï¼Œæ”¾ä¸€ä¸ªæ•°å­—â€œ1â€ è¿›å»ï¼Œç›´æ¥æŒ‰è¡Œè¿›è¡Œç´¯åŠ ã€‚</td></tr></tbody></table><blockquote><p>ä½¿ç”¨count(<em>)å’Œcount(æ•°å­—)å¹¶ä¸ä¼šæŠŠå€¼å–å‡ºæ¥ï¼Œè€Œæ˜¯ç›´æ¥è¿›è¡Œè®¡ç®—<br>æ•ˆç‡ï¼šcount(å­—æ®µ)&lt;count(ä¸»é”®)&lt;count(æ•°å­—)â‰ˆcount(</em>)</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®åº“ </tag>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dockerå­¦ä¹ </title>
      <link href="/2024/06/16/Docker%E5%AD%A6%E4%B9%A0/"/>
      <url>/2024/06/16/Docker%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<h1 id="1-dockeråŸºæœ¬ä»‹ç»"><a href="#1-dockeråŸºæœ¬ä»‹ç»" class="headerlink" title="1.dockeråŸºæœ¬ä»‹ç»"></a>1.dockeråŸºæœ¬ä»‹ç»</h1><h2 id="0-ä»€ä¹ˆæ˜¯å®¹å™¨ï¼Ÿ"><a href="#0-ä»€ä¹ˆæ˜¯å®¹å™¨ï¼Ÿ" class="headerlink" title="0 ä»€ä¹ˆæ˜¯å®¹å™¨ï¼Ÿ"></a>0 ä»€ä¹ˆæ˜¯å®¹å™¨ï¼Ÿ</h2><p>åœ¨ä¹‹å‰æˆ‘ä»¬å¯èƒ½æ²¡æ¥è§¦è¿‡docker,ä½†æ˜¯ä¹Ÿå¤§è‡´å¬è¿‡dockeræ˜¯å®¹å™¨ç®¡ç†å·¥å…·ï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯å®¹å™¨å‘¢ï¼Ÿåœ¨ç”Ÿæ´»ä¸­ï¼Œæ¯”å¦‚å†°ç®±å°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œå®ƒé‡Œé¢æœ‰å„ç§éš”å±‚ï¼Œå¯ä»¥å­˜æ”¾ä¸åŒç§ç±»çš„é£Ÿç‰©ï¼Œå„ç§é£Ÿç‰©ä¹‹é—´æ˜¯éš”ç¦»çš„ï¼Œåœ¨è½¯ä»¶å¼€å‘ä¸­ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼Œä¸è¿‡å®¹å™¨ä¸­å­˜æ”¾çš„æ˜¯åº”ç”¨ç¨‹åºï¼Œå®¹å™¨æŠ€æœ¯å¯ä»¥æŠŠåº”ç”¨ç¨‹åºæ‰“åŒ…æˆä¸€ä¸ªæ ‡å‡†åŒ–çš„å•å…ƒï¼Œæ–¹ä¾¿æˆ‘ä»¬å¯¹è½¯ä»¶çš„å¼€å‘ã€äº¤ä»˜å’Œéƒ¨ç½²ã€‚</p><h2 id="1-1-ä»€ä¹ˆæ˜¯dockerï¼Ÿ"><a href="#1-1-ä»€ä¹ˆæ˜¯dockerï¼Ÿ" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯dockerï¼Ÿ"></a>1.1 ä»€ä¹ˆæ˜¯dockerï¼Ÿ</h2><p>Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼Œå¯ä»¥è½»æ¾çš„ä¸ºä»»ä½•åº”ç”¨åˆ›å»ºä¸€ä¸ªè½»é‡çº§çš„ã€å¯ç§»æ¤çš„ã€è‡ªç»™è‡ªè¶³çš„å®¹å™¨ã€‚é€šä¿—æ¥è®²å°±æ˜¯å®ƒæ˜¯ä¸€ä¸ªå¤§å®¹å™¨ï¼Œé‡Œé¢å¯ä»¥æ”¾æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºï¼Œè¿™äº›åº”ç”¨ç¨‹åºç›¸äº’ä¹‹é—´æ˜¯ç‹¬ç«‹çš„ï¼Œå¯ä»¥ç‹¬è‡ªè¿è¡Œçš„ã€‚</p><h2 id="1-2-ä¸ºä»€ä¹ˆè¦å¼•å…¥docker"><a href="#1-2-ä¸ºä»€ä¹ˆè¦å¼•å…¥docker" class="headerlink" title="1.2 ä¸ºä»€ä¹ˆè¦å¼•å…¥docker?"></a>1.2 ä¸ºä»€ä¹ˆè¦å¼•å…¥docker?</h2><p>dockerä¸»è¦æœ‰å¦‚ä¸‹ä¼˜ç‚¹</p><ol><li><strong>æé«˜äº†ç¨‹åºå¼€å‘çš„æ•ˆç‡</strong>ï¼Œå¯¹äºä¸€äº›å¸¸ç”¨çš„è§„èŒƒçš„åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¿™æ ·çš„åº”ç”¨ç¨‹åºåˆ¶ä½œä¸ºé•œåƒï¼Œä¹‹åå°±å¯ä»¥åœ¨è¿™ä¸ªé•œåƒçš„åŸºç¡€ä¸Šï¼Œæ·»åŠ æˆ‘ä»¬è‡ªå·±çš„ä¸šåŠ¡ã€‚æ¯”å¦‚æƒ³ä½¿ç”¨mysqæœåŠ¡ï¼Œä¼ ç»Ÿçš„æ–¹å¼ï¼Œæ˜¯éœ€è¦æ ¹æ®è‡ªå·±éœ€è¦å®‰è£…çš„å¹³å°ï¼ˆWindowsæˆ–è€…linuxç­‰ï¼‰æ¥ä¸‹è½½å¯¹åº”çš„ç‰ˆæœ¬ï¼Œä¸‹è½½å®Œä¹‹åè¿˜éœ€è¦é…ç½®ç¯å¢ƒä¾èµ–å’Œä¸€äº›é…ç½®ä¿¡æ¯ã€‚ä½†æ˜¯åœ¨ä½¿ç”¨dockeråï¼Œå°±ä¸éœ€è¦è‡ªå·±å»ä¸‹è½½æ‰€éœ€çš„ç‰ˆæœ¬ï¼Œè€Œæ˜¯ç›´æ¥å»æ‹‰å–åˆ«äººåˆ›å»ºå¥½çš„mysqlé•œåƒï¼Œåªéœ€è¦ç®€å•é…ç½®ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</li><li><strong>å¯ä»¥é«˜æ•ˆçš„éƒ¨ç½²ä»¥åŠæ‰©å±•</strong>ï¼šdockerå®¹å™¨å¯ä»¥è¿è¡Œåœ¨ä»»ä½•æœºå™¨ä¸Šï¼Œæ¯”å¦‚ç‰©ç†æœºã€è™šæ‹Ÿæœºï¼ŒWindowsï¼ŒLinuxç­‰ç­‰ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿çš„ä»ä¸€ä¸ªå¹³å°è¿ç§»åˆ°å¦ä¸€ä¸ªå¹³å°ã€‚</li><li>èµ„æºåˆ©ç”¨ç‡é«˜ï¼šç›¸æ¯”äºè™šæ‹Ÿæœºçš„èµ„æºå ç”¨ç‡é«˜ï¼Œå¯åŠ¨æ…¢ï¼Œdockerå®¹å™¨éå¸¸çš„è½»é‡çº§ï¼Œå¯åŠ¨éå¸¸çš„å¿«ï¼Œå®ƒå ç”¨çš„ç³»ç»Ÿèµ„æºéå¸¸å°‘ï¼Œåªéœ€è¦æ»¡è¶³åº”ç”¨ç¨‹åºçš„æ­£å¸¸è¿è¡Œå°±å¤Ÿäº†ã€‚</li></ol><h2 id="1-3-dockerå¸¸ç”¨å‘½ä»¤"><a href="#1-3-dockerå¸¸ç”¨å‘½ä»¤" class="headerlink" title="1.3 dockerå¸¸ç”¨å‘½ä»¤"></a>1.3 dockerå¸¸ç”¨å‘½ä»¤</h2><table><thead><tr><th><strong>å‘½ä»¤</strong></th><th><strong>æè¿°</strong></th></tr></thead><tbody><tr><td>docker pull</td><td>æ‹‰å–é•œåƒ</td></tr><tr><td>docker push</td><td>æ¨é€é•œåƒ</td></tr><tr><td>docker images</td><td>æŸ¥çœ‹æœ¬åœ°é•œåƒ</td></tr><tr><td>docker rmi</td><td>åˆ é™¤æœ¬åœ°é•œåƒ</td></tr><tr><td>docker run</td><td>åˆ›å»ºå¹¶è¿è¡Œå®¹å™¨ï¼ˆä¸èƒ½é‡å¤åˆ›å»ºï¼‰</td></tr><tr><td>docker start</td><td>è¿è¡ŒæŒ‡å®šå®¹å™¨</td></tr><tr><td>docker stop</td><td>åœæ­¢æŒ‡å®šå®¹å™¨</td></tr><tr><td>docker restart</td><td>é‡æ–°è¿è¡ŒæŒ‡å®šå®¹å™¨</td></tr><tr><td>docker rm [-f å¼ºåˆ¶åˆ é™¤]</td><td>åˆ é™¤æŒ‡å®šå®¹å™¨ï¼ˆè¿è¡Œä¸­çš„å®¹å™¨éœ€è¦å¼ºåˆ¶åˆ é™¤ï¼‰</td></tr><tr><td>docker ps [-a æŸ¥çœ‹æ‰€æœ‰å®¹å™¨]</td><td>æŸ¥çœ‹å®¹å™¨ï¼ˆè¿è¡Œä¸­çš„ï¼‰</td></tr><tr><td>docker logs</td><td>æŸ¥çœ‹è¿è¡Œå®¹å™¨æ—¥å¿—</td></tr><tr><td>docker save</td><td>ä¿å­˜é•œåƒåˆ°æœ¬åœ°å‹ç¼©æ–‡ä»¶</td></tr><tr><td>docker load</td><td>åŠ è½½æœ¬åœ°å‹ç¼©æ–‡ä»¶åˆ°é•œåƒ</td></tr><tr><td>docker inspect</td><td>æŸ¥çœ‹é•œåƒè¯¦ç»†ä¿¡æ¯</td></tr></tbody></table><p><img src="https://fanzher.xyz/img/1721094593839-6e219d27-6403-4693-adb9-f89d321b2727.png" alt="image.png"></p><h1 id="2-æ•°æ®å·"><a href="#2-æ•°æ®å·" class="headerlink" title="2.æ•°æ®å·"></a><strong>2.æ•°æ®å·</strong></h1><h2 id="2-1ä¸ºä»€ä¹ˆè¦å¼•å…¥æ•°æ®å·ï¼Ÿ"><a href="#2-1ä¸ºä»€ä¹ˆè¦å¼•å…¥æ•°æ®å·ï¼Ÿ" class="headerlink" title="2.1ä¸ºä»€ä¹ˆè¦å¼•å…¥æ•°æ®å·ï¼Ÿ"></a>2.1ä¸ºä»€ä¹ˆè¦å¼•å…¥æ•°æ®å·ï¼Ÿ</h2><p>å®¹å™¨æ˜¯ä¸€ä¸ªéš”ç¦»çš„ç¯å¢ƒï¼Œå¦‚æœå®¹å™¨ä¸­çš„ç¨‹åºã€æ–‡ä»¶ã€é…ç½®ç­‰ä¿¡æ¯éƒ½åœ¨å®¹å™¨çš„å†…éƒ¨ï¼Œè®¿é—®éå¸¸çš„ä¸æ–¹ä¾¿ï¼Œè€Œä¸”å½“å®¹å™¨åœæ­¢çš„æ—¶å€™ï¼Œè¿™äº›æ•°æ®å’Œé…ç½®å¯èƒ½ä¼šä¸¢å¤±ã€‚æ‰€ä»¥ï¼Œ<strong>ä¸ºäº†è®©å®¹å™¨ä¸­è¿è¡Œçš„ç¨‹åºçš„æ•°æ®ã€é…ç½®ç­‰ä¿¡æ¯ä¸å®¹å™¨è§£è€¦</strong>ï¼Œå¼•å…¥æ•°æ®å·çš„æ¦‚å¿µã€‚</p><h2 id="2-2-ä»€ä¹ˆæ˜¯æ•°æ®å·ï¼Ÿ"><a href="#2-2-ä»€ä¹ˆæ˜¯æ•°æ®å·ï¼Ÿ" class="headerlink" title="2.2 ä»€ä¹ˆæ˜¯æ•°æ®å·ï¼Ÿ"></a>2.2 ä»€ä¹ˆæ˜¯æ•°æ®å·ï¼Ÿ</h2><p>æ•°æ®å·æ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„ç›®å½•ï¼Œå®ƒä¸»è¦æ˜¯æŠŠ<strong>å®¿ä¸»æœºçš„æ–‡ä»¶ç›®å½•</strong>å’Œ<strong>å®¹å™¨å†…çš„æ–‡ä»¶ç›®å½•</strong>åšä¸€ä¸ªæ˜ å°„ï¼Œè¿™æ ·å°±æŠŠå®¹å™¨å†…æ–‡ä»¶å’Œå®¿ä¸»æœºæ–‡ä»¶å…³è”èµ·æ¥äº†ï¼Œæ—¢å¯ä»¥æŠŠå®¹å™¨å†…æ•°æ®æŒä¹…åŒ–åˆ°å®¿ä¸»æœºç£ç›˜ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å®¿ä¸»æœºç£ç›˜é…ç½®æ–‡ä»¶æ¥ä¿®æ”¹å®¹å™¨ä¸­çš„é…ç½®ä¿¡æ¯ã€‚<br><img src="https://fanzher.xyz/img/1721094628385-bf44c7ae-7cac-4d91-a359-5815d54455bc.png" alt="image.png"><br>ä¸Šå›¾ä¸­å°±æ˜¯åˆ›å»ºäº†htmlå’Œconfä¸¤ä¸ªæ•°æ®å·ï¼Œå°†å®¿ä¸»æœºå’Œå®¹å™¨çš„é™æ€æ–‡ä»¶å’Œé…ç½®æ–‡ä»¶åšäº†ä¸€ä¸ªå…³è”ï¼Œæˆ–è€…è¯´æŒ‚è½½ï¼Œè¿™æ ·æŠŠé™æ€æ–‡ä»¶æ”¾åœ¨å®¿ä¸»æœºå¯¹åº”çš„ç›®å½•ï¼Œå°±å¯ä»¥å®ç°nginxä»£ç†äº†ã€‚</p><blockquote><p>æ³¨æ„ï¼š<br>ä¸€èˆ¬å®¹å™¨ç›®å½•åœ¨å®¿ä¸»æœºä¸­æ˜¯åœ¨&#x2F;var&#x2F;lib&#x2F;docker&#x2F;volumes&#x2F; ä¸‹é¢ï¼Œä½†æ˜¯å®¹å™¨ä¸­å¹¶ä¸æ˜¯åœ¨å¯¹åº”çš„ç›®å½•ä¸‹ï¼Œé€šè¿‡æ•°æ®å·æ¥æŒ‡å‘ã€‚</p></blockquote><h2 id="2-3-æ•°æ®å·å¸¸ç”¨å‘½ä»¤"><a href="#2-3-æ•°æ®å·å¸¸ç”¨å‘½ä»¤" class="headerlink" title="2.3 æ•°æ®å·å¸¸ç”¨å‘½ä»¤"></a>2.3 æ•°æ®å·å¸¸ç”¨å‘½ä»¤</h2><table><thead><tr><th><strong>å‘½ä»¤</strong></th><th><strong>æè¿°</strong></th></tr></thead><tbody><tr><td>docker volume create</td><td>åˆ›å»ºæ•°æ®å·</td></tr><tr><td>docker volume rm</td><td>åˆ é™¤æ•°æ®å·</td></tr><tr><td>docker volume ls</td><td>æŸ¥çœ‹æ‰€æœ‰æ•°æ®å·</td></tr><tr><td>docker volume inspect</td><td>æŸ¥çœ‹æŸä¸ªæ•°æ®å·</td></tr><tr><td>docker volume prune</td><td>æ¸…é™¤æ•°æ®å·</td></tr></tbody></table><blockquote><p>æ³¨æ„ï¼šå®¹å™¨å’Œæ•°æ®å·çš„æŒ‚è½½éœ€è¦åœ¨åˆ›å»ºå®¹å™¨çš„æ—¶å€™è¿›è¡Œé…ç½®ï¼Œå¯¹äºåˆ›å»ºå¥½çš„å®¹å™¨ï¼Œä¸èƒ½å†æŒ‡å®šæ•°æ®å·ï¼Œå¦‚æœåœ¨åˆ›å»ºå®¹å™¨çš„æ—¶å€™ï¼Œæ²¡æœ‰æŒ‡å®šæ•°æ®å·ï¼Œåˆ™ä¼šé…ç½®ä¸€ä¸ªé»˜è®¤çš„æ•°æ®å·ï¼ˆä¸€èˆ¬åç§°å¾ˆé•¿ã€ä¸å¥½è®°ï¼‰</p></blockquote><h2 id="2-4-æŒ‚è½½æœ¬åœ°ç›®å½•æˆ–æ–‡ä»¶"><a href="#2-4-æŒ‚è½½æœ¬åœ°ç›®å½•æˆ–æ–‡ä»¶" class="headerlink" title="2.4 æŒ‚è½½æœ¬åœ°ç›®å½•æˆ–æ–‡ä»¶"></a>2.4 æŒ‚è½½æœ¬åœ°ç›®å½•æˆ–æ–‡ä»¶</h2><p>é€šå¸¸æ•°æ®å·çš„ç›®å½•ç»“æ„æ¯”è¾ƒæ·±ï¼Œæ“ä½œå¾ˆä¸æ–¹ä¾¿ï¼Œæ‰€ä»¥é€šå¸¸æƒ…å†µä¸‹ä¼šç›´æ¥å°†å®¹å™¨ç›®å½•å’Œå®¿ä¸»æœºçš„æŒ‡å®šç›®å½•åšä¸€ä¸ªæŒ‚è½½ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŒ‚è½½æœ¬åœ°ç›®å½•</span></span><br><span class="line">-v å®¿ä¸»æœºç›®å½•:å®¹å™¨ç›®å½•</span><br><span class="line"><span class="comment"># æŒ‚è½½æœ¬åœ°æ–‡ä»¶</span></span><br><span class="line">-v æœ¬åœ°æ–‡ä»¶:å®¹å™¨æ–‡ä»¶</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šå¦‚æœæ˜¯æŒ‚è½½åˆ°æœ¬åœ°çš„ç›®å½•æˆ–è€…æ–‡ä»¶æ—¶ï¼Œéœ€è¦ä»¥.&#x2F;æˆ–è€…&#x2F;å¼€å¤´ï¼Œå¦åˆ™ä¼šæŠŠå®ƒå½“æˆä¸€ä¸ªæ•°æ®å·ï¼Œä¸ä¼šä»æŒ‡å®šç›®å½•æŒ‚è½½ï¼Œè€Œæ˜¯å»&#x2F;var&#x2F;lib&#x2F;docker&#x2F;volumes&#x2F; ä¸‹åˆ›å»ºæ•°æ®å·æ¥æŒ‚è½½ã€‚</p></blockquote><h1 id="3-é•œåƒ"><a href="#3-é•œåƒ" class="headerlink" title="3.é•œåƒ"></a>3.é•œåƒ</h1><h2 id="3-1åŸºæœ¬ä»‹ç»"><a href="#3-1åŸºæœ¬ä»‹ç»" class="headerlink" title="3.1åŸºæœ¬ä»‹ç»"></a>3.1åŸºæœ¬ä»‹ç»</h2><p>é•œåƒæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œç”±ä¸€ç³»åˆ—æ–‡ä»¶ç»„æˆï¼Œè¿™äº›æ–‡ä»¶åŒ…æ‹¬ç¨‹åºè¿è¡Œæ‰€éœ€çš„åº“å‡½æ•°ã€ç¯å¢ƒä¾èµ–ã€ç¨‹åºæœ¬èº«ç­‰ç­‰ç»„æˆã€‚ä½¿ç”¨é•œåƒï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿæ„å»ºè‡ªå·±å¼€å‘æ‰€éœ€çš„åŸºç¡€ç¯å¢ƒã€‚<br><img src="https://fanzher.xyz/img/1721098549810-83620a96-7aed-485a-b32e-cd6d026138bf.png" alt="image.png"><br>ä½†æ˜¯é•œåƒä¸­çš„æ–‡ä»¶å¹¶ä¸æ˜¯éšä¾¿æ”¾çš„ï¼Œè€Œæ˜¯æœ‰ä¸€å®šçš„å±‚çº§ç»“æ„ï¼Œæ¯”å¦‚æœ‰åŸºç¡€é•œåƒï¼Œæä¾›åº”ç”¨è¿è¡Œæ‰€éœ€çš„ç³»ç»Ÿå‡½æ•°åº“ï¼Œç¯å¢ƒé…ç½®ã€æ–‡ä»¶ç­‰ç­‰ï¼Œåœ¨åŸºç¡€é•œåƒä¹‹ä¸Šï¼Œè¿˜æœ‰æˆ‘ä»¬è‡ªå·±ç¼–å†™çš„åº”ç”¨ä»£ç ï¼Œä¹Ÿä¼šæœ‰ç¯å¢ƒä¾èµ–å’Œä¸šåŠ¡éƒ¨åˆ†ï¼Œä¹Ÿä¼šåˆ†ä¸ºä¸åŒçš„å±‚ï¼Œåœ¨åº”ç”¨ç¨‹åºçš„æœ€ä¸Šé¢ï¼Œæœ‰é•œåƒè¿è¡Œçš„å…¥å£ï¼Œä¹Ÿå°±æ˜¯ç¨‹åºå¯åŠ¨çš„è„šæœ¬å’Œå‚æ•°ã€‚</p><h2 id="3-2Dockerfile"><a href="#3-2Dockerfile" class="headerlink" title="3.2Dockerfile"></a>3.2Dockerfile</h2><p>æƒ³ä¸€ä¸‹ä¸Šé¢åˆ†å±‚çš„å¥½å¤„ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨é•œåƒçš„æ—¶å€™ï¼Œå¯èƒ½ä¸€äº›åŸºç¡€çš„é•œåƒéƒ½æ˜¯é€šç”¨çš„ï¼Œå°†è¿™äº›é€šç”¨çš„éƒ¨åˆ†æå–å‡ºæ¥ï¼Œå°±ä¸éœ€è¦æˆ‘ä»¬å†å»é…ç½®è¿™éƒ¨åˆ†å†…å®¹ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨ï¼ˆç±»ä¼¼æˆ‘ä»¬åœ¨ç¼–å†™ä»£ç ä¸­ä½¿ç”¨çš„é€šç”¨å·¥å…·ç±»ï¼‰<br>æˆ‘ä»¬è‡ªå·±çš„é¡¹ç›®åœ¨åˆ¶ä½œé•œåƒçš„æ—¶å€™ï¼Œå°±éœ€è¦ä½¿ç”¨Dockerfileæ¥æŒ‡å®šé•œåƒåˆ¶ä½œçš„æ­¥éª¤ï¼Œå…¶å¯¹åº”æ–‡æ¡£ä¸º<br><a href="https://docs.docker.com/engine/reference/builder/">https://docs.docker.com/engine/reference/builder/</a><br>æ¯”è¾ƒå¸¸ç”¨çš„è¯­æ³•</p><table><thead><tr><th><strong>æŒ‡ä»¤</strong></th><th><strong>è¯´æ˜</strong></th><th><strong>ç¤ºä¾‹</strong></th></tr></thead><tbody><tr><td>FROM</td><td>æŒ‡å®šåŸºç¡€é•œåƒ</td><td><code>FROM centos:6</code></td></tr><tr><td>ENV</td><td>è®¾ç½®ç¯å¢ƒå˜é‡</td><td><code>ENV key value</code></td></tr><tr><td>COPY</td><td>æ‹·è´æœ¬åœ°æ–‡ä»¶åˆ°å®¹å™¨æŒ‡å®šç›®å½•</td><td><code>COPY ./xx.jar /tmp/app.jar</code></td></tr><tr><td>RUN</td><td>æ‰§è¡Œshellå‘½ä»¤ï¼Œä¸€èˆ¬æ˜¯å®‰è£…è¿‡ç¨‹çš„å‘½ä»¤</td><td><code>RUN yum install gcc</code></td></tr><tr><td>EXPOSE</td><td>æŒ‡å®šå®¹å™¨è¿è¡Œæ—¶ç›‘å¬çš„ç«¯å£</td><td>EXPOSE 8080</td></tr><tr><td>ENTRYPOINT</td><td>åº”ç”¨çš„å¯åŠ¨å‘½ä»¤</td><td>ENTRYPOINT java -jar xx.jar</td></tr></tbody></table><blockquote><p>æ³¨æ„ï¼šè¿™ä¸ªDockerfileæ–‡ä»¶åªéœ€è¦äº†è§£å„ä¸ªæŒ‡ä»¤æ˜¯å¹²ä»€ä¹ˆçš„ï¼Œä¸éœ€è¦å®Œå…¨è‡ªå·±ç¼–å†™ï¼Œéœ€è¦æ—¶ç›´æ¥å»ç½‘ä¸Šå¤åˆ¶ï¼Œæ ¹æ®è‡ªå·±æƒ…å†µåšä¿®æ”¹å°±å¯ä»¥ã€‚</p></blockquote><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŸºç¡€é•œåƒ</span></span><br><span class="line"><span class="keyword">FROM</span> openjdk:<span class="number">11.0</span>-jre-buster</span><br><span class="line"><span class="comment"># è®¾å®šæ—¶åŒº</span></span><br><span class="line"><span class="keyword">ENV</span> TZ=Asia/Shanghai</span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">ln</span> -snf /usr/share/zoneinfo/<span class="variable">$TZ</span> /etc/localtime &amp;&amp; <span class="built_in">echo</span> <span class="variable">$TZ</span> &gt; /etc/timezone</span></span><br><span class="line"><span class="comment"># æ‹·è´jaråŒ…</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> docker-demo.jar /app.jar</span></span><br><span class="line"><span class="comment"># å…¥å£</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="string">&quot;java&quot;</span>, <span class="string">&quot;-jar&quot;</span>, <span class="string">&quot;/app.jar&quot;</span>]</span></span><br></pre></td></tr></table></figure><h2 id="3-3é•œåƒæ„å»º"><a href="#3-3é•œåƒæ„å»º" class="headerlink" title="3.3é•œåƒæ„å»º"></a>3.3é•œåƒæ„å»º</h2><p>é•œåƒæ„å»ºæµç¨‹</p><ol><li>é¦–å…ˆéœ€è¦æŠŠé¡¹ç›®æ‰“åŒ…æˆjaråŒ…</li><li>ç¼–å†™Dockerfileæ–‡ä»¶</li><li>è¿›å…¥jaråŒ…æ‰€åœ¨ç›®å½•ï¼Œé€šè¿‡<code>docker build -t é•œåƒå Dockerfileæ‰€åœ¨ä½ç½®</code>æ¥æ„å»ºé•œåƒ<ol><li>å…¶ä¸­é•œåƒååå¯ä»¥åŠ :tagæ¥æ·»åŠ ç‰ˆæœ¬ä¿¡æ¯</li><li>Dockerfileéœ€è¦æ³¨æ„å…¶æ‰€åœ¨ä½ç½®ï¼Œä¸€èˆ¬.è¡¨ç¤ºå½“å‰ç›®å½•</li></ol></li></ol><h1 id="4-ç½‘ç»œ"><a href="#4-ç½‘ç»œ" class="headerlink" title="4.ç½‘ç»œ"></a>4.ç½‘ç»œ</h1><p>åœ¨ä¸€ä¸ªå¾®æœåŠ¡é¡¹ç›®ä¸­ï¼Œå¯èƒ½ä¼šç”¨åˆ°å¾ˆå¤šä¸ªä¸­é—´ä»¶ï¼Œå½“æˆ‘ä»¬æŠŠè¿™äº›ä¸­é—´ä»¶æ·»åŠ åˆ°dockerå®¹å™¨åï¼Œè¿™äº›ç»„ä»¶ä¹‹é—´é»˜è®¤æ˜¯å¯ä»¥è®¿é—®çš„ï¼ˆå› ä¸ºé»˜è®¤ä¼šæŠŠè¿™äº›å®¹å™¨æ·»åŠ åˆ°ä¸€ä¸ªé»˜è®¤ç½‘ç»œä¸­ï¼‰ã€‚<br>ä½†æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œè¿™äº›å®¹å™¨çš„ipéƒ½æ˜¯è™šæ‹Ÿçš„ï¼Œæ˜¯ç”±dockeræ¥è¿›è¡Œåˆ†é…çš„ï¼Œå¯èƒ½mysqlè¿™æ¬¡å¯åŠ¨åˆ†é…çš„ipä¸‹æ¬¡å°±ä¼šè¢«æ¢æˆåˆ«çš„ï¼Œè¿™æ ·åœ¨é…ç½®æ–‡ä»¶ä¸­å†™çš„åœ°å€å°±ä¸å¤Ÿçµæ´»äº†ã€‚<br><strong>å¼•å…¥dockerç½‘ç»œ</strong><br>æˆ‘ä»¬å°±å¯ä»¥æŠŠè¿™äº›ä¸­é—´ä»¶å®¹å™¨éƒ½æ·»åŠ åˆ°ä¸€ä¸ªç½‘ç»œé‡Œï¼Œä¹‹åå°±å¯ä»¥é€šè¿‡å®¹å™¨åæ¥ç›¸äº’é€šä¿¡äº†ã€‚<br>dockerç½‘ç»œåŠŸèƒ½ç›¸å…³æ–‡æ¡£ï¼š<a href="https://docs.docker.com/engine/reference/commandline/network/"><strong>https://docs.docker.com/engine/reference/commandline/network/</strong></a><br><strong>å¸¸è§å‘½ä»¤</strong></p><table><thead><tr><th><strong>å‘½ä»¤</strong></th><th><strong>æè¿°</strong></th></tr></thead><tbody><tr><td>docker network create</td><td>åˆ›å»ºä¸€ä¸ªç½‘ç»œ</td></tr><tr><td>docker network rm</td><td>åˆ é™¤æŒ‡å®šç½‘ç»œ</td></tr><tr><td>docker network ls</td><td>æŸ¥çœ‹æ‰€æœ‰ç½‘ç»œ</td></tr><tr><td>docker network prune</td><td>æ¸…é™¤æœªä½¿ç”¨ç½‘ç»œ</td></tr><tr><td>docker network connect [ç½‘ç»œå][å®¹å™¨å][â€“alias åˆ«å(ç»™ç½‘ç»œä¸­çš„å®¹å™¨èµ·åˆ«å)]</td><td>ä½¿æŒ‡å®šå®¹å™¨æ·»åŠ åˆ°æŸç½‘ç»œ</td></tr><tr><td>docker network disconnect</td><td>ä½¿æŒ‡å®šå®¹å™¨ç¦»å¼€æŸç½‘ç»œ</td></tr><tr><td>docker network inspect</td><td>æŸ¥çœ‹ç½‘ç»œè¯¦ç»†ä¿¡æ¯</td></tr></tbody></table><h1 id="5-DockerCompose"><a href="#5-DockerCompose" class="headerlink" title="5 DockerCompose"></a><strong>5 DockerCompose</strong></h1><p>é€šå¸¸åœ¨å®é™…ä¸šåŠ¡ä¸­ï¼Œå¯èƒ½ä¼šç”±éå¸¸å¤šçš„æœåŠ¡ï¼Œå¯¹äºè¿™äº›æœåŠ¡ï¼Œæˆ‘ä»¬ä¸èƒ½ä¸€ä¸ªä¸€ä¸ªçš„å»éƒ¨ç½²ï¼Œé‚£æ ·ä¼šå¾ˆéº»çƒ¦ï¼Œå› æ­¤ï¼Œå¼•å…¥dockerComposeã€‚<br>å®ƒå¯ä»¥å¯¹æˆ‘ä»¬çš„ç›¸äº’å…³è”çš„å¤šä¸ªdockerå®¹å™¨ï¼Œåšä¸€ä¸ªç»Ÿä¸€çš„éƒ¨ç½²ã€‚åªéœ€è¦ç¼–å†™ä¸€ä¸ªdockercompose.ymlæ–‡ä»¶ï¼Œåœ¨é‡Œé¢å£°æ˜å„ä¸ªå®¹å™¨ä¿¡æ¯ã€‚ä½¿ç”¨å®ƒå¯ä»¥ç®€åŒ–dockeréƒ¨ç½²ã€‚</p><h2 id="5-1docker-VS-dockerCompose"><a href="#5-1docker-VS-dockerCompose" class="headerlink" title="5.1docker VS dockerCompose"></a>5.1docker VS dockerCompose</h2><p>ä½¿ç”¨<code>docker run</code>æ¥éƒ¨ç½²</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">  --name mysql \</span><br><span class="line">  -p 3306:3306 \</span><br><span class="line">  -e TZ=Asia/Shanghai \</span><br><span class="line">  -e MYSQL_ROOT_PASSWORD=123 \</span><br><span class="line">  -v ./mysql/data:/var/lib/mysql \</span><br><span class="line">  -v ./mysql/conf:/etc/mysql/conf.d \</span><br><span class="line">  -v ./mysql/init:/docker-entrypoint-initdb.d \</span><br><span class="line">  --network stufz</span><br><span class="line">  mysql</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>docker-compose.yml</code>æ¥å®šä¹‰</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.8&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">mysql:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mysql</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">mysql</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;3306:3306&quot;</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">      <span class="attr">MYSQL_ROOT_PASSWORD:</span> <span class="number">123</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;./mysql/conf:/etc/mysql/conf.d&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;./mysql/data:/var/lib/mysql&quot;</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">new</span></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">new:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">stufz</span></span><br></pre></td></tr></table></figure><table><thead><tr><th><strong>docker run å‚æ•°</strong></th><th><strong>docker compose æŒ‡ä»¤</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td>â€“name</td><td>container_name</td><td>å®¹å™¨åç§°</td></tr><tr><td>-p</td><td>ports</td><td>ç«¯å£æ˜ å°„</td></tr><tr><td>-e</td><td>environment</td><td>ç¯å¢ƒå˜é‡</td></tr><tr><td>-v</td><td>volumes</td><td>æ•°æ®å·é…ç½®</td></tr><tr><td>â€“network</td><td>networks</td><td>ç½‘ç»œ</td></tr></tbody></table><h2 id="5-2-dockerComposeå¸¸è§å‘½ä»¤"><a href="#5-2-dockerComposeå¸¸è§å‘½ä»¤" class="headerlink" title="5.2 dockerComposeå¸¸è§å‘½ä»¤"></a><strong>5.2 dockerComposeå¸¸è§å‘½ä»¤</strong></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker compose [OPTIONS] [COMMAND]</span><br></pre></td></tr></table></figure><table><thead><tr><th><strong>ç±»å‹</strong></th><th><strong>å‚æ•°æˆ–æŒ‡ä»¤</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td>Options</td><td>-f</td><td>æŒ‡å®šcomposeæ–‡ä»¶çš„è·¯å¾„å’Œåç§°</td></tr><tr><td></td><td>-p</td><td>æŒ‡å®šprojectåç§°ã€‚projectå°±æ˜¯å½“å‰composeæ–‡ä»¶ä¸­è®¾ç½®çš„å¤šä¸ªserviceçš„é›†åˆï¼Œæ˜¯é€»è¾‘æ¦‚å¿µ</td></tr><tr><td>Commands</td><td>up</td><td>åˆ›å»ºå¹¶å¯åŠ¨æ‰€æœ‰serviceå®¹å™¨</td></tr><tr><td></td><td>down</td><td>åœæ­¢å¹¶ç§»é™¤æ‰€æœ‰å®¹å™¨ã€ç½‘ç»œ</td></tr><tr><td></td><td>ps</td><td>åˆ—å‡ºæ‰€æœ‰å¯åŠ¨çš„å®¹å™¨</td></tr><tr><td></td><td>logs</td><td>æŸ¥çœ‹æŒ‡å®šå®¹å™¨çš„æ—¥å¿—</td></tr><tr><td></td><td>stop</td><td>åœæ­¢å®¹å™¨</td></tr><tr><td></td><td>start</td><td>å¯åŠ¨å®¹å™¨</td></tr><tr><td></td><td>restart</td><td>é‡å¯å®¹å™¨</td></tr><tr><td></td><td>top</td><td>æŸ¥çœ‹è¿è¡Œçš„è¿›ç¨‹</td></tr><tr><td></td><td>exec</td><td>åœ¨æŒ‡å®šçš„è¿è¡Œä¸­å®¹å™¨ä¸­æ‰§è¡Œå‘½ä»¤</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> å®¹å™¨ </category>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> å®¹å™¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¸¸ç”¨çš„SQLè¯­å¥</title>
      <link href="/2024/06/12/%E5%B8%B8%E7%94%A8%E7%9A%84SQL%E8%AF%AD%E5%8F%A5/"/>
      <url>/2024/06/12/%E5%B8%B8%E7%94%A8%E7%9A%84SQL%E8%AF%AD%E5%8F%A5/</url>
      
        <content type="html"><![CDATA[<p>SQLè¯­å¥æ ¹æ®ä¸åŒçš„åŠŸèƒ½ï¼Œä¸»è¦åˆ†ä¸ºå››ç±»ï¼šDDLã€DMLã€DQLã€DCLã€‚<br><img src="https://fanzher.xyz/img/yuque_mind.jpeg"></p><h2 id="DDLï¼ˆæ•°æ®å®šä¹‰è¯­è¨€ï¼‰"><a href="#DDLï¼ˆæ•°æ®å®šä¹‰è¯­è¨€ï¼‰" class="headerlink" title="DDLï¼ˆæ•°æ®å®šä¹‰è¯­è¨€ï¼‰"></a>DDLï¼ˆæ•°æ®å®šä¹‰è¯­è¨€ï¼‰</h2><p>DDLè¯­è¨€ä¸»è¦åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç±»æ˜¯é’ˆå¯¹<strong>æ•°æ®åº“</strong>çš„æ“ä½œï¼Œä¸€ç±»æ˜¯é’ˆå¯¹<strong>æ•°æ®è¡¨</strong>çš„æ“ä½œï¼ˆè¿™é‡Œåªæ˜¯å¯¹è¡¨ç»“æ„çš„ä¸€äº›æ“ä½œï¼Œä¸æ˜¯å…·ä½“æ“ä½œè¡¨ä¸­çš„æ•°æ®ï¼‰</p><h3 id="1-1æ•°æ®åº“æ“ä½œ"><a href="#1-1æ•°æ®åº“æ“ä½œ" class="headerlink" title="1.1æ•°æ®åº“æ“ä½œ"></a>1.1æ•°æ®åº“æ“ä½œ</h3><h4 id="æŸ¥è¯¢æ‰€æœ‰çš„æ•°æ®åº“"><a href="#æŸ¥è¯¢æ‰€æœ‰çš„æ•°æ®åº“" class="headerlink" title="æŸ¥è¯¢æ‰€æœ‰çš„æ•°æ®åº“"></a>æŸ¥è¯¢æ‰€æœ‰çš„æ•°æ®åº“</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> databases;</span><br></pre></td></tr></table></figure><h4 id="æŸ¥è¯¢å½“å‰æ•°æ®åº“"><a href="#æŸ¥è¯¢å½“å‰æ•°æ®åº“" class="headerlink" title="æŸ¥è¯¢å½“å‰æ•°æ®åº“"></a>æŸ¥è¯¢å½“å‰æ•°æ®åº“</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> database();</span><br></pre></td></tr></table></figure><h4 id="åˆ›å»ºæ•°æ®åº“"><a href="#åˆ›å»ºæ•°æ®åº“" class="headerlink" title="åˆ›å»ºæ•°æ®åº“"></a>åˆ›å»ºæ•°æ®åº“</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> database [if <span class="keyword">not</span> <span class="keyword">exists</span>] æ•°æ®åº“å [<span class="keyword">default</span> charset å­—ç¬¦é›†] [<span class="keyword">collate</span> æ’åºè§„åˆ™];</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤æ•°æ®åº“"><a href="#åˆ é™¤æ•°æ®åº“" class="headerlink" title="åˆ é™¤æ•°æ®åº“"></a>åˆ é™¤æ•°æ®åº“</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> database [if <span class="keyword">exists</span>] æ•°æ®åº“å;</span><br></pre></td></tr></table></figure><h4 id="åˆ‡æ¢æ•°æ®åº“"><a href="#åˆ‡æ¢æ•°æ®åº“" class="headerlink" title="åˆ‡æ¢æ•°æ®åº“"></a>åˆ‡æ¢æ•°æ®åº“</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use æ•°æ®åº“å;</span><br></pre></td></tr></table></figure><h3 id="1-2æ•°æ®è¡¨æ“ä½œ"><a href="#1-2æ•°æ®è¡¨æ“ä½œ" class="headerlink" title="1.2æ•°æ®è¡¨æ“ä½œ"></a>1.2æ•°æ®è¡¨æ“ä½œ</h3><h4 id="æŸ¥è¯¢å½“å‰æ•°æ®åº“æ‰€æœ‰è¡¨"><a href="#æŸ¥è¯¢å½“å‰æ•°æ®åº“æ‰€æœ‰è¡¨" class="headerlink" title="æŸ¥è¯¢å½“å‰æ•°æ®åº“æ‰€æœ‰è¡¨"></a>æŸ¥è¯¢å½“å‰æ•°æ®åº“æ‰€æœ‰è¡¨</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> tables;</span><br></pre></td></tr></table></figure><h4 id="æŸ¥çœ‹æŒ‡å®šçš„è¡¨ç»“æ„"><a href="#æŸ¥çœ‹æŒ‡å®šçš„è¡¨ç»“æ„" class="headerlink" title="æŸ¥çœ‹æŒ‡å®šçš„è¡¨ç»“æ„"></a>æŸ¥çœ‹æŒ‡å®šçš„è¡¨ç»“æ„</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">desc</span> è¡¨å;</span><br></pre></td></tr></table></figure><h4 id="æŸ¥è¯¢æŒ‡å®šè¡¨çš„å»ºè¡¨è¯­å¥"><a href="#æŸ¥è¯¢æŒ‡å®šè¡¨çš„å»ºè¡¨è¯­å¥" class="headerlink" title="æŸ¥è¯¢æŒ‡å®šè¡¨çš„å»ºè¡¨è¯­å¥"></a>æŸ¥è¯¢æŒ‡å®šè¡¨çš„å»ºè¡¨è¯­å¥</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">table</span> è¡¨å;</span><br></pre></td></tr></table></figure><h4 id="åˆ›å»ºè¡¨"><a href="#åˆ›å»ºè¡¨" class="headerlink" title="åˆ›å»ºè¡¨"></a>åˆ›å»ºè¡¨</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> è¡¨å(</span><br><span class="line">  å­—æ®µ<span class="number">1</span> å­—æ®µç±»å‹<span class="number">1</span>ï¼Œ</span><br><span class="line">  å­—æ®µ<span class="number">2</span> å­—æ®µç±»å‹<span class="number">2</span>ï¼Œ</span><br><span class="line">  å­—æ®µ<span class="number">3</span> å­—æ®µç±»å‹<span class="number">3</span>ï¼Œ</span><br><span class="line">  ...</span><br><span class="line">  å­—æ®µn å­—æ®µç±»å‹n</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h4 id="ä¿®æ”¹è¡¨"><a href="#ä¿®æ”¹è¡¨" class="headerlink" title="ä¿®æ”¹è¡¨"></a>ä¿®æ”¹è¡¨</h4><ul><li><p>æ·»åŠ å­—æ®µ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> è¡¨å <span class="keyword">add</span> å­—æ®µå å­—æ®µç±»å‹;</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹æ•°æ®ç±»å‹</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> è¡¨å modify å­—æ®µå æ–°å­—æ®µç±»å‹;</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹å­—æ®µåå’Œå­—æ®µç±»å‹</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> è¡¨å change æ—§å­—æ®µå æ–°å­—æ®µå å­—æ®µç±»å‹;</span><br></pre></td></tr></table></figure></li><li><p>åˆ é™¤å­—æ®µ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> è¡¨å <span class="keyword">drop</span> å­—æ®µå;</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹è¡¨å</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> è¡¨å rename <span class="keyword">to</span> æ–°è¡¨å;</span><br></pre></td></tr></table></figure></li></ul><h4 id="åˆ é™¤è¡¨"><a href="#åˆ é™¤è¡¨" class="headerlink" title="åˆ é™¤è¡¨"></a>åˆ é™¤è¡¨</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> [if <span class="keyword">exists</span>] è¡¨å;</span><br></pre></td></tr></table></figure><h4 id="æ¸…ç©ºè¡¨"><a href="#æ¸…ç©ºè¡¨" class="headerlink" title="æ¸…ç©ºè¡¨"></a>æ¸…ç©ºè¡¨</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">truncate</span> <span class="keyword">table</span> è¡¨å;</span><br></pre></td></tr></table></figure><h2 id="DML-æ•°æ®æ“ä½œè¯­è¨€-å¢åˆ æ”¹"><a href="#DML-æ•°æ®æ“ä½œè¯­è¨€-å¢åˆ æ”¹" class="headerlink" title="DML(æ•°æ®æ“ä½œè¯­è¨€-å¢åˆ æ”¹)"></a>DML(æ•°æ®æ“ä½œè¯­è¨€-å¢åˆ æ”¹)</h2><h3 id="æ·»åŠ æ•°æ®"><a href="#æ·»åŠ æ•°æ®" class="headerlink" title="æ·»åŠ æ•°æ®"></a>æ·»åŠ æ•°æ®</h3><p>ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼æ·»åŠ æ•°æ®ï¼šæŒ‡å®šå­—æ®µæ·»åŠ ã€å…¨éƒ¨å­—æ®µæ·»åŠ <br>å¯¹äº<strong>æŒ‡å®šå­—æ®µ</strong>æ·»åŠ ï¼Œè¿™ç§æ–¹å¼éœ€è¦ä¿è¯å­—æ®µåå’Œå­—æ®µå€¼ä¸€ä¸€å¯¹åº”ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> è¡¨å(å­—æ®µå<span class="number">1</span>,å­—æ®µå<span class="number">2</span>,...)<span class="keyword">values</span> (æ•°å€¼<span class="number">1</span>,æ•°å€¼<span class="number">2</span>,...)</span><br></pre></td></tr></table></figure><p>å¯¹äº<strong>å…¨éƒ¨å­—æ®µ</strong>æ·»åŠ </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> è¡¨å(å„ä¸ªå­—æ®µ)<span class="keyword">values</span>(å„ä¸ªå­—æ®µçš„å€¼);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> è¡¨å <span class="keyword">values</span>(æ•°å€¼<span class="number">1</span>,æ•°å€¼<span class="number">2</span>,æ•°å€¼<span class="number">3.</span>..æ•°å€¼n);</span><br></pre></td></tr></table></figure><blockquote><p>å¯¹äºæœ‰å¤šæ¡æ•°æ®æ’å…¥ï¼Œå¯ä»¥åœ¨valuesåé¢é€šè¿‡,æ¥åŒºåˆ†ä¸åŒçš„æ•°æ®ã€‚</p></blockquote><h3 id="åˆ é™¤æ•°æ®"><a href="#åˆ é™¤æ•°æ®" class="headerlink" title="åˆ é™¤æ•°æ®"></a>åˆ é™¤æ•°æ®</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> è¡¨å [<span class="keyword">where</span> æ¡ä»¶];</span><br></pre></td></tr></table></figure><blockquote><p>deleteè¯­å¥æ˜¯åˆ é™¤æ•°æ®è¡¨ä¸­çš„è®°å½•ï¼Œä¹Ÿå°±æ˜¯æŒ‰è¡Œæ¥åˆ é™¤ï¼Œä¸èƒ½åªåˆ é™¤æŸä¸ªå­—æ®µã€‚</p></blockquote><h3 id="ä¿®æ”¹æ•°æ®"><a href="#ä¿®æ”¹æ•°æ®" class="headerlink" title="ä¿®æ”¹æ•°æ®"></a>ä¿®æ”¹æ•°æ®</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> è¡¨å <span class="keyword">set</span> å­—æ®µå<span class="number">1</span><span class="operator">=</span>å€¼<span class="number">1</span>,å­—æ®µå<span class="number">2</span><span class="operator">=</span>å€¼<span class="number">2</span>,...[<span class="keyword">where</span> æ¡ä»¶];</span><br></pre></td></tr></table></figure><h2 id="DQL-æ•°æ®æŸ¥è¯¢è¯­è¨€-æœ€å¸¸ç”¨"><a href="#DQL-æ•°æ®æŸ¥è¯¢è¯­è¨€-æœ€å¸¸ç”¨" class="headerlink" title="DQL(æ•°æ®æŸ¥è¯¢è¯­è¨€-æœ€å¸¸ç”¨)"></a>DQL(æ•°æ®æŸ¥è¯¢è¯­è¨€-æœ€å¸¸ç”¨)</h2><p><img src="https://fanzher.xyz/img/yuque_mind1.jpeg"></p><blockquote><p>SQLç¼–å†™é¡ºåºæ˜¯ï¼šselectâ€“fromâ€“whereâ€“group byâ€“havingâ€“order byâ€“limit<br>ä½†æ˜¯è¯­å¥æ‰§è¡Œé¡ºåºæ˜¯ï¼šfromâ€“whereâ€“group byâ€“havingâ€“selectâ€“order byâ€“limit</p></blockquote><h3 id="æŸ¥è¯¢å¤šä¸ªå­—æ®µ"><a href="#æŸ¥è¯¢å¤šä¸ªå­—æ®µ" class="headerlink" title="æŸ¥è¯¢å¤šä¸ªå­—æ®µ"></a>æŸ¥è¯¢å¤šä¸ªå­—æ®µ</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> å­—æ®µ<span class="number">1</span>,å­—æ®µ<span class="number">2</span>,å­—æ®µ<span class="number">3.</span>..<span class="keyword">from</span> è¡¨å; #æŸ¥è¯¢æŒ‡å®šå­—æ®µ</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> è¡¨å; #æŸ¥è¯¢å…¨éƒ¨å­—æ®µ</span><br></pre></td></tr></table></figure><blockquote><p>1.å¯ä»¥ä½¿ç”¨ asæ¥è®¾ç½®åˆ«åï¼Œæ¥ç®€åŒ–ä»£ç ç¼–å†™<br>2.å¦‚æœå¸Œæœ›å¯¹æŸ¥æ‰¾åˆ°çš„è®°å½•å»é‡ï¼Œå¯ä»¥ä½¿ç”¨<strong>distinct</strong>å…³é”®å­—</p></blockquote><h3 id="æ¡ä»¶æŸ¥è¯¢"><a href="#æ¡ä»¶æŸ¥è¯¢" class="headerlink" title="æ¡ä»¶æŸ¥è¯¢"></a>æ¡ä»¶æŸ¥è¯¢</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> å­—æ®µåˆ—è¡¨ <span class="keyword">from</span> è¡¨å <span class="keyword">where</span> å­—æ®µåˆ—è¡¨;</span><br></pre></td></tr></table></figure><p>å¸¸ç”¨äºè¿›è¡Œæ¡ä»¶åˆ¤æ–­çš„è¿ç®—ç¬¦ï¼š<strong>æ¯”è¾ƒè¿ç®—ç¬¦</strong>å’Œ<strong>é€»è¾‘è¿ç®—ç¬¦</strong><br>æ¯”è¾ƒè¿ç®—ç¬¦å¦‚ä¸‹</p><blockquote><p>ã€&lt;ã€&gt;&#x3D;ã€&lt;&#x3D;ã€&lt;&gt;&#x2F;!&#x3D;ã€&#x3D;</p></blockquote><table><thead><tr><th>betweenâ€¦andâ€¦</th><th>åœ¨æŸä¸ªèŒƒå›´å†…ï¼ˆåŒ…å«å·¦å³è¾¹ç•Œï¼Œå¹¶ä¸”å·¦è¾¹ç•Œåº”å°äºå³è¾¹ç•Œï¼‰</th></tr></thead><tbody><tr><td>in(â€¦)</td><td>å¤šé€‰ä¸€ï¼Œåœ¨inä¹‹åçš„åˆ—è¡¨ä¸­çš„å€¼</td></tr><tr><td>likeå ä½ç¬¦</td><td>æ¨¡ç³ŠåŒ¹é…ï¼ˆ_åŒ¹é…å•ä¸ªå­—ç¬¦ã€%åŒ¹é…ä»»æ„ä¸ªå­—ç¬¦ï¼‰</td></tr><tr><td>is null</td><td>æ˜¯ç©ºå€¼</td></tr></tbody></table><p>é€»è¾‘è¿ç®—ç¬¦å¦‚ä¸‹</p><table><thead><tr><th>and æˆ– &amp;&amp;</th><th>å¤šä¸ªæ¡ä»¶åŒæ—¶æˆç«‹</th></tr></thead><tbody><tr><td>or æˆ– &#124;&#124;</td><td>å¤šä¸ªæ¡ä»¶ä»»æ„ä¸€ä¸ªæˆç«‹</td></tr><tr><td>not æˆ– !</td><td>éï¼Œå–å</td></tr></tbody></table><h3 id="èšåˆå‡½æ•°"><a href="#èšåˆå‡½æ•°" class="headerlink" title="èšåˆå‡½æ•°"></a>èšåˆå‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> èšåˆå‡½æ•°(å­—æ®µåˆ—è¡¨) <span class="keyword">from</span> è¡¨å;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„<br>1.NULLå€¼æ˜¯ä¸å‚ä¸èšåˆå‡½æ•°è¿ç®—çš„<br>2.èšåˆå‡½æ•°ä¸èƒ½å’Œwhereè¿›è¡Œè”åˆä½¿ç”¨ï¼Œä¸è¿‡å¯ä»¥å’Œhavingè¿›è¡Œè”åˆä½¿ç”¨</p></blockquote><table><thead><tr><th>count</th><th>ç»Ÿè®¡æ•°é‡</th></tr></thead><tbody><tr><td>sum</td><td>æ±‚å’Œ</td></tr><tr><td>max</td><td>æ±‚æœ€å¤§å€¼</td></tr><tr><td>min</td><td>æ±‚æœ€å°å€¼</td></tr><tr><td>avg</td><td>æ±‚å¹³å‡å€¼</td></tr></tbody></table><h3 id="åˆ†ç»„æŸ¥è¯¢"><a href="#åˆ†ç»„æŸ¥è¯¢" class="headerlink" title="åˆ†ç»„æŸ¥è¯¢"></a>åˆ†ç»„æŸ¥è¯¢</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> å­—æ®µåˆ—è¡¨ <span class="keyword">from</span> è¡¨å [<span class="keyword">where</span> æ¡ä»¶] <span class="keyword">group</span> <span class="keyword">by</span> åˆ†ç»„å­—æ®µå[<span class="keyword">having</span> åˆ†ç»„åçš„è¿‡æ»¤æ¡ä»¶];</span><br></pre></td></tr></table></figure><blockquote><p>whereå’Œhavingçš„åŒºåˆ«<br>1.whereæ˜¯åœ¨åˆ†ç»„å‰è¿›è¡Œè¿‡æ»¤ï¼Œhavingæ˜¯å¯¹åˆ†ç»„åçš„æ•°æ®è¿›è¡Œè¿‡æ»¤<br>2.whereä¸èƒ½å¯¹èšåˆå‡½æ•°è¿›è¡Œåˆ¤æ–­ï¼Œhavingå¯ä»¥</p></blockquote><h3 id="æ’åºæŸ¥è¯¢"><a href="#æ’åºæŸ¥è¯¢" class="headerlink" title="æ’åºæŸ¥è¯¢"></a>æ’åºæŸ¥è¯¢</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> å­—æ®µåˆ—è¡¨ <span class="keyword">from</span> è¡¨å <span class="keyword">order</span> <span class="keyword">by</span> å­—æ®µ<span class="number">1</span> æ’åºæ–¹å¼<span class="number">1</span>,å­—æ®µ<span class="number">2</span> æ’åºæ–¹å¼<span class="number">2</span>;</span><br></pre></td></tr></table></figure><blockquote><p>ASCï¼šå‡åº<br>DESCï¼šé™åº</p></blockquote><h3 id="åˆ†é¡µæŸ¥è¯¢"><a href="#åˆ†é¡µæŸ¥è¯¢" class="headerlink" title="åˆ†é¡µæŸ¥è¯¢"></a>åˆ†é¡µæŸ¥è¯¢</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> å­—æ®µåˆ—è¡¨ <span class="keyword">from</span> è¡¨å limit èµ·å§‹ç´¢å¼•,æŸ¥è¯¢è®°å½•æ•°;</span><br></pre></td></tr></table></figure><blockquote><p>èµ·å§‹ç´¢å¼•ä»0å¼€å§‹ï¼Œå¦‚æœä»ç¬¬ä¸€é¡µå¼€å§‹æŸ¥è¯¢ï¼Œèµ·å§‹ç´¢å¼•å¯ä»¥çœç•¥ã€‚</p></blockquote><h2 id="DCL-æ•°æ®æ§åˆ¶è¯­è¨€"><a href="#DCL-æ•°æ®æ§åˆ¶è¯­è¨€" class="headerlink" title="DCL(æ•°æ®æ§åˆ¶è¯­è¨€)"></a>DCL(æ•°æ®æ§åˆ¶è¯­è¨€)</h2><p>DCLè¯­è¨€ä¸»è¦æ˜¯ç”¨æ¥ç®¡ç†æ•°æ®åº“ç”¨æˆ·ã€ä»¥åŠæ§åˆ¶æ•°æ®åº“çš„è®¿é—®æƒé™çš„ã€‚</p><h3 id="ç”¨æˆ·ç®¡ç†"><a href="#ç”¨æˆ·ç®¡ç†" class="headerlink" title="ç”¨æˆ·ç®¡ç†"></a>ç”¨æˆ·ç®¡ç†</h3><h4 id="æŸ¥è¯¢ç”¨æˆ·"><a href="#æŸ¥è¯¢ç”¨æˆ·" class="headerlink" title="æŸ¥è¯¢ç”¨æˆ·"></a>æŸ¥è¯¢ç”¨æˆ·</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> mysql.user;</span><br></pre></td></tr></table></figure><h4 id="åˆ›å»ºç”¨æˆ·"><a href="#åˆ›å»ºç”¨æˆ·" class="headerlink" title="åˆ›å»ºç”¨æˆ·"></a>åˆ›å»ºç”¨æˆ·</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> <span class="string">&#x27;ç”¨æˆ·å&#x27;</span>@<span class="string">&#x27;ä¸»æœºå&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;å¯†ç &#x27;</span>;</span><br></pre></td></tr></table></figure><h4 id="ä¿®æ”¹ç”¨æˆ·å¯†ç "><a href="#ä¿®æ”¹ç”¨æˆ·å¯†ç " class="headerlink" title="ä¿®æ”¹ç”¨æˆ·å¯†ç "></a>ä¿®æ”¹ç”¨æˆ·å¯†ç </h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">user</span> <span class="string">&#x27;ç”¨æˆ·å&#x27;</span>@<span class="string">&#x27;ä¸»æœºå&#x27;</span> identified <span class="keyword">with</span> mysql_native_password <span class="keyword">by</span> <span class="string">&#x27;æ–°å¯†ç &#x27;</span>;</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤ç”¨æˆ·"><a href="#åˆ é™¤ç”¨æˆ·" class="headerlink" title="åˆ é™¤ç”¨æˆ·"></a>åˆ é™¤ç”¨æˆ·</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">user</span> <span class="string">&#x27;ç”¨æˆ·å&#x27;</span>@<span class="string">&#x27;ä¸»æœºå&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="æƒé™æ§åˆ¶"><a href="#æƒé™æ§åˆ¶" class="headerlink" title="æƒé™æ§åˆ¶"></a>æƒé™æ§åˆ¶</h3><h4 id="æŸ¥è¯¢æƒé™"><a href="#æŸ¥è¯¢æƒé™" class="headerlink" title="æŸ¥è¯¢æƒé™"></a>æŸ¥è¯¢æƒé™</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> grants <span class="keyword">for</span> <span class="string">&#x27;ç”¨æˆ·å&#x27;</span>@<span class="string">&#x27;ä¸»æœºå&#x27;</span>;</span><br></pre></td></tr></table></figure><h4 id="æˆäºˆæƒé™"><a href="#æˆäºˆæƒé™" class="headerlink" title="æˆäºˆæƒé™"></a>æˆäºˆæƒé™</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grant</span> æƒé™åˆ—è¡¨ <span class="keyword">on</span> æ•°æ®åº“å.è¡¨å <span class="keyword">to</span> <span class="string">&#x27;ç”¨æˆ·å&#x27;</span>@<span class="string">&#x27;ä¸»æœºå&#x27;</span>;</span><br></pre></td></tr></table></figure><h4 id="æ’¤é”€æƒé™"><a href="#æ’¤é”€æƒé™" class="headerlink" title="æ’¤é”€æƒé™"></a>æ’¤é”€æƒé™</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">revoke</span> æƒé™åˆ—è¡¨ <span class="keyword">on</span> æ•°æ®åº“å.è¡¨å <span class="keyword">from</span> <span class="string">&#x27;ç”¨æˆ·å&#x27;</span>@<span class="string">&#x27;ä¸»æœºå&#x27;</span>;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
          <category> mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®åº“ </tag>
            
            <tag> mysql </tag>
            
            <tag> sql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringIOCè¯¦è§£</title>
      <link href="/2024/06/07/Spring-IOC/"/>
      <url>/2024/06/07/Spring-IOC/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯ç»„ä»¶ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯ç»„ä»¶ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ç»„ä»¶ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ç»„ä»¶ï¼Ÿ</h2><p>åœ¨äº†è§£IOCä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦çŸ¥é“ï¼Œä»€ä¹ˆæ˜¯ç»„ä»¶ï¼Œç»„ä»¶å¯ä»¥ç†è§£ä¸ºJavaå¯¹è±¡ï¼Œä¸è¿‡è¿™äº›Javaå¯¹è±¡æ˜¯å¯ä»¥å¤ç”¨çš„åŠŸèƒ½æ€§çš„Javaå¯¹è±¡ã€‚åœ¨æˆ‘ä»¬å†™webé¡¹ç›®çš„æ—¶å€™ï¼Œcontrollerå±‚ã€serviceå±‚ã€mapperå±‚éƒ½å¯ä»¥ä½œä¸ºç»„ä»¶ã€‚ä¹Ÿå°±æ˜¯æ•´ä¸ªé¡¹ç›®å°±æ˜¯ç”±å„ç§ç»„ä»¶æ­å»ºèµ·æ¥çš„ã€‚<br><img src="/2024/06/07/Spring-IOC/1717754999330-544be2b8-af8d-4511-bb1f-67eafe178eb3.png" alt="img"></p><h2 id="ä¸ºä»€ä¹ˆè¦å¼•å…¥IOCçš„æ€æƒ³ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦å¼•å…¥IOCçš„æ€æƒ³ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦å¼•å…¥IOCçš„æ€æƒ³ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦å¼•å…¥IOCçš„æ€æƒ³ï¼Ÿ</h2><p>æƒ³è±¡ä¸€ä¸‹ä¼ ç»Ÿçš„å®ä¾‹åŒ–å¯¹è±¡çš„æ–¹å¼ï¼Œé€šè¿‡åœ¨Javaä»£ç ä¸­è‡ªå·±æ‰‹åŠ¨newå¯¹è±¡ï¼Œè‡ªå·±ä¿å­˜å¯¹è±¡ï¼Œå¹¶ä¸”æ‰‹åŠ¨ç»´æŠ¤å¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œæ— æ³•ä¸“æ³¨äºä¸šåŠ¡ä»£ç çš„å¼€å‘ï¼Œå› æ­¤å°±æƒ³ç€èƒ½ä¸èƒ½æˆ‘ä¸è‡ªå·±æ‰‹åŠ¨åˆ›å»ºç»„ä»¶ï¼Œè€Œæ˜¯äº¤ç»™IOCå®¹å™¨ï¼Œè®©å®ƒå¸®æˆ‘ä»¬ç®¡ç†ç»„ä»¶ï¼ŒåŒ…æ‹¬ç»„ä»¶çš„å®ä¾‹åŒ–ã€ç»„ä»¶çš„åˆ›å»ºã€é”€æ¯ã€ç»„ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸç­‰ç­‰ã€‚ã€‚ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯IOCï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯IOCï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯IOCï¼Ÿ"></a>ä»€ä¹ˆæ˜¯IOCï¼Ÿ</h2><p>iocæ˜¯Inversion of Controlçš„ç¼©å†™ï¼Œæ„æ€æ˜¯â€åè½¬æ§åˆ¶â€œï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒæŠŠæˆ‘ä»¬è‡ªå·±å®ä¾‹åŒ–å¯¹è±¡ï¼Œè‡ªå·±ç»™å¯¹è±¡å±æ€§èµ‹å€¼ï¼Œç®¡ç†å¯¹è±¡çš„æ§åˆ¶æƒï¼Œäº¤ç»™IOCå®¹å™¨å»ç®¡ç†ï¼Œæˆ‘ä»¬æŠŠç»„ä»¶æ·»åŠ åˆ°å®¹å™¨ä¸­ï¼Œä¹‹åéœ€è¦ä»€ä¹ˆç»„ä»¶ï¼Œå°±ä»å®¹å™¨ä¸­æ³¨å…¥åˆ°æˆ‘ä»¬éœ€è¦çš„åœ°æ–¹ï¼Œä¸éœ€è¦è‡ªå·±å»åˆ›å»ºã€‚</p><h2 id="ç»„ä»¶äº¤ç»™IOCå®¹å™¨æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ"><a href="#ç»„ä»¶äº¤ç»™IOCå®¹å™¨æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ" class="headerlink" title="ç»„ä»¶äº¤ç»™IOCå®¹å™¨æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ"></a>ç»„ä»¶äº¤ç»™IOCå®¹å™¨æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ</h2><ol><li>é¦–å…ˆé™ä½äº†ç»„ä»¶ä¹‹é—´çš„è€¦åˆæ€§ï¼šæ‰€æœ‰çš„ç»„ä»¶ç›¸äº’ä¹‹é—´ä¸å†æ˜¯é™„å±å…³ç³»ï¼Œè€Œæ˜¯å˜æˆäº†åˆä½œå…³ç³»ï¼Œç»„ä»¶Aéœ€è¦ç»„ä»¶Bï¼Œåªéœ€è¦å‘Šè¯‰å®¹å™¨ï¼Œå°±å¯ä»¥é€šè¿‡ä¾èµ–æ³¨å…¥ï¼Œä½¿ç”¨Bç»„ä»¶ï¼Œå®ç°äº†ç»„ä»¶ä¹‹é—´çš„ä½è€¦åˆã€‚</li><li>æé«˜ä»£ç çš„å¤ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§ï¼šå› ä¸ºç»„ä»¶çš„å®ä¾‹åŒ–å’Œç®¡ç†ç­‰å·¥ä½œéƒ½æ˜¯äº¤ç»™IOCå®¹å™¨æ¥ç®¡ç†ï¼Œæˆ‘ä»¬åªæ˜¯ä½¿ç”¨ç»„ä»¶ï¼Œæ‰€ä»¥æé«˜ä»£ç çš„å¯é‡ç”¨å’Œæ¨¡å—åŒ–ã€‚</li><li>æé«˜ç»„ä»¶çš„å¯æ‰©å±•æ€§ï¼šå› ä¸ºSpringæ¡†æ¶è¿˜æä¾›äº†å…¶ä»–çš„ä¸€äº›åŠŸèƒ½ï¼Œå½“æˆ‘ä»¬æŠŠç»„ä»¶äº¤ç»™IOCå®¹å™¨ç®¡ç†åï¼Œç»„ä»¶ä¹Ÿå¯ä»¥ä½¿ç”¨Springæä¾›çš„å…¶ä»–åŠŸèƒ½ã€‚</li></ol><h2 id="æ€ä¹ˆæŠŠç»„ä»¶äº¤ç»™IOCå®¹å™¨ç®¡ç†ï¼ˆIOCæ€ä¹ˆç”¨ï¼‰ï¼Ÿ"><a href="#æ€ä¹ˆæŠŠç»„ä»¶äº¤ç»™IOCå®¹å™¨ç®¡ç†ï¼ˆIOCæ€ä¹ˆç”¨ï¼‰ï¼Ÿ" class="headerlink" title="æ€ä¹ˆæŠŠç»„ä»¶äº¤ç»™IOCå®¹å™¨ç®¡ç†ï¼ˆIOCæ€ä¹ˆç”¨ï¼‰ï¼Ÿ"></a>æ€ä¹ˆæŠŠç»„ä»¶äº¤ç»™IOCå®¹å™¨ç®¡ç†ï¼ˆIOCæ€ä¹ˆç”¨ï¼‰ï¼Ÿ</h2><blockquote><p>æƒ³è¦æŠŠç»„ä»¶äº¤ç»™IOCå®¹å™¨ç®¡ç†ï¼Œé¦–å…ˆéœ€è¦<strong>é…ç½®å…ƒä¿¡æ¯ï¼Œ</strong>è¿™ä¸ªå…ƒä¿¡æ¯å°±æ˜¯å‘Šè¯‰SpringIOCå®¹å™¨ï¼Œæˆ‘æƒ³æŠŠå“ªäº›Javaå¯¹è±¡åŠ å…¥åˆ°iocå®¹å™¨ä¸­ï¼Œä»¥åŠè¿™äº›Javaå¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»æ˜¯æ€ä¹ˆæ ·çš„ã€‚<br>ä¹‹åå°±æ˜¯<strong>å®ä¾‹åŒ–å®¹å™¨ï¼Œ</strong>æ ¹æ®é…ç½®çš„å…ƒä¿¡æ¯ï¼Œå®ä¾‹åŒ–ä¸€ä¸ªå®¹å™¨ï¼Œç”¨æ¥ç®¡ç†beanç»„ä»¶<br>æœ€åå°±æ˜¯<strong>è·å–beanç»„ä»¶</strong></p></blockquote><p><img src="/2024/06/07/Spring-IOC/image-20240607203113660.png" alt="image-20240607203113660"><br>Springæä¾›äº†3ç§é…ç½®å…ƒä¿¡æ¯çš„æ–¹å¼</p><ol><li>åŸºäºXMLçš„æ–¹å¼ï¼ˆç°åœ¨å¾ˆå°‘ç”¨ï¼‰</li><li>åŸºäºæ³¨è§£çš„æ–¹å¼(å¸¸ç”¨)</li><li>åŸºäºé…ç½®ç±»çš„æ–¹å¼ï¼ˆé‡è¦ï¼‰<br>:::</li></ol><h3 id="1-åŸºäºXMLçš„æ–¹å¼ï¼ˆäº†è§£ï¼‰"><a href="#1-åŸºäºXMLçš„æ–¹å¼ï¼ˆäº†è§£ï¼‰" class="headerlink" title="1.åŸºäºXMLçš„æ–¹å¼ï¼ˆäº†è§£ï¼‰"></a>1.åŸºäºXMLçš„æ–¹å¼ï¼ˆäº†è§£ï¼‰</h3><p>åŸºäºXMLçš„é…ç½®å…ƒæ•°æ®çš„åŸºæœ¬ç»“æ„å¦‚ä¸‹</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ­¤å¤„è¦æ·»åŠ ä¸€äº›çº¦æŸï¼Œé…ç½®æ–‡ä»¶çš„æ ‡ç­¾å¹¶ä¸æ˜¯éšæ„å‘½å --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">  https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;...&quot;</span> [<span class="attr">1</span>] <span class="attr">class</span>=<span class="string">&quot;...&quot;</span> [<span class="attr">2</span>]&gt;</span>  </span><br><span class="line">    <span class="comment">&lt;!-- collaborators and configuration for this bean go here --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;...&quot;</span> <span class="attr">class</span>=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- collaborators and configuration for this bean go here --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- more bean definitions go here --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸»è¦æ˜¯é€šè¿‡åœ¨é…ç½®æ–‡ä»¶åœ¨æ·»åŠ <bean></bean>çš„æ–¹å¼æ¥ç®¡ç†ç»„ä»¶<br><strong>beanæ ‡ç­¾</strong>ï¼šå‘Šè¯‰IOCéœ€è¦åˆ›å»ºçš„ç»„ä»¶çš„ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯äº¤ç»™IOCå®¹å™¨ç®¡ç†çš„å¯¹è±¡<br><strong>id</strong>ï¼šå®ƒæ˜¯beançš„å”¯ä¸€æ ‡è¯†ï¼Œä¹‹åæˆ‘ä»¬æƒ³è¦è·å–è¿™ä¸ªbeanï¼Œå°±å¯ä»¥é€šè¿‡beançš„idæ¥è·å–<br><strong>class</strong>ï¼šç»„ä»¶ç±»çš„å…¨é™å®šç¬¦ï¼Œæ—¢ç„¶beanç»„ä»¶å°±æ˜¯Javaå¯¹è±¡ï¼Œé‚£ä¹ˆå¯¹è±¡è‚¯å®šæœ‰å®ƒæ‰€å±çš„ç±»ï¼Œä½¿ç”¨classå¯ä»¥å¯¹ç»„ä»¶è¿›è¡Œä¸€ä¸ªç±»å‹é™å®šã€‚</p><hr><p>å½“ä¸€ä¸ªç»„ä»¶éœ€è¦ä½¿ç”¨åˆ°å¦ä¸€ä¸ªç»„ä»¶çš„åŠŸèƒ½çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡<strong>ä¾èµ–æ³¨å…¥</strong>çš„æ–¹å¼ï¼Œæ¥æŠŠæ‰€éœ€çš„ç»„ä»¶ï¼Œæ³¨å…¥åˆ°å½“å‰çš„ç»„ä»¶ä¸­ã€‚å¸¸ç”¨çš„ç»„ä»¶ä¸»è¦æ–¹å¼æœ‰2ç§ï¼šåŸºäº<strong>æ„é€ å‡½æ•°</strong>çš„ä¾èµ–æ³¨å…¥ã€åŸºäº<strong>setteræ–¹æ³•</strong>çš„ä¾èµ–æ³¨å…¥</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- å¼•ç”¨ç±»beanå£°æ˜ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;x.y.UserService&quot;</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- æ„é€ å‡½æ•°å¼•ç”¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">ref</span>=<span class="string">&quot;userDao&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- è¢«å¼•ç”¨ç±»beanå£°æ˜ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;x.y.UserDao&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><p>constructor-argæ ‡ç­¾ï¼šnameå±æ€§æŒ‡å®šå‚æ•°åã€indexå±æ€§æŒ‡å®šå‚æ•°è§’æ ‡ã€valueå±æ€§æŒ‡å®šæ™®é€šå±æ€§å€¼ã€refå±æ€§æŒ‡å®šå¼•ç”¨å±æ€§ï¼Œé€šè¿‡refï¼Œå¯ä»¥æŒ‡å‘åˆ«çš„beanç»„ä»¶ï¼Œå®ç°ä¾èµ–çš„æ³¨å…¥ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;simpleMovieLister&quot;</span> <span class="attr">class</span>=<span class="string">&quot;examples.SimpleMovieLister&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- setteræ–¹æ³•ï¼Œæ³¨å…¥movieFinderå¯¹è±¡çš„æ ‡è¯†id</span></span><br><span class="line"><span class="comment">       name = å±æ€§å  ref = å¼•ç”¨beançš„idå€¼</span></span><br><span class="line"><span class="comment">   --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;movieFinder&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;movieFinder&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- setteræ–¹æ³•ï¼Œæ³¨å…¥åŸºæœ¬æ•°æ®ç±»å‹movieName</span></span><br><span class="line"><span class="comment">       name = å±æ€§å value= åŸºæœ¬ç±»å‹å€¼</span></span><br><span class="line"><span class="comment">   --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;movieName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æ¶ˆå¤±çš„å¥¹&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;movieFinder&quot;</span> <span class="attr">class</span>=<span class="string">&quot;examples.MovieFinder&quot;</span>/&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>propertyæ ‡ç­¾ï¼šå¯ä»¥ç»™setteræ–¹æ³•å¯¹åº”çš„å±æ€§èµ‹å€¼ï¼Œå…¶ä¸­name&#x3D;å±æ€§åã€value&#x3D;åŸºæœ¬æ•°æ®ç±»å‹ã€ref&#x3D;å¼•ç”¨æ•°æ®ç±»å‹ã€‚</p></li></ul><h3 id="2-åŸºäºæ³¨è§£çš„æ–¹å¼"><a href="#2-åŸºäºæ³¨è§£çš„æ–¹å¼" class="headerlink" title="2.åŸºäºæ³¨è§£çš„æ–¹å¼"></a>2.åŸºäºæ³¨è§£çš„æ–¹å¼</h3><p>Springä¸­æä¾›äº†å¤šä¸ªæ³¨è§£ï¼Œå¯ä»¥æŠŠè¿™äº›æ³¨è§£æ ‡æ³¨åœ¨Javaç±»ä¸Šï¼Œæ¥æŠŠå®ƒä»¬å®šä¹‰ä¸ºSpring Beanã€‚</p><table><thead><tr><th>æ³¨è§£</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>@Component</td><td>è¿™æ˜¯ä¸€ä¸ªé€šç”¨ç»„ä»¶ï¼Œåªæ˜¯æ ‡è¯†å®ƒæ˜¯å®¹å™¨ä¸­çš„ä¸€ä¸ªç»„ä»¶</td></tr><tr><td>@Controller</td><td>è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªæ§åˆ¶å±‚ç»„ä»¶ï¼Œè¯¥ç»„ä»¶æ ‡è¯†çš„ç±»ä¸»è¦è´Ÿè´£è¯·æ±‚çš„æ¥æ”¶å’Œå“åº”</td></tr><tr><td>@Service</td><td>è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªä¸šåŠ¡å±‚ç»„ä»¶ï¼Œè¯¥ç»„ä»¶æ ‡è¯†çš„ç±»ä¸»è¦è´Ÿè´£å¤„ç†å…·ä½“çš„ä¸šåŠ¡</td></tr><tr><td>@Repository</td><td>è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªæ•°æ®è®¿é—®å±‚ç»„ä»¶ï¼Œè¯¥ç»„ä»¶æ ‡è¯†çš„ç±»ä¸»è¦è´Ÿè´£ä¸æ•°æ®åº“çš„äº¤äº’</td></tr></tbody></table><p>éœ€è¦æ³¨æ„ï¼šç”¨è¿™äº›ç»„ä»¶æ ‡è¯†çš„ç±»åªæ˜¯è¡¨ç¤ºå®ƒä»¬æŠŠå®ƒä»¬äº¤ç»™IOCå®¹å™¨ç®¡ç†ï¼Œä½†æ˜¯çœŸæ­£åŠ å…¥IOCå®¹å™¨è¿˜éœ€è¦ç»è¿‡æ‰«æï¼Œä¹Ÿå°±æ˜¯component-scanï¼Œæ‰€ä»¥<strong>æ³¨è§£+æ‰«æ</strong>éœ€è¦é…åˆä½¿ç”¨ã€‚<br>æ‰«ææ–¹å¼æœ‰ä¸¤ç§ï¼šXMLæ–¹å¼ï¼ˆäº†è§£ï¼‰ã€æ³¨è§£æ–¹å¼ï¼ˆå¸¸ç”¨ï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;&quot;</span> &gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- context:include-filteræ ‡ç­¾ï¼šæŒ‡å®šåœ¨åŸæœ‰æ‰«æè§„åˆ™çš„åŸºç¡€ä¸Šè¿½åŠ çš„è§„åˆ™ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:include-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;org.springframework.stereotype.Controller&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ³¨è§£æ–¹å¼ï¼š<code>@ComponentScan()</code><br>åŸºäºæ³¨è§£æ–¹å¼çš„ä¾èµ–æ³¨å…¥ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªï¼š<code>@Autowired</code>å’Œ<code>@Resource</code><br>@AutoWiredå·¥ä½œåŸç†</p><ol><li>é¦–å…ˆæ ¹æ®æ‰€éœ€çš„ç»„ä»¶ç±»å‹åˆ°IOCå®¹å™¨ä¸­æŸ¥æ‰¾<ol><li>èƒ½å¤Ÿæ‰¾åˆ°å”¯ä¸€çš„beanï¼šç›´æ¥æ‰§è¡Œè£…é…</li><li>å®Œå…¨æ‰¾ä¸åˆ°è¿™ä¸ªç±»å‹çš„beanï¼šè£…é…å¤±è´¥</li><li>æ‰€éœ€ç±»å‹åŒ¹é…çš„beanä¸æ­¢ä¸€ä¸ª<ol><li>æ²¡æœ‰@Qualifieræ³¨è§£ï¼šæ ¹æ®@AutoWiredæ ‡è®°ä½ç½®æˆå‘˜å˜é‡çš„å˜é‡åä½œä¸ºbeançš„idè¿›è¡ŒåŒ¹é…<ol><li>å¦‚æœåŒ¹é…æˆåŠŸï¼šæ‰§è¡Œè£…é…</li><li>æ²¡æœ‰åŒ¹é…æˆåŠŸï¼šè£…é…å¤±è´¥</li></ol></li><li>æœ‰@Qualifieræ³¨è§£ï¼šæ ¹æ®è¯¥æ³¨è§£æŒ‡å®šçš„åç§°ä½œä¸ºbeançš„idè¿›è¡ŒåŒ¹é…<ol><li>èƒ½æ‰¾åˆ°ï¼šæ‰§è¡Œè£…é…</li><li>æ‰¾ä¸åˆ°ï¼šè£…é…å¤±è´¥</li></ol></li></ol></li></ol></li></ol><p>@Resourceæ³¨è§£ï¼šé»˜è®¤æ ¹æ®beanåç§°è£…é…ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šåç§°ï¼Œä½¿ç”¨å±æ€§åä½œä¸ºåç§°ï¼Œå¦‚æœé€šè¿‡åç§°æ‰¾ä¸åˆ°çš„åŒ–ä¼šè‡ªåŠ¨é€šè¿‡ç±»å‹è£…é…ã€‚</p><p>:::<br>ä¸¤è€…æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p><ol><li>æ¥æºï¼š@AutoWiredæ³¨è§£æ˜¯Springæ¡†æ¶çš„ï¼Œ@Resourceæ³¨è§£æ˜¯JDKæ‰©å±•åŒ…ä¸­çš„</li><li>åŒ¹é…é¡ºåºï¼š@AutoWiredæ³¨è§£ä¼˜å…ˆé€šè¿‡ç±»å‹åŒ¹é…ï¼ŒåŒ¹é…ä¸åˆ°å†é€šè¿‡idåŒ¹é…ï¼Œ@Resourceæ³¨è§£ä¼˜å…ˆé€šè¿‡idåŒ¹é…ï¼ŒåŒ¹é…ä¸åˆ°å†é€šè¿‡ç±»å‹åŒ¹é…</li><li>ä½œç”¨èŒƒå›´ï¼š@AutoWiredæ³¨è§£å¯ä»¥ç”¨åœ¨å±æ€§ã€setteræ–¹æ³•ã€æ„é€ æ–¹æ³•ã€æ„é€ æ–¹æ³•å‚æ•°ä¸Šã€‚@Resourceæ³¨è§£åªèƒ½ç”¨åœ¨å±æ€§å’Œsetteræ–¹æ³•ä¸Šã€‚</li></ol><p>é™¤äº†è¿™ä¸¤ä¸ªæ³¨å…¥æ–¹æ³•å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªæ³¨è§£ä¹Ÿæ¯”è¾ƒå¸¸ç”¨ï¼Œ<code>@Value</code>ï¼Œè¿™ä¸ªæ³¨è§£ä¸»è¦ç”¨äºè®¿é—®å¤–éƒ¨å±æ€§ï¼Œæ¯”å¦‚è®¿é—®é…ç½®æ–‡ä»¶ä¸­çš„å±æ€§ã€‚</p><h3 id="3-åŸºäºé…ç½®ç±»çš„æ–¹å¼"><a href="#3-åŸºäºé…ç½®ç±»çš„æ–¹å¼" class="headerlink" title="3.åŸºäºé…ç½®ç±»çš„æ–¹å¼"></a>3.åŸºäºé…ç½®ç±»çš„æ–¹å¼</h3><p>é€šè¿‡ç¼–å†™ä¸€ä¸ªé…ç½®ç±»ï¼Œä½¿ç”¨@Configurationå’Œ@Beançš„æ–¹å¼ï¼Œå®šä¹‰ç»„ä»¶,è¿™ç§æ–¹å¼é€šå¸¸ç”¨äºå®šä¹‰ä¸€äº›ç¬¬ä¸‰æ–¹å·¥å…·çš„ç±»ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ComponentScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.PropertySource;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ ‡æ³¨å½“å‰ç±»æ˜¯é…ç½®ç±»ï¼Œæ›¿ä»£application.xml    </span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">//ä½¿ç”¨æ³¨è§£è¯»å–å¤–éƒ¨é…ç½®ï¼Œæ›¿ä»£ &lt;context:property-placeholderæ ‡ç­¾</span></span><br><span class="line"><span class="meta">@PropertySource(&quot;classpath:application.properties&quot;)</span></span><br><span class="line"><span class="comment">//ä½¿ç”¨@ComponentScanæ³¨è§£,å¯ä»¥é…ç½®æ‰«æåŒ…,æ›¿ä»£&lt;context:component-scanæ ‡ç­¾</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &#123;&quot;com.stufz.components&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyConfiguration</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é…ç½®ç±»çš„æ³¨å…¥æ–¹å¼ï¼Œå¯ä»¥åœ¨ä¸€ä¸ª<code>@Bean</code>æ–¹æ³•ä¸­ï¼Œç›´æ¥è°ƒç”¨å…¶ä»–<code>@Bean</code>æ–¹æ³•æ¥è·å–Beanå®ä¾‹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡åœ¨å‚æ•°ä¸­ä¼ é€’ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JavaConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> HappyMachine <span class="title function_">happyMachine</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">HappyMachine</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ–¹å¼ä¸€</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> HappyComponent <span class="title function_">happyComponent</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">HappyComponent</span> <span class="variable">happyComponent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HappyComponent</span>();</span><br><span class="line">        <span class="comment">//ç›´æ¥è°ƒç”¨æ–¹æ³•å³å¯! </span></span><br><span class="line">        happyComponent.setHappyMachine(happyMachine());</span><br><span class="line">        <span class="keyword">return</span> happyComponent;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ–¹å¼äºŒ</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> HappyComponent <span class="title function_">happyComponent</span><span class="params">(HappyMachine happyMachine)</span>&#123;</span><br><span class="line">        <span class="type">HappyComponent</span> <span class="variable">happyComponent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HappyComponent</span>();</span><br><span class="line">        <span class="comment">//èµ‹å€¼</span></span><br><span class="line">        happyComponent.setHappyMachine(happyMachine);</span><br><span class="line">        <span class="keyword">return</span> happyComponent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸ"><a href="#ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸ" class="headerlink" title="ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸ"></a>ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸ</h2><h3 id="beançš„ç”Ÿå‘½å‘¨æœŸ"><a href="#beançš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="beançš„ç”Ÿå‘½å‘¨æœŸ"></a>beançš„ç”Ÿå‘½å‘¨æœŸ</h3><ol><li>Springå®¹å™¨åˆ›å»ºå¯¹è±¡</li><li>æ‰§è¡Œinitæ–¹æ³•ï¼ˆå¯ä»¥ä½¿ç”¨<code>@PostConstruct</code>æ³¨è§£æ¥æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•ï¼‰</li><li>è°ƒç”¨è‡ªå·±çš„ä¸šåŠ¡æ–¹æ³•</li><li>å½“springå®¹å™¨å…³é—­çš„æ—¶å€™æ‰§è¡Œdestroyæ–¹æ³•ï¼ˆå¯ä»¥ä½¿ç”¨<code>PreDestory</code>æ³¨è§£æ¥æŒ‡å®šé”€æ¯æ–¹æ³•ï¼‰</li></ol><h3 id="beançš„ä½œç”¨åŸŸ"><a href="#beançš„ä½œç”¨åŸŸ" class="headerlink" title="beançš„ä½œç”¨åŸŸ"></a>beançš„ä½œç”¨åŸŸ</h3><table><thead><tr><th>å–å€¼</th><th>å«ä¹‰</th><th>åˆ›å»ºå¯¹è±¡çš„æ—¶æœº</th><th>æ˜¯å¦ä¸ºé»˜è®¤å€¼</th></tr></thead><tbody><tr><td>singleton</td><td>åœ¨IOCå®¹å™¨ä¸­ï¼Œè¿™ä¸ªbeanå¯¹è±¡å§‹ç»ˆä¸ºå•ä¾‹</td><td>IOCå®¹å™¨åˆå§‹åŒ–çš„æ—¶å€™</td><td>æ˜¯</td></tr><tr><td>protoType</td><td>è¿™ä¸ªbeanåœ¨IOCå®¹å™¨ä¸­æœ‰å¤šä¸ªå®ä¾‹</td><td>è·å–beanæ—¶</td><td>å¦</td></tr><tr><td>request</td><td>åœ¨ä¸€ä¸ªè¯·æ±‚èŒƒå›´å†…æœ‰æ•ˆ</td><td>æ¯æ¬¡è¯·æ±‚</td><td>å¦</td></tr><tr><td>session</td><td>åœ¨ä¸€ä¸ªä¼šè¯èŒƒå›´å†…æœ‰æ•ˆ</td><td>æ¯æ¬¡ä¼šè¯</td><td>å¦</td></tr></tbody></table><p>å¯ä»¥ä½¿ç”¨<code>@Scope</code>æ³¨è§£æ¥æŒ‡å®šbeançš„ä½œç”¨åŸŸã€‚</p>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> spring </tag>
            
            <tag> ioc </tag>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ArrayListæ‰©å®¹æœºåˆ¶</title>
      <link href="/2024/06/04/ArrayList%E6%89%A9%E5%AE%B9%E6%9C%BA%E5%88%B6/"/>
      <url>/2024/06/04/ArrayList%E6%89%A9%E5%AE%B9%E6%9C%BA%E5%88%B6/</url>
      
        <content type="html"><![CDATA[<h2 id="åˆå§‹åŒ–æ–¹æ³•"><a href="#åˆå§‹åŒ–æ–¹æ³•" class="headerlink" title="åˆå§‹åŒ–æ–¹æ³•"></a>åˆå§‹åŒ–æ–¹æ³•</h2><p>é¦–å…ˆçœ‹ä¸€ä¸‹ArrayListçš„ä¸‰ç§åˆå§‹åŒ–æ–¹å¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é»˜è®¤åˆå§‹å®¹é‡å¤§å°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">DEFAULT_CAPACITY</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é»˜è®¤æ„é€ å‡½æ•°ï¼Œä½¿ç”¨åˆå§‹å®¹é‡10æ„é€ ä¸€ä¸ªç©ºåˆ—è¡¨(æ— å‚æ•°æ„é€ )</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">ArrayList</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¸¦åˆå§‹å®¹é‡å‚æ•°çš„æ„é€ å‡½æ•°ã€‚ï¼ˆç”¨æˆ·è‡ªå·±æŒ‡å®šå®¹é‡ï¼‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">ArrayList</span><span class="params">(<span class="type">int</span> initialCapacity)</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (initialCapacity &gt; <span class="number">0</span>) &#123;<span class="comment">//åˆå§‹å®¹é‡å¤§äº0</span></span><br><span class="line">    <span class="comment">//åˆ›å»ºinitialCapacityå¤§å°çš„æ•°ç»„</span></span><br><span class="line">    <span class="built_in">this</span>.elementData = <span class="keyword">new</span> <span class="title class_">Object</span>[initialCapacity];</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (initialCapacity == <span class="number">0</span>) &#123;<span class="comment">//åˆå§‹å®¹é‡ç­‰äº0</span></span><br><span class="line">    <span class="comment">//åˆ›å»ºç©ºæ•°ç»„</span></span><br><span class="line">    <span class="built_in">this</span>.elementData = EMPTY_ELEMENTDATA;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;<span class="comment">//åˆå§‹å®¹é‡å°äº0ï¼ŒæŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;Illegal Capacity: &quot;</span> + initialCapacity);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *æ„é€ åŒ…å«æŒ‡å®šcollectionå…ƒç´ çš„åˆ—è¡¨ï¼Œè¿™äº›å…ƒç´ åˆ©ç”¨è¯¥é›†åˆçš„è¿­ä»£å™¨æŒ‰é¡ºåºè¿”å›</span></span><br><span class="line"><span class="comment"> *å¦‚æœæŒ‡å®šçš„é›†åˆä¸ºnullï¼Œthrows NullPointerExceptionã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">ArrayList</span><span class="params">(Collection&lt;? extends E&gt; c)</span> &#123;</span><br><span class="line">    elementData = c.toArray();</span><br><span class="line">    <span class="keyword">if</span> ((size = elementData.length) != <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// c.toArray might (incorrectly) not return Object[] (see 6260652)</span></span><br><span class="line">        <span class="keyword">if</span> (elementData.getClass() != Object[].class)</span><br><span class="line">            elementData = Arrays.copyOf(elementData, size, Object[].class);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// replace with empty array.</span></span><br><span class="line">        <span class="built_in">this</span>.elementData = EMPTY_ELEMENTDATA;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æœ‰ä¸€ä¸ªé»˜è®¤çš„å®¹å™¨å¤§å°ä¸º10ï¼Œè¿˜æœ‰ä¸€ä¸ªç©ºæ•°ç»„elementDataç”¨æ¥å­˜æ”¾é›†åˆçš„å…ƒç´ ã€‚<br>ArrayList()ä¸€å…±æä¾›äº†ä¸‰ç§åˆå§‹åŒ–æ–¹æ³•</p><ol><li><p>é»˜è®¤æ— å‚çš„åˆå§‹åŒ–æ–¹æ³•ï¼š<strong>è¿™ç§æ–¹æ³•ä¼šç»™elementDataèµ‹ä¸€ä¸ªç©ºæ•°ç»„ï¼Œæ·»åŠ å…ƒç´ çš„æ—¶å€™ï¼Œæ‰ä¼šçœŸæ­£æ‰©å®¹æ¥å­˜æ”¾å…ƒç´ ï¼Œå³å‘æ•°ç»„ä¸­æ·»åŠ ç¬¬ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œæ•°ç»„å®¹å™¨æ‰©ä¸º10</strong></p></li><li><p>å¸¦åˆå§‹å®¹é‡å‚æ•°çš„æ„é€ å‡½æ•°ï¼šè¿™ç§æ–¹æ³•ç»™æ„é€ å™¨ä¼ ä¸€ä¸ªåˆå§‹åŒ–å‚æ•°ï¼Œè¡¨ç¤ºæƒ³åˆ›å»ºå®¹å™¨å…ƒç´ çš„ä¸ªæ•°ï¼Œä¹‹åä¼šæ¯”è¾ƒè¯¥å‚æ•°æ˜¯å¦å¤§äº0</p><ol><li>å¦‚æœå¤§äº0ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ªè¯¥å‚æ•°å¤§å°çš„æ•°ç»„ï¼Œå¹¶æŠŠå®ƒèµ‹ç»™elementData</li><li>å¦‚æœç­‰äº0ï¼Œå°±ä¼šèµ‹ä¸€ä¸ªç©ºæ•°ç»„</li><li>å¦‚æœå°äº0ï¼Œå°±ä¼šæŠ¥å¼‚å¸¸</li></ol></li><li><p>å¸¦collectionå…ƒç´ çš„æ„é€ å‡½æ•°ï¼ˆç”¨çš„å°‘ï¼‰ï¼šè¿™ç§æ–¹æ³•ä¼šç»™æ„é€ å™¨ä¼ ä¸€ä¸ªé›†åˆï¼Œé¦–å…ˆä¼šæŠŠè¯¥é›†åˆè½¬åŒ–ä¸ºæ•°ç»„ï¼Œä¹‹ååˆ¤æ–­è¯¥æ•°ç»„é•¿åº¦æ˜¯å¦ä¸º0</p><ol><li>å¦‚æœç­‰äº0ï¼šåˆ™ç›´æ¥åˆ›å»ºä¸€ä¸ªç©ºæ•°ç»„ï¼Œèµ‹ç»™elementData</li><li>å¦‚æœä¸ç­‰äº0ï¼šé‚£ä¹ˆä¼šåˆ¤æ–­è¯¥æ•°ç»„çš„ç±»ç±»å‹æ˜¯å¦ä¸ºObject[].classï¼ˆå› ä¸ºtoArray()æ–¹æ³•ä¸ä¸€å®šä¼šè¿”å›Object[]ç±»å‹çš„é›†åˆï¼‰</li></ol></li></ol><h2 id="ä½¿ç”¨add-æ–¹æ³•æ¥æ·»åŠ å…ƒç´ "><a href="#ä½¿ç”¨add-æ–¹æ³•æ¥æ·»åŠ å…ƒç´ " class="headerlink" title="ä½¿ç”¨add()æ–¹æ³•æ¥æ·»åŠ å…ƒç´ "></a>ä½¿ç”¨add()æ–¹æ³•æ¥æ·»åŠ å…ƒç´ </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å°†æŒ‡å®šçš„å…ƒç´ è¿½åŠ åˆ°æ­¤åˆ—è¡¨çš„æœ«å°¾ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">add</span><span class="params">(E e)</span> &#123;</span><br><span class="line">    <span class="comment">// åŠ å…ƒç´ ä¹‹å‰ï¼Œå…ˆè°ƒç”¨ensureCapacityInternalæ–¹æ³•</span></span><br><span class="line">    ensureCapacityInternal(size + <span class="number">1</span>);  <span class="comment">// Increments modCount!!</span></span><br><span class="line">    <span class="comment">// è¿™é‡Œçœ‹åˆ°ArrayListæ·»åŠ å…ƒç´ çš„å®è´¨å°±ç›¸å½“äºä¸ºæ•°ç»„èµ‹å€¼</span></span><br><span class="line">    elementData[size++] = e;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é¦–å…ˆä¼šè°ƒç”¨<code>ensureCapacityInternal</code>æ–¹æ³•ï¼Œä¹‹åç»™elementDataæ•°ç»„èµ‹å€¼ï¼Œ</p><p>é‚£ä¹ˆ<code>ensureCapacityInternal</code>æ–¹æ³•æ˜¯å¹²å˜›çš„å‘¢ï¼Ÿ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¡®ä¿å†…éƒ¨å®¹é‡è¾¾åˆ°æŒ‡å®šçš„æœ€å°å®¹é‡ã€‚</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">ensureCapacityInternal</span><span class="params">(<span class="type">int</span> minCapacity)</span> &#123;</span><br><span class="line">    ensureExplicitCapacity(calculateCapacity(elementData, minCapacity));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ƒæ˜¯ç¡®ä¿å†…éƒ¨å®¹é‡è¾¾åˆ°äº†æŒ‡å®šçš„æœ€å°å®¹é‡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ç»™è¯¥æ–¹æ³•ä¼ å…¥size+1æ—¶ï¼Œå°±è¡¨ç¤ºåˆ¤æ–­æˆ‘å®¹å™¨ä¸­è¿˜èƒ½ä¸èƒ½å†æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœèƒ½ï¼Œæˆ‘å°±æŠŠå…ƒç´ æ·»åŠ è¿›æ¥ã€‚</p><p>é‚£ä¹ˆ<code>calculateCapacity</code>æ–¹æ³•æ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ®ç»™å®šçš„æœ€å°å®¹é‡å’Œå½“å‰æ•°ç»„å…ƒç´ æ¥è®¡ç®—æ‰€éœ€å®¹é‡ã€‚</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">calculateCapacity</span><span class="params">(Object[] elementData, <span class="type">int</span> minCapacity)</span> &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœå½“å‰æ•°ç»„å…ƒç´ ä¸ºç©ºæ•°ç»„ï¼ˆåˆå§‹æƒ…å†µï¼‰ï¼Œè¿”å›é»˜è®¤å®¹é‡å’Œæœ€å°å®¹é‡ä¸­çš„è¾ƒå¤§å€¼ä½œä¸ºæ‰€éœ€å®¹é‡</span></span><br><span class="line">    <span class="keyword">if</span> (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123;</span><br><span class="line">        <span class="keyword">return</span> Math.max(DEFAULT_CAPACITY, minCapacity);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å¦åˆ™ç›´æ¥è¿”å›æœ€å°å®¹é‡</span></span><br><span class="line">    <span class="keyword">return</span> minCapacity;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯¥æ–¹æ³•è®¡ç®—æ·»åŠ å…ƒç´ æ‰€éœ€å®¹å™¨å¤§å°ï¼ˆæ€»çš„å®¹å™¨å¤§å°ï¼Œä¸åªæ˜¯è¿™æ¬¡æ·»åŠ çš„å…ƒç´ ä¸ªæ•°ï¼‰ï¼Œå¦‚æœelementDataä¸ºç©ºæ•°ç»„ï¼Œå¦‚æœæ‰€éœ€å®¹å™¨å¤§å°å°äº10ï¼Œå°±è¿”å›10ï¼Œå¦‚æœå¤§äº10ï¼Œå°±è¿”å›æ‰€éœ€å®¹å™¨ï¼Œå¦‚æœå½“å‰æ•°ç»„ä¸ä¸ºç©ºæ•°ç»„ï¼Œå°±è¿”å›æ‰€éœ€å®¹å™¨å¤§å°ã€‚<strong>æ€»ä¹‹ï¼Œè¿™ä¸ªæ–¹æ³•è¦ä¹ˆè¿”å›10ï¼ˆåªåœ¨åˆšå¼€å§‹å¾€æ•°ç»„ä¸­æ·»åŠ å…ƒç´ ï¼‰ï¼Œè¦ä¹ˆè¿”å›æ‰€éœ€å®¹å™¨å¤§å°ã€‚</strong><br>è®¡ç®—å‡ºæ‰€éœ€å®¹å™¨å¤§å°åï¼Œå°±è¦åˆ¤æ–­æˆ‘ç°åœ¨çš„æ•°ç»„å¤§å°å¤Ÿä¸å¤Ÿæ»¡è¶³æ‰€éœ€å®¹å™¨å¤§å°ï¼Œå½“ä¸æ»¡è¶³æ—¶ï¼Œå°±éœ€è¦æ‰©å®¹<code>ensureExplictCapacity</code>æ–¹æ³•å°±æ˜¯ç”¨æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹çš„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">ensureExplicitCapacity</span><span class="params">(<span class="type">int</span> minCapacity)</span> &#123;</span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="comment">//åˆ¤æ–­å½“å‰æ•°ç»„å®¹é‡æ˜¯å¦è¶³ä»¥å­˜å‚¨minCapacityä¸ªå…ƒç´ </span></span><br><span class="line">    <span class="keyword">if</span> (minCapacity - elementData.length &gt; <span class="number">0</span>)</span><br><span class="line">        <span class="comment">//è°ƒç”¨growæ–¹æ³•è¿›è¡Œæ‰©å®¹</span></span><br><span class="line">        grow(minCapacity);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¦‚æœæ‰€éœ€å®¹å™¨å¤§å°å¤§äºå½“å‰å®¹å™¨å®¹é‡çš„è¯ï¼Œå°±éœ€è¦è°ƒç”¨<code>grow</code>æ–¹æ³•æ¥æ‰©å®¹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¦åˆ†é…çš„æœ€å¤§æ•°ç»„å¤§å°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">MAX_ARRAY_SIZE</span> <span class="operator">=</span> Integer.MAX_VALUE - <span class="number">8</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ArrayListæ‰©å®¹çš„æ ¸å¿ƒæ–¹æ³•ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">grow</span><span class="params">(<span class="type">int</span> minCapacity)</span> &#123;</span><br><span class="line">    <span class="comment">// oldCapacityä¸ºæ—§å®¹é‡ï¼ŒnewCapacityä¸ºæ–°å®¹é‡</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">oldCapacity</span> <span class="operator">=</span> elementData.length;</span><br><span class="line">    <span class="comment">// å°†oldCapacity å³ç§»ä¸€ä½ï¼Œå…¶æ•ˆæœç›¸å½“äºoldCapacity /2ï¼Œ</span></span><br><span class="line">    <span class="comment">// æˆ‘ä»¬çŸ¥é“ä½è¿ç®—çš„é€Ÿåº¦è¿œè¿œå¿«äºæ•´é™¤è¿ç®—ï¼Œæ•´å¥è¿ç®—å¼çš„ç»“æœå°±æ˜¯å°†æ–°å®¹é‡æ›´æ–°ä¸ºæ—§å®¹é‡çš„1.5å€ï¼Œ</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">newCapacity</span> <span class="operator">=</span> oldCapacity + (oldCapacity &gt;&gt; <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç„¶åæ£€æŸ¥æ–°å®¹é‡æ˜¯å¦å¤§äºæœ€å°éœ€è¦å®¹é‡ï¼Œè‹¥è¿˜æ˜¯å°äºæœ€å°éœ€è¦å®¹é‡ï¼Œé‚£ä¹ˆå°±æŠŠæœ€å°éœ€è¦å®¹é‡å½“ä½œæ•°ç»„çš„æ–°å®¹é‡ï¼Œ</span></span><br><span class="line">    <span class="keyword">if</span> (newCapacity - minCapacity &lt; <span class="number">0</span>)</span><br><span class="line">        newCapacity = minCapacity;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœæ–°å®¹é‡å¤§äº MAX_ARRAY_SIZE,è¿›å…¥(æ‰§è¡Œ) `hugeCapacity()` æ–¹æ³•æ¥æ¯”è¾ƒ minCapacity å’Œ MAX_ARRAY_SIZEï¼Œ</span></span><br><span class="line">    <span class="comment">// å¦‚æœminCapacityå¤§äºæœ€å¤§å®¹é‡ï¼Œåˆ™æ–°å®¹é‡åˆ™ä¸º`Integer.MAX_VALUE`ï¼Œå¦åˆ™ï¼Œæ–°å®¹é‡å¤§å°åˆ™ä¸º MAX_ARRAY_SIZE å³ä¸º `Integer.MAX_VALUE - 8`ã€‚</span></span><br><span class="line">    <span class="keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="number">0</span>)</span><br><span class="line">        newCapacity = hugeCapacity(minCapacity);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// minCapacity is usually close to size, so this is a win:</span></span><br><span class="line">    elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ<strong>Aarraylistæ¯æ¬¡æ‰©å®¹ä¹‹åå®¹é‡éƒ½ä¼šå˜æˆåŸæ¥çš„1.5å€å·¦å³ï¼Œå¦‚æœæ˜¯å¶æ•°ï¼Œå°±æ˜¯1.5è¢«ï¼Œå¦‚æœæ˜¯å¥‡æ•°ï¼Œä¸¢å¼ƒå°æ•°ã€‚</strong></p><p>2ä¸ªå˜é‡</p><ul><li>æ—§å®¹å™¨ï¼šåŸå…ˆå®¹å™¨å¤§å°</li><li>æ–°å®¹å™¨ï¼šæ‰©å®¹ä¸ºåŸå…ˆå®¹å™¨1.5å€å¤§å°</li></ul><p>ä¸¤ä¸ªåˆ¤æ–­</p><ul><li>åˆ¤æ–­æ–°å®¹å™¨æ˜¯å¦æ»¡è¶³æœ€å°éœ€è¦å®¹å™¨ï¼Œå¦‚æœä¸æ»¡è¶³ï¼ŒæŠŠæœ€å°éœ€è¦å®¹å™¨èµ‹ç»™æ–°å®¹å™¨</li><li>åˆ¤æ–­æ–°å®¹å™¨å¤§å°æ˜¯å¦è¶…å‡ºæœ€å¤§å®¹å™¨é™åˆ¶ï¼šå¦‚æœè¶…å‡ºï¼Œå°±åˆ¤æ–­æœ€å¤§æ•°ç»„é•¿åº¦æ˜¯å¦æ»¡è¶³æ‰€éœ€æ•°ç»„é•¿åº¦ï¼Œå¦‚æœæ»¡è¶³ï¼ŒæŠŠæœ€å¤§æ•°ç»„é•¿åº¦èµ‹ç»™æ–°å®¹å™¨ï¼Œå¦åˆ™ï¼ŒæŠŠæ•´å‹çš„æœ€å¤§å€¼èµ‹ç»™æ–°å®¹å™¨ã€‚</li></ul><blockquote><p>è¿™é‡Œæœ‰ä¸ªç‚¹éœ€è¦æ³¨æ„ï¼šå®šä¹‰çš„MAX_ARRAY_SIZEæ˜¯Integer_MAX_VALUE-8</p><p>ä¹‹æ‰€ä»¥è¦-8æ˜¯å› ä¸ºæ•°ç»„éœ€è¦8å­—èŠ‚å»å­˜å‚¨å®ƒè‡ªå·±çš„å¤§å°ï¼Œé˜²æ­¢åœ¨åˆ†é…è¾ƒå¤§æ•°ç»„æ—¶é€ æˆå†…å­˜æº¢å‡ºã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">hugeCapacity</span><span class="params">(<span class="type">int</span> minCapacity)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (minCapacity &lt; <span class="number">0</span>) <span class="comment">// overflow</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">OutOfMemoryError</span>();</span><br><span class="line">    <span class="comment">// å¯¹minCapacityå’ŒMAX_ARRAY_SIZEè¿›è¡Œæ¯”è¾ƒ</span></span><br><span class="line">    <span class="comment">// è‹¥minCapacityå¤§ï¼Œå°†Integer.MAX_VALUEä½œä¸ºæ–°æ•°ç»„çš„å¤§å°</span></span><br><span class="line">    <span class="comment">// è‹¥MAX_ARRAY_SIZEå¤§ï¼Œå°†MAX_ARRAY_SIZEä½œä¸ºæ–°æ•°ç»„çš„å¤§å°</span></span><br><span class="line">    <span class="comment">// MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8;</span></span><br><span class="line">    <span class="keyword">return</span> (minCapacity &gt; MAX_ARRAY_SIZE) ?</span><br><span class="line">        Integer.MAX_VALUE :</span><br><span class="line">        MAX_ARRAY_SIZE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>ä¸¾ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜æ‰©å®¹æœºåˆ¶</strong></p><ol><li><strong>å½“æˆ‘ç”¨æ— å‚æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªArrayList()åˆ—è¡¨æ—¶ï¼Œæ­¤æ—¶elementDataæ•°ç»„ä¸º{},å®¹é‡sizeä¸º0</strong></li><li><strong>å½“è°ƒç”¨add()æ–¹æ³•ï¼Œå¾€é‡Œé¢æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œé¦–å…ˆä¼šè°ƒç”¨ensureCapacityInternalæ–¹æ³•æ¥åˆ¤æ–­å½“å‰çš„å†…éƒ¨å®¹å™¨æ˜¯å¦æ»¡è¶³size+1,ä¹Ÿå°±æ˜¯1ï¼Œ</strong></li><li><strong>ä¹‹åå°±ä¼šè°ƒç”¨ensureExplictCapacityæ–¹æ³•æ¥åˆ¤æ–­å½“å‰å®¹å™¨æ˜¯å¦éœ€è¦æ‰©å®¹ï¼Œé¦–å…ˆå®ƒä¼šè®¡ç®—å½“å‰æ‰€éœ€çš„å®¹å™¨å¤§å°ï¼Œï¼ˆè®¡ç®—çš„è§„åˆ™å°±æ˜¯å¦‚æœæˆ‘æ·»åŠ å…ƒç´ å°äº10ï¼Œå°±è¿”å›10ï¼Œè¿™ä¸ª10æ˜¯ArrayListå®šä¹‰çš„é»˜è®¤çš„åˆå§‹å®¹å™¨å¤§å°ï¼‰å› ä¸ºæˆ‘éœ€è¦çš„å®¹å™¨å¤§å°æ˜¯1ï¼Œå°äº10ï¼Œå°±è¿”å›10ï¼ŒensureExplictCapacityæ–¹æ³•å°±ä¼šåŸºäºè¿™ä¸ª10åˆ¤æ–­ï¼Œå½“å‰å®¹å™¨å¤§å°å¤§ä¸å¤§äº10ï¼Œå¦‚æœæ¯”10å°ï¼Œå°±è°ƒç”¨growæ–¹æ³•æ¥è¿›è¡Œæ‰©å®¹</strong></li><li><strong>growæ–¹æ³•ä¸­ä¼šå®šä¹‰ä¸¤ä¸ªå˜é‡ï¼Œä¸€ä¸ªæ˜¯æ—§å®¹é‡ï¼Œä¸€ä¸ªæ˜¯æ–°å®¹é‡ï¼Œæ—§å®¹é‡å°±æ˜¯å½“å‰å®¹å™¨çš„å¤§å°ï¼Œæ–°å®¹é‡æ˜¯å½“å‰å®¹å™¨çš„å®¹é‡åŠ ä¸Šå½“å‰å®¹å™¨å³ç§»ä¸€ä½ï¼ˆä¹Ÿå°±æ˜¯é™¤ä»¥2çš„å®¹é‡ï¼‰ï¼Œå³æ‰©å®¹ä¸ºåŸæ¥çš„1.5å€ï¼Œå› ä¸ºåŸå…ˆå®¹é‡ä¸º0ï¼Œæ‰€ä»¥æ‰©å®¹åå®¹é‡è¿˜æ˜¯0</strong></li><li><strong>ä¹‹åå°±ä¼šåˆ¤æ–­è¿™ä¸ªæ–°å®¹é‡æ»¡ä¸æ»¡è¶³æ‰€éœ€çš„å®¹é‡ï¼Œä¹Ÿå°±æ˜¯10ï¼Œå¦‚æœä¸æ»¡è¶³ï¼Œå°±æŠŠæ‰€éœ€å®¹é‡èµ‹ç»™æ–°å®¹é‡ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™æ–°å®¹é‡å°±ä¸º10ï¼Œ</strong></li><li><strong>ä¹‹åä¼šåˆ¤æ–­è¿™ä¸ªæ–°å®¹å™¨æ˜¯å¦è¶…å‡ºäº†æœ€å¤§æ•°ç»„é•¿åº¦ï¼Œå› ä¸ºæ²¡æœ‰è¶…è¿‡ï¼Œæ‰€ä»¥ï¼Œå°±è°ƒç”¨Arrays.copyOf()æ–¹æ³•æŠŠæ•°æ®æ‹·è´åˆ°æ–°å®¹å™¨å½“ä¸­ã€‚</strong></li><li><strong>ä¹‹åå†æ·»åŠ ç¬¬2.3.4..ä¸ªå…ƒç´ çš„æ—¶å€™ï¼Œåˆå§‹å®¹å™¨10éƒ½æ»¡è¶³ï¼Œæ‰€ä»¥ä¸ä¼šå‘ç”Ÿæ‰©å®¹ï¼Œ</strong></li><li><strong>å½“æ·»åŠ ç¬¬11ä¸ªå…ƒç´ çš„æ—¶å€™ï¼Œè¿™ä¸ªæ—¶å€™æ‰€éœ€å®¹å™¨å¤§äºäº†æ•°ç»„é•¿åº¦ï¼Œæ‰€ä»¥è°ƒç”¨growæ‰©å®¹ä¸º15.</strong></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ArrayList </tag>
            
            <tag> é›†åˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2024/06/04/hello-world/"/>
      <url>/2024/06/04/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      <categories>
          
          <category> hello-world </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title>categories</title>
      <link href="/categories/index.html"/>
      <url>/categories/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>å…³äº</title>
      <link href="/about/index.html"/>
      <url>/about/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/custom.css"/>
      <url>/css/custom.css</url>
      
        <content type="html"><![CDATA[/* é¡µè„šä¸å¤´å›¾é€æ˜ */#footer {  background: transparent !important;}#page-header {  background: transparent !important;}/* ç™½å¤©æ¨¡å¼é®ç½©é€æ˜ */#footer::before {  background: transparent !important;}#page-header::before {  background: transparent !important;}/* å¤œé—´æ¨¡å¼é®ç½©é€æ˜ */[data-theme="dark"] #footer::before {  background: transparent !important;}[data-theme="dark"] #page-header::before {  background: transparent !important;}/* ä¾§è¾¹æ ä¸ªäººä¿¡æ¯å¡ç‰‡åŠ¨æ€æ¸å˜è‰² */#aside-content > .card-widget.card-info {  background: linear-gradient(    -45deg,    #e8d8b9,    #eccec5,    #a3e9eb,    #bdbdf0,    #eec1ea  );  box-shadow: 0 0 5px rgb(66, 68, 68);  position: relative;  background-size: 400% 400%;  -webkit-animation: Gradient 10s ease infinite;  -moz-animation: Gradient 10s ease infinite;  animation: Gradient 10s ease infinite !important;}@-webkit-keyframes Gradient {  0% {    background-position: 0% 50%;  }  50% {    background-position: 100% 50%;  }  100% {    background-position: 0% 50%;  }}@-moz-keyframes Gradient {  0% {    background-position: 0% 50%;  }  50% {    background-position: 100% 50%;  }  100% {    background-position: 0% 50%;  }}@keyframes Gradient {  0% {    background-position: 0% 50%;  }  50% {    background-position: 100% 50%;  }  100% {    background-position: 0% 50%;  }}/* é»‘å¤œæ¨¡å¼é€‚é… */[data-theme="dark"] #aside-content > .card-widget.card-info {  background: #191919ee;}/* ä¸ªäººä¿¡æ¯Follow meæŒ‰é’® */#aside-content > .card-widget.card-info > #card-info-btn {  background-color: #3eb8be;  border-radius: 8px;}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>link</title>
      <link href="/link/index.html"/>
      <url>/link/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>ç”µå½±</title>
      <link href="/movies/index.html"/>
      <url>/movies/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/runtime.js"/>
      <url>/js/runtime.js</url>
      
        <content type="html"><![CDATA[var now=new Date;function createtime(){now.setTime(now.getTime()+1e3);var e=new Date("08/01/2023 00:00:00"),t=Math.trunc(234e8+(now-e)/1e3*17),a=(t/1496e5).toFixed(6),o=new Date("08/09/2023 00:00:00"),n=(now-o)/1e3/60/60/24,r=Math.floor(n),i=(now-o)/1e3/60/60-24*r,s=Math.floor(i);1==String(s).length&&(s="0"+s);var d=(now-o)/1e3/60-1440*r-60*s,l=Math.floor(d);1==String(l).length&&(l="0"+l);var g=(now-o)/1e3-86400*r-3600*s-60*l,b=Math.round(g);1==String(b).length&&(b="0"+b);let c="";c=s<18&&s>=9?` <div style="font-size:13px;font-weight:bold">æœ¬ç«™è¿è¡Œäº† ${r} å¤© ${s} å°æ—¶ ${l} åˆ† ${b} ç§’ <i id="heartbeat" class='fas fa-heartbeat'></i> </div>`<div style="font-size:13px;font-weight:bold">æœ¬ç«™å±…ç„¶è¿è¡Œäº† ${r} å¤© ${s} å°æ—¶ ${l} åˆ† ${b} ç§’ <i id="heartbeat" class='fas fa-heartbeat'></i> ',document.getElementById("workboard")&&(document.getElementById("workboard").innerHTML=c)}setInterval((()=>{createtime()}),1e3);]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>tags</title>
      <link href="/tags/index.html"/>
      <url>/tags/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>éŸ³ä¹</title>
      <link href="/music/index.html"/>
      <url>/music/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>photos</title>
      <link href="/photos/index.html"/>
      <url>/photos/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
  
</search>
