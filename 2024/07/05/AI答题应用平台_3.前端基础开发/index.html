<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>AI答题应用平台_3前端基础开发 | stufz的个人博客</title><meta name="author" content="stufz"><meta name="copyright" content="stufz"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="前端技术选型 Vue3 Vue-cli脚手架 Pinia状态管理 Axios请求库 AcroDesign组件库 前端工程化：ESLint+Prettier+TypeScript QRCode.js前端代码生成 OpenAPI前端代码生成  web前端项目初始化确认环境首先需要确认环境：node.js版本：18.16.0 12# 检查node版本node -v 也可以使用切换和管理node版本的工具">
<meta property="og:type" content="article">
<meta property="og:title" content="AI答题应用平台_3前端基础开发">
<meta property="og:url" content="https://blog.fanzher.site/2024/07/05/AI%E7%AD%94%E9%A2%98%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0_3.%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E5%BC%80%E5%8F%91/index.html">
<meta property="og:site_name" content="stufz的个人博客">
<meta property="og:description" content="前端技术选型 Vue3 Vue-cli脚手架 Pinia状态管理 Axios请求库 AcroDesign组件库 前端工程化：ESLint+Prettier+TypeScript QRCode.js前端代码生成 OpenAPI前端代码生成  web前端项目初始化确认环境首先需要确认环境：node.js版本：18.16.0 12# 检查node版本node -v 也可以使用切换和管理node版本的工具">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://www.fanzher.xyz/img/cover8.jpg">
<meta property="article:published_time" content="2024-07-05T06:25:30.000Z">
<meta property="article:modified_time" content="2024-08-02T07:56:54.114Z">
<meta property="article:author" content="stufz">
<meta property="article:tag" content="Java项目">
<meta property="article:tag" content="AI答题应用平台">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.fanzher.xyz/img/cover8.jpg"><link rel="shortcut icon" href="http://fanzher.xyz/img/favicon.ico"><link rel="canonical" href="https://blog.fanzher.site/2024/07/05/AI%E7%AD%94%E9%A2%98%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0_3.%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E5%BC%80%E5%8F%91/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体中文","cht_to_chs":"你已切换为简体中文","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-right"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'AI答题应用平台_3前端基础开发',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-08-02 15:56:54'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-footer-beautify@1.0.0/lib/runtime.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.2.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://fanzher.xyz/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">13</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://www.fanzher.xyz/img/cover8.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="stufz的个人博客"><span class="site-name">stufz的个人博客</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">AI答题应用平台_3前端基础开发</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-07-05T06:25:30.000Z" title="发表于 2024-07-05 14:25:30">2024-07-05</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-08-02T07:56:54.114Z" title="更新于 2024-08-02 15:56:54">2024-08-02</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E9%A1%B9%E7%9B%AE/">项目</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E9%A1%B9%E7%9B%AE/AI%E7%AD%94%E9%A2%98%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/">AI答题应用平台</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">10.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>52分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="AI答题应用平台_3前端基础开发"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="前端技术选型"><a href="#前端技术选型" class="headerlink" title="前端技术选型"></a>前端技术选型</h1><ul>
<li>Vue3</li>
<li>Vue-cli脚手架</li>
<li>Pinia状态管理</li>
<li>Axios请求库</li>
<li>AcroDesign组件库</li>
<li>前端工程化：ESLint+Prettier+TypeScript</li>
<li>QRCode.js前端代码生成</li>
<li>OpenAPI前端代码生成</li>
</ul>
<h1 id="web前端项目初始化"><a href="#web前端项目初始化" class="headerlink" title="web前端项目初始化"></a>web前端项目初始化</h1><h2 id="确认环境"><a href="#确认环境" class="headerlink" title="确认环境"></a>确认环境</h2><p>首先需要确认环境：node.js版本：18.16.0</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检查node版本</span></span><br><span class="line">node -v</span><br></pre></td></tr></table></figure>
<p>也可以使用切换和管理node版本的工具<a target="_blank" rel="noopener" href="https://github.com/nvm-sh/nvm">nvm</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检查nvm版本</span></span><br><span class="line">nvm -v</span><br></pre></td></tr></table></figure>
<h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><p>使用Vue-CLI来快速初始化vue3的项目，它自动整合了vue-router，TypeSscript、前端工程化等库<br><a target="_blank" rel="noopener" href="https://cli.vuejs.org/zh/">Vue CLI</a><br>安装命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g @vue/cli</span><br></pre></td></tr></table></figure>
<p>安装完之后，使用<code>vue -V</code>来检查是否安装成功。<br>安装成功后，使用如下命令创建初始化工程</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue create [项目名称]</span><br></pre></td></tr></table></figure>
<p>手动选择特性<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fanzher.xyz/img/1722319928745-62b4e0f2-f3e3-4119-a9bc-b9bc0c04491d.png" alt="image.png"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fanzher.xyz/img/1722320117049-11ab89d4-13f7-4ca5-b280-383e9eaaf46e.png" alt="image.png"><br>选择完之后项目就会自动加载这些依赖，然后打开WebStorm，运行<code>npm run server</code>,能正常访问页面，说明初始化成功了。</p>
<h2 id="前端工程化配置"><a href="#前端工程化配置" class="headerlink" title="前端工程化配置"></a><strong>前端工程化配置</strong></h2><p>脚手架已经配置了prettier代码美化、ESLint代码校验，TypeScript类型校验，格式化插件等，不需要自己再配置了。不过webStorm上还需要开启美化插件<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fanzher.xyz/img/1722320592189-0fbe51b3-f377-4303-a358-ee9966560c3a.png" alt="image.png"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fanzher.xyz/img/1722320646226-123c521f-ac87-4d50-8a6c-761139aa403e.png" alt="image.png"><br>:::info<br>有时候ESLint校验比较严格，如果因为它导致的编译错误，可以在.eslintrc.js添加如下”@typescript-eslint&#x2F;ban-ts-comment”: “off”,<br>:::<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fanzher.xyz/img/1722320818280-9c447deb-7da6-4a3d-8dbe-8cb9b5297954.png" alt="image.png"></p>
<h2 id="引入组件库"><a href="#引入组件库" class="headerlink" title="引入组件库"></a>引入组件库</h2><p>引入Acro Design组件库：<br><a target="_blank" rel="noopener" href="https://arco.design/vue/docs/start">Arco Design Vue</a></p>
<blockquote>
<p><strong>注意</strong>：vue的版本需要&gt;&#x3D;3.2.0</p>
</blockquote>
<p>执行安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev @arco-design/web-vue</span><br></pre></td></tr></table></figure>
<p>改变主入口文件main.ts,引入组件库</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&quot;./App.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ArcoVue</span> <span class="keyword">from</span> <span class="string">&quot;@arco-design/web-vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@arco-design/web-vue/dist/arco.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;./router&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>);</span><br><span class="line">app.<span class="title function_">use</span>(router);</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title class_">ArcoVue</span>);</span><br><span class="line">app.<span class="title function_">use</span>(pinia);</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>之后可以在app.vue中随便引入一个组件，看有没有效果。</p>
<h2 id="开发规范"><a href="#开发规范" class="headerlink" title="开发规范"></a>开发规范</h2><p>遵循vue3的组合式API<br><a target="_blank" rel="noopener" href="https://cn.vuejs.org/guide/introduction.html#what-is-vue">Vue.js</a><br><a target="_blank" rel="noopener" href="https://cn.vuejs.org/guide/extras/composition-api-faq.html">组合式 API 常见问答 | Vue.js (vuejs.org)</a><br>示例代码</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=<span class="string">&quot;ts&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h2 id="全局通用布局"><a href="#全局通用布局" class="headerlink" title="全局通用布局"></a>全局通用布局</h2><h3 id="基础布局结构"><a href="#基础布局结构" class="headerlink" title="基础布局结构"></a>基础布局结构</h3><p>在建前端页面的时候，首先需要有一个全局的布局的想象，之后在Layouts目录下新建一个布局，<code>BasitcLayout.vue</code>,在app.vue根组件中引入布局，</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">BasicLayout</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">BasicLayout</span> <span class="keyword">from</span> <span class="string">&quot;@/layouts/BasicLayout.vue&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>然后再AcroDesign组件库中引入布局Layout组件<br><a target="_blank" rel="noopener" href="https://arco.design/vue/component/layout">Arco Design Vue</a><br>选择自己觉得合适的布局<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://fanzher.xyz/img/1722325445610-e3056965-b7f4-4b5b-9ccd-72c4417e90cd.png" alt="image.png"></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;basicLayout&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">a-layout</span> <span class="attr">style</span>=<span class="string">&quot;height: 100vh&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">a-layout-header</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        首部</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">a-layout-header</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">a-layout-content</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        内容</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">a-layout-content</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">a-layout-footer</span> <span class="attr">class</span>=<span class="string">&quot;footer&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        底部</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">a-layout-footer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">a-layout</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h3 id="全局底部栏"><a href="#全局底部栏" class="headerlink" title="全局底部栏"></a>全局底部栏</h3><p>对于底部的内容，通常会添加一些版权信息。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;a-layout-footer <span class="keyword">class</span>=<span class="string">&quot;footer&quot;</span>&gt;</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://xxx&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>xxxx<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line">      &lt;/a-layout-footer&gt;</span><br></pre></td></tr></table></figure>
<h3 id="动态替换内容"><a href="#动态替换内容" class="headerlink" title="动态替换内容"></a>动态替换内容</h3><p>对于content部分，我们需要对于不同的页面展示不同的内容，这时候就需要用到<strong>vue-router</strong>路由组件了<br>具体操作是在router&#x2F;index.ts中，添加页面的路由信息，之后在content中，直接添加<router-view>,这样它就会在页面地址发生改变的时候，自动渲染不同的页面</router-view></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;a-layout-content <span class="keyword">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line">      &lt;/a-layout-content&gt;</span><br></pre></td></tr></table></figure>
<h3 id="全局顶部栏"><a href="#全局顶部栏" class="headerlink" title="全局顶部栏"></a>全局顶部栏</h3><p>对于顶部展示的信息，可以使用AcroDesign提供的菜单组件<strong>Menu</strong>来创建<code>GlobalHeader</code>头部组件。<br><a target="_blank" rel="noopener" href="https://arco.design/vue/component/menu">Arco Design Vue</a></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;a-menu-item</span><br><span class="line">              key=<span class="string">&quot;0&quot;</span></span><br><span class="line">              :style=<span class="string">&quot;&#123; padding: 0, marginRight: &#x27;38px&#x27; &#125;&quot;</span></span><br><span class="line">              disabled</span><br><span class="line">            &gt;</span><br><span class="line">              <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;titleBar&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;logo&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../assets/logo.png&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>范答答<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">            &lt;/a-menu-item&gt;</span><br></pre></td></tr></table></figure>
<h3 id="通用路由菜单"><a href="#通用路由菜单" class="headerlink" title="通用路由菜单"></a>通用路由菜单</h3><p>现有问题：菜单栏都是写死的，而且点击不会跳转到不同页面，可以通过路由功能来灵活展示<br>目标：根据路由配置信息，自动生成菜单的内容<br>实现步骤：</p>
<ol>
<li>提取通用路由文件</li>
<li>菜单组件读取路由，动态渲染不同页面</li>
<li>绑定跳转事件</li>
<li>同步路由的更新到菜单栏高亮</li>
</ol>
<p><strong>提取通用路由文件</strong><br>把router&#x2F;index.ts中的路由变量定义为单独的路由文件routes.ts</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">routes</span>: <span class="title class_">Array</span>&lt;<span class="title class_">RouteRecordRaw</span>&gt; = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;主页&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">HomePage</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  ];</span><br></pre></td></tr></table></figure>
<p>然后在router&#x2F;index.ts中引入路由</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; routes &#125; <span class="keyword">from</span> <span class="string">&quot;@/router/routes&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(process.<span class="property">env</span>.<span class="property">BASE_URL</span>),</span><br><span class="line">  routes,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>菜单组件读取路由，动态渲染菜单项</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; routes &#125; <span class="keyword">from</span> <span class="string">&quot;@/router/routes&quot;</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;a-menu-item v-<span class="keyword">for</span>=<span class="string">&quot;item in visibleRoutes&quot;</span> :key=<span class="string">&quot;item.path&quot;</span>&gt;</span><br><span class="line">             &#123;&#123; item.<span class="property">name</span> &#125;&#125;</span><br><span class="line">           &lt;/a-menu-item&gt;</span><br></pre></td></tr></table></figure>
<p><strong>绑定跳转事件</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="title function_">useRouter</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//点击菜单跳转到对应页面</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">doMenuClick</span> = (<span class="params">key: <span class="built_in">string</span></span>) =&gt; &#123;</span><br><span class="line">  router.<span class="title function_">push</span>(&#123;</span><br><span class="line">    <span class="attr">path</span>: key,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;a-col flex=<span class="string">&quot;auto&quot;</span>&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          <span class="language-xml"><span class="tag">&lt;<span class="name">a-menu</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">mode</span>=<span class="string">&quot;horizontal&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">:default-selected-keys</span>=<span class="string">&quot;selectKeys&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            @<span class="attr">menu-item-click</span>=<span class="string">&quot;doMenuClick&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          &gt;</span></span></span><br><span class="line"><span class="language-xml">              ...</span></span><br></pre></td></tr></table></figure>
<p><strong>同步路由的更新到菜单栏高亮</strong><br>原理：首先点击菜单项&#x3D;》触发点击事件更新路由&#x3D;》更新路由后，同步去更新菜单栏的高亮</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//顶部栏当前选中的菜单项,默认是首页</span></span><br><span class="line"><span class="keyword">const</span> selectKeys = <span class="title function_">ref</span>([<span class="string">&quot;/&quot;</span>]);</span><br><span class="line"><span class="comment">//当发生路由跳转时，自动更新选中的菜单项，由于它是响应式变量，自动渲染选中菜单项对应的页面</span></span><br><span class="line">router.<span class="title function_">afterEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span>, failure</span>) =&gt;</span> &#123;</span><br><span class="line">  selectKeys.<span class="property">value</span> = [to.<span class="property">path</span>];</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><strong>并在模板中引入变量</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;a-col flex=<span class="string">&quot;auto&quot;</span>&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          <span class="language-xml"><span class="tag">&lt;<span class="name">a-menu</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">mode</span>=<span class="string">&quot;horizontal&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">:default-selected-keys</span>=<span class="string">&quot;selectKeys&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            @<span class="attr">menu-item-click</span>=<span class="string">&quot;doMenuClick&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          &gt;</span></span></span><br><span class="line"><span class="language-xml">              ...</span></span><br></pre></td></tr></table></figure>
<p><strong>其他能力</strong><br>通过在路由中添加字段，来展示菜单的显隐</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/hide&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;隐藏页&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">HidePage</span>,</span><br><span class="line">    <span class="attr">meta</span>: &#123;</span><br><span class="line">      <span class="attr">hideInMenu</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<p>然后就可以使用该字段来过滤路由数组，只展示需要显示的内容</p>
<h3 id="支持多套布局"><a href="#支持多套布局" class="headerlink" title="支持多套布局"></a>支持多套布局</h3><p>并不是所有的页面都使用一套布局，比如用户的注册登录页，没必要设置顶部栏的信息。<br><strong>思路</strong><br>使用vue-router自带的子路由机制，可以天然的实现布局和路由的嵌套，不同的父路由指定不同的layout</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/user&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;用户页&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">UserLayout</span>,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&quot;/user/login&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;用户登录页&quot;</span>, <span class="attr">component</span>: <span class="title class_">UserLoginPage</span> &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;/user/register&quot;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;用户注册页&quot;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">UserRegisterPage</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">meta</span>: &#123;</span><br><span class="line">      <span class="attr">hideInMenu</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<p>在App.vue中，需要选择哪些路由使用哪一种布局，根据不同路由自动渲染</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-if</span>=<span class="string">&quot;route.path.startsWith(&#x27;/user&#x27;)&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">router-view</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-else</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">BasicLayout</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">BasicLayout</span> <span class="keyword">from</span> <span class="string">&quot;@/layouts/BasicLayout.vue&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; useRoute &#125; <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> route = <span class="title function_">useRoute</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="请求"><a href="#请求" class="headerlink" title="请求"></a>请求</h2><p>前后端怎么进行连接呢？需要前端发送<strong>请求</strong>调用后端的<strong>接口。</strong><br><strong>思路：</strong></p>
<ol>
<li>使用Axios网络请求库来自定义请求和响应拦截器、请求地址等相关配置</li>
<li>使用OpenAPI自动生成前端请求后端的接口</li>
</ol>
<hr>
<h3 id="请求工具库Axios"><a href="#请求工具库Axios" class="headerlink" title="请求工具库Axios"></a>请求工具库Axios</h3><p>Axiox官网<br><a target="_blank" rel="noopener" href="https://axios-http.com/docs/intro">Getting Started | Axios Docs</a><br>下载axios</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install axios</span><br></pre></td></tr></table></figure>
<h3 id="全局自定义请求"><a href="#全局自定义请求" class="headerlink" title="全局自定义请求"></a>全局自定义请求</h3><p>需要编写request.ts，自定义全局的请求地址，超时时间、请求和响应拦截器等信息。<br>比如可以在全局响应拦截器中，通过响应的data中，获取后端返回的数据，比如code，检验code是否合法。</p>
<blockquote>
<p>注意：在创建axios请求时，一定要加<code>**withCredentials: true**</code>**,**否则在发送请求的时候不会携带cookie，无法完成登录功能</p>
</blockquote>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Message</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@arco-design/web-vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> myAxios = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="string">&quot;xxx&quot;</span>,</span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">60000</span>,</span><br><span class="line">  <span class="attr">withCredentials</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Add a request interceptor</span></span><br><span class="line">myAxios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="keyword">function</span> (<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="comment">// Do something before request is sent</span></span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="comment">// Do something with request error</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Add a response interceptor</span></span><br><span class="line">myAxios.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="keyword">function</span> (<span class="params">response</span>) &#123;</span><br><span class="line">    <span class="comment">// Any status code that lie within the range of 2xx cause this function to trigger</span></span><br><span class="line">    <span class="comment">// Do something with response data</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(response);</span><br><span class="line">    <span class="keyword">const</span> &#123; data &#125; = response;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (data.<span class="property">code</span> === <span class="number">40100</span>) &#123;</span><br><span class="line">      <span class="comment">//如果不是获取用户信息的请求，或者当前页面已经在登录页，则跳转到登录页</span></span><br><span class="line">      <span class="keyword">if</span> (</span><br><span class="line">        !response.<span class="property">request</span>.<span class="property">responseURL</span>.<span class="title function_">includes</span>(<span class="string">&quot;/user/get/login&quot;</span>) &amp;&amp;</span><br><span class="line">        !<span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">pathname</span>.<span class="title function_">includes</span>(<span class="string">&quot;/user/login&quot;</span>)</span><br><span class="line">      ) &#123;</span><br><span class="line">        <span class="title class_">Message</span>.<span class="title function_">warning</span>(<span class="string">&quot;请先登录&quot;</span>);</span><br><span class="line">        <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> = <span class="string">`/user/login?redirect=<span class="subst">$&#123;<span class="variable language_">window</span>.location.href&#125;</span>`</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="comment">// Any status codes that falls outside the range of 2xx cause this function to trigger</span></span><br><span class="line">    <span class="comment">// Do something with response error</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> myAxios;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="自动生成请求代码"><a href="#自动生成请求代码" class="headerlink" title="自动生成请求代码"></a>自动生成请求代码</h3><p>传统的方法需要为每一个接口，编写一个请求，现在OpenAPI可以通过后端生成的接口文档，自动生成对后端接口的请求。<br><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/@umijs/openapi">@umijs&#x2F;openapi</a><br>安装命令</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i --save-dev <span class="meta">@umijs</span>/openapi</span><br></pre></td></tr></table></figure>
<p>在项目根目录下，新建<code>openapi.config.ts</code>文件，根据自己的需要定制生成的代码</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; generateService &#125; = <span class="built_in">require</span>(<span class="string">&quot;@umijs/openapi&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_">generateService</span>(&#123;</span><br><span class="line">  <span class="attr">requestLibPath</span>: <span class="string">&quot;import request from &#x27;@/request&#x27;&quot;</span>,</span><br><span class="line">  <span class="attr">schemaPath</span>: <span class="string">&quot;http://localhost:8101/api/v2/api-docs&quot;</span>,</span><br><span class="line">  <span class="attr">serversPath</span>: <span class="string">&quot;./src&quot;</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>requestLibPath：请求库路径，这里选择自己通过axios自定义的请求文件</li>
<li>schemaPath：请求的接口文档地址</li>
<li>serversPath：生成文件保存的位置</li>
</ul>
<p>在package.json中，在script添加<code>&quot;openapi&quot; : &quot;ts-node openapi.config.ts&quot;</code><br>然后运行openapi，如果报错，可以把ts-node换成node<br>如果有报错，需要在.eslintrc.js中添加校验规则</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="string">&quot;no-console&quot;</span>: process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&quot;production&quot;</span> ? <span class="string">&quot;warn&quot;</span> : <span class="string">&quot;off&quot;</span>,</span><br><span class="line">    <span class="string">&quot;no-debugger&quot;</span>: process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&quot;production&quot;</span> ? <span class="string">&quot;warn&quot;</span> : <span class="string">&quot;off&quot;</span>,</span><br><span class="line">    <span class="string">&quot;@typescript-eslint/ban-ts-comment&quot;</span>: <span class="string">&quot;off&quot;</span>,</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<h2 id="全局状态管理"><a href="#全局状态管理" class="headerlink" title="全局状态管理"></a>全局状态管理</h2><p>全局状态管理就是对于所有的页面，都共享的变量，而不是属于某一个具体的页面。<br>通常把用户的登录信息作为全局共享的变量，因为每个页面都需要用到用户登录信息。<br><strong>Pinia</strong>是一个主流的全局状态管理库<br><a target="_blank" rel="noopener" href="https://pinia.vuejs.org/zh/getting-started.html">Pinia 🍍</a><br>1.首先安装pinia</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install pinia</span><br></pre></td></tr></table></figure>
<p>2.之后在项目入口文件<code>main.ts</code>中引入组件</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&quot;./App.vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>);</span><br><span class="line"><span class="keyword">const</span> pinia = <span class="title function_">createPinia</span>();</span><br><span class="line">app.<span class="title function_">use</span>(pinia);</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>3.定义状态，在store目录下新建user模块，定义用户的状态、远程获取、修改状态等</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; getLoginUserUsingGet &#125; <span class="keyword">from</span> <span class="string">&quot;@/api/userController&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">AccessEnum</span> <span class="keyword">from</span> <span class="string">&quot;@/access/accessEnum&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//登录用户信息全局状态</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useLoginUserStore = <span class="title function_">defineStore</span>(<span class="string">&quot;loginUser&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> loginUser = ref&lt;<span class="variable constant_">API</span>.<span class="property">LoginUserVO</span>&gt;(&#123;</span><br><span class="line">    <span class="attr">userName</span>: <span class="string">&quot;未登录&quot;</span>,</span><br><span class="line">    <span class="attr">userAvatar</span>:</span><br><span class="line">      <span class="string">&quot;https://p1-arco.byteimg.com/tos-cn-i-uwbnlip3yd/3ee5f13fb09879ecb5185e440cef6eb9123.png~tplv-uwbnlip3yd-webp.webp&quot;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">setLoginUser</span>(<span class="params">newLoginUser: API.LoginUserVO</span>) &#123;</span><br><span class="line">    loginUser.<span class="property">value</span> = newLoginUser;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 获取登录用户信息</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fetchLoginUser</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">getLoginUserUsingGet</span>();</span><br><span class="line">    <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">code</span> === <span class="number">0</span> &amp;&amp; res.<span class="property">data</span>.<span class="property">data</span>) &#123;</span><br><span class="line">      loginUser.<span class="property">value</span> = res.<span class="property">data</span>.<span class="property">data</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      loginUser.<span class="property">value</span> = &#123; <span class="attr">userRole</span>: <span class="title class_">AccessEnum</span>.<span class="property">NOT_LOGIN</span>, <span class="attr">userName</span>: <span class="string">&quot;未登录&quot;</span> &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123; loginUser, setLoginUser, fetchLoginUser &#125;;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>4.使用状态，可以直接使用store中导出的状态变量和函数<br>可以在首次进入页面时，尝试获取用户登录信息</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> loginUserStore = <span class="title function_">useLoginUserStore</span>();</span><br><span class="line">loginUserStore.<span class="title function_">fetchLoginUser</span>();</span><br></pre></td></tr></table></figure>
<p>在任何页面都可以直接使用该状态变量</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(loginUserStore.<span class="property">loginUser</span>) &#125;&#125;</span><br></pre></td></tr></table></figure>
<p>顶部栏右侧展示用户信息</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;a-col flex=<span class="string">&quot;100px&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;loginUserStore.loginUser.id&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;&#123; loginUserStore.loginUser.userName ?? &quot;无名&quot; &#125;&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">a-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/user/login&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">a-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/a-col&gt;</span><br></pre></td></tr></table></figure>
<h2 id="全局权限管理"><a href="#全局权限管理" class="headerlink" title="全局权限管理"></a>全局权限管理</h2><p>需求：能够灵活的配置每个页面的访问权限，由全局的权限校验管理进行校验和拦截，不需要在每个页面中添加权限校验，简化开发<br>实现方案：</p>
<ol>
<li>在路由配置文件，定义页面的访问权限</li>
<li>使用全局权限校验器，当每次访问一个页面时，先看该页面的路由中是否配置相关权限，并进行相应的拦截</li>
</ol>
<p>新建一个access目录，所有权限相关的文件都放在这里面，模块化管理，只要不引入，就不会生效<br>定义权限枚举</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 权限定义</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">AccessEnum</span> = &#123;</span><br><span class="line">  <span class="attr">NOT_LOGIN</span>: <span class="string">&quot;notLogin&quot;</span>,</span><br><span class="line">  <span class="attr">USER</span>: <span class="string">&quot;user&quot;</span>,</span><br><span class="line">  <span class="attr">ADMIN</span>: <span class="string">&quot;admin&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">AccessEnum</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>routes.ts中添加测试路由</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   <span class="attr">path</span>: <span class="string">&quot;/admin/user&quot;</span>,</span><br><span class="line">   <span class="attr">name</span>: <span class="string">&quot;用户管理&quot;</span>,</span><br><span class="line">   <span class="attr">component</span>: <span class="title class_">AdminUserPage</span>,</span><br><span class="line">   <span class="attr">meta</span>: &#123;</span><br><span class="line">     <span class="attr">access</span>: <span class="title class_">AccessEnum</span>.<span class="property">ADMIN</span>,</span><br><span class="line">   &#125;,</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure>
<p>编写通用的权限校验方法<br>将权限校验方法抽离出一个公共的方法，checkAccess.ts</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">AccessEnum</span> <span class="keyword">from</span> <span class="string">&quot;@/access/accessEnum&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">checkAccess</span> = (<span class="params"></span></span><br><span class="line"><span class="params">  loginUser: API.LoginUserVO,</span></span><br><span class="line"><span class="params">  needAccess = AccessEnum.NOT_LOGIN</span></span><br><span class="line"><span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> loginUserAccess = loginUser?.<span class="property">userRole</span> ?? <span class="title class_">AccessEnum</span>.<span class="property">NOT_LOGIN</span>;</span><br><span class="line">  <span class="comment">//如果不需要登录权限，直接通行</span></span><br><span class="line">  <span class="keyword">if</span> (needAccess === <span class="title class_">AccessEnum</span>.<span class="property">NOT_LOGIN</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//如果需要用户权限才能访问</span></span><br><span class="line">  <span class="keyword">if</span> (needAccess === <span class="title class_">AccessEnum</span>.<span class="property">USER</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (loginUserAccess === <span class="title class_">AccessEnum</span>.<span class="property">NOT_LOGIN</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//如果需要管理员权限才能访问</span></span><br><span class="line">  <span class="keyword">if</span> (needAccess === <span class="title class_">AccessEnum</span>.<span class="property">ADMIN</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (loginUserAccess !== <span class="title class_">AccessEnum</span>.<span class="property">ADMIN</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> checkAccess;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>编写全局权限校验核心文件index.ts<br>思路：</p>
<ol>
<li>首先判断页面是否需要登录权限，如果不需要，直接放行</li>
<li>如果需要登录<ol>
<li>如果未登录，跳转到登录页面</li>
<li>如果已登录，判断已登录用户是否有访问页面的权限，如果没有，则跳转到无权限页面</li>
</ol>
</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;@/router&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useLoginUserStore &#125; <span class="keyword">from</span> <span class="string">&quot;@/store/userStore&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">AccessEnum</span> <span class="keyword">from</span> <span class="string">&quot;@/access/accessEnum&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> checkAccess <span class="keyword">from</span> <span class="string">&quot;@/access/checkAccess&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//进入页面前，进行拦截校验</span></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="keyword">async</span> (to, <span class="keyword">from</span>, next) =&gt; &#123;</span><br><span class="line">  <span class="comment">//获取当前登录用户</span></span><br><span class="line">  <span class="keyword">const</span> loginUserStore = <span class="title function_">useLoginUserStore</span>();</span><br><span class="line">  <span class="keyword">let</span> loginUser = loginUserStore.<span class="property">loginUser</span>;</span><br><span class="line">  <span class="keyword">if</span> (!loginUser || !loginUser.<span class="property">userRole</span>) &#123;</span><br><span class="line">    <span class="keyword">await</span> loginUserStore.<span class="title function_">fetchLoginUser</span>();</span><br><span class="line">    loginUser = loginUserStore.<span class="property">loginUser</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//获取当前想要访问的页面需要的权限</span></span><br><span class="line">  <span class="keyword">const</span> needAccess = (to.<span class="property">meta</span>?.<span class="property">access</span> <span class="keyword">as</span> <span class="built_in">string</span>) ?? <span class="title class_">AccessEnum</span>.<span class="property">NOT_LOGIN</span>;</span><br><span class="line">  <span class="comment">//要跳转的页面必须登录</span></span><br><span class="line">  <span class="keyword">if</span> (needAccess != <span class="title class_">AccessEnum</span>.<span class="property">NOT_LOGIN</span>) &#123;</span><br><span class="line">    <span class="comment">//如果当前用户没有登录，需要跳转到登录页面，先进行登录</span></span><br><span class="line">    <span class="keyword">if</span> (</span><br><span class="line">      !loginUser ||</span><br><span class="line">      !loginUser.<span class="property">userRole</span> ||</span><br><span class="line">      loginUser.<span class="property">userRole</span> === <span class="title class_">AccessEnum</span>.<span class="property">NOT_LOGIN</span></span><br><span class="line">    ) &#123;</span><br><span class="line">      <span class="title function_">next</span>(<span class="string">`/user/login?redirect=<span class="subst">$&#123;to.fullPath&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//如果已经登录，那么判断权限是否足够，如果不够，跳转到无权限页</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="title function_">checkAccess</span>(loginUser, needAccess)) &#123;</span><br><span class="line">      <span class="title function_">next</span>(<span class="string">`/noAuth`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">next</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：pinia的初始化，必须放在这段代码的前面，所以需要将useLoginUserState放到router.beforeEach()里面</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://pinia.vuejs.org/zh/core-concepts/outside-component-usage.html">Pinia</a><a target="_blank" rel="noopener" href="https://pinia.vuejs.org/zh/core-concepts/outside-component-usage.html"> 🍍</a><br>在程序入口文件main.ts中引入该目录就可以了</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;@/access&quot;</span>;</span><br></pre></td></tr></table></figure>
<p><strong>根据不同权限渲染不同菜单栏</strong><br>需求：根据不同的权限显示不同的菜单栏<br>原理：跟上面控制路由的显隐一样，通过在路由中添加权限字段，来进行筛选<br>例如</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/answer/result/:id&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;答题结果&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">AnswerResultPage</span>,</span><br><span class="line">    <span class="attr">props</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">meta</span>: &#123;</span><br><span class="line">      <span class="attr">hideInMenu</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">access</span>: <span class="title class_">AccessEnum</span>.<span class="property">USER</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> visibleRoutes = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> routes.<span class="title function_">filter</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (item.<span class="property">meta</span>?.<span class="property">hideInMenu</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//根据权限隐藏菜单栏</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="title function_">checkAccess</span>(loginUserStore.<span class="property">loginUser</span>, item.<span class="property">meta</span>?.<span class="property">access</span> <span class="keyword">as</span> <span class="built_in">string</span>)) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">useRouter</span>();</span><br><span class="line"><span class="comment">//顶部栏当前选中的菜单项,默认是首页</span></span><br><span class="line"><span class="keyword">const</span> selectKeys = <span class="title function_">ref</span>([<span class="string">&quot;/&quot;</span>]);</span><br><span class="line"><span class="comment">//当发生路由跳转时，自动更新选中的菜单项，由于它是响应式变量，自动渲染选中菜单项对应的页面</span></span><br><span class="line">router.<span class="title function_">afterEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span>, failure</span>) =&gt;</span> &#123;</span><br><span class="line">  selectKeys.<span class="property">value</span> = [to.<span class="property">path</span>];</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//点击菜单跳转到对应页面</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">doMenuClick</span> = (<span class="params">key: <span class="built_in">string</span></span>) =&gt; &#123;</span><br><span class="line">  router.<span class="title function_">push</span>(&#123;</span><br><span class="line">    <span class="attr">path</span>: key,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="全局入口文件"><a href="#全局入口文件" class="headerlink" title="全局入口文件"></a>全局入口文件</h2><p>可以在App.vue中预留一个初始化逻辑代码</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 全局初始化函数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">init</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;欢迎来到范答答AI答题应用平台&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">init</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="通用组件-MarkDown编辑器"><a href="#通用组件-MarkDown编辑器" class="headerlink" title="通用组件-MarkDown编辑器"></a>通用组件-MarkDown编辑器</h2><p>推荐的一套markdown编辑器：<a target="_blank" rel="noopener" href="https://github.com/bytedance/bytemd">GitHub - bytedance&#x2F;bytemd: ByteMD v1 repository</a><br>下载编辑器主题、gfm表格支持、highlight代码高亮等插件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i @bytemd/vue-next</span><br><span class="line">npm i @bytemd/plugin-highlight @bytemd/plugin-gfm</span><br></pre></td></tr></table></figure>
<p>新建MdEditor组件</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Editor</span> <span class="attr">:value</span>=<span class="string">&quot;value&quot;</span> <span class="attr">:plugins</span>=<span class="string">&quot;plugins&quot;</span> @<span class="attr">change</span>=<span class="string">&quot;handleChange&quot;</span> /&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> gfm <span class="keyword">from</span> <span class="string">&quot;@bytemd/plugin-gfm&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; <span class="title class_">Editor</span>, <span class="title class_">Viewer</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@bytemd/vue&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> plugins = [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">gfm</span>(),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// Add more plugins here</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">components</span>: &#123; <span class="title class_">Editor</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> &#123; <span class="attr">value</span>: <span class="string">&quot;&quot;</span>, plugins &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">handleChange</span>(<span class="params">v</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.<span class="property">value</span> = v;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>新建MdViewer组件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;Viewer :value=&quot;value&quot; :plugins=&quot;plugins&quot; /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">  import &#123; Viewer &#125; from &quot;@bytemd/vue-next&quot;;</span><br><span class="line">  import highlight from &quot;@bytemd/plugin-highlight&quot;;</span><br><span class="line">  import gfm from &quot;@bytemd/plugin-gfm&quot;;</span><br><span class="line">  import &#123; withDefaults, defineProps &#125; from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line"> * 定义组件类型</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line">  interface Props &#123;</span><br><span class="line">    value: string;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  const plugins = [gfm(), highlight()];</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line"> * 给组件指定初始值</span><br><span class="line"> */</span><br><span class="line">  const props = withDefaults(defineProps&lt;Props&gt;(), &#123;</span><br><span class="line">    value: () =&gt; &quot;&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="通用组件-图片上传"><a href="#通用组件-图片上传" class="headerlink" title="通用组件-图片上传"></a>通用组件-图片上传</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;a-space direction=&quot;vertical&quot; :style=&quot;&#123; width: &#x27;100%&#x27; &#125;&quot;&gt;</span><br><span class="line">    &lt;a-upload</span><br><span class="line">      :fileList=&quot;file ? [file] : []&quot;</span><br><span class="line">      :show-file-list=&quot;false&quot;</span><br><span class="line">      :custom-request=&quot;customRequest&quot;</span><br><span class="line">      &gt;</span><br><span class="line">      &lt;template #upload-button&gt;</span><br><span class="line">        &lt;div</span><br><span class="line">          :class=&quot;`arco-upload-list-item$&#123;</span><br><span class="line">          file &amp;&amp; file.status === &#x27;error&#x27;</span><br><span class="line">          ? &#x27; arco-upload-list-item-error&#x27;</span><br><span class="line">          : &#x27;&#x27;</span><br><span class="line">          &#125;`&quot;</span><br><span class="line">          &gt;</span><br><span class="line">          &lt;div</span><br><span class="line">            class=&quot;arco-upload-list-picture custom-upload-avatar&quot;</span><br><span class="line">            v-if=&quot;file &amp;&amp; file.url&quot;</span><br><span class="line">            &gt;</span><br><span class="line">            &lt;img :src=&quot;file.url&quot; /&gt;</span><br><span class="line">            &lt;div class=&quot;arco-upload-list-picture-mask&quot;&gt;</span><br><span class="line">              &lt;IconEdit /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;a-progress</span><br><span class="line">              v-if=&quot;file.status === &#x27;uploading&#x27; &amp;&amp; file.percent &lt; 100&quot;</span><br><span class="line">              :percent=&quot;file.percent&quot;</span><br><span class="line">              type=&quot;circle&quot;</span><br><span class="line">              size=&quot;mini&quot;</span><br><span class="line">              :style=&quot;&#123;</span><br><span class="line">              position: &#x27;absolute&#x27;,</span><br><span class="line">              left: &#x27;50%&#x27;,</span><br><span class="line">              top: &#x27;50%&#x27;,</span><br><span class="line">              transform: &#x27;translateX(-50%) translateY(-50%)&#x27;,</span><br><span class="line">              &#125;&quot;</span><br><span class="line">              /&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;arco-upload-picture-card&quot; v-else&gt;</span><br><span class="line">            &lt;div class=&quot;arco-upload-picture-card-text&quot;&gt;</span><br><span class="line">              &lt;IconPlus /&gt;</span><br><span class="line">              &lt;div style=&quot;margin-top: 10px; font-weight: 600&quot;&gt;上传&lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/a-upload&gt;</span><br><span class="line">  &lt;/a-space&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">  import &#123; IconEdit, IconPlus &#125; from &quot;@arco-design/web-vue/es/icon&quot;;</span><br><span class="line">  import &#123; ref, withDefaults, defineProps &#125; from &quot;vue&quot;;</span><br><span class="line">  import &#123; uploadFileUsingPost &#125; from &quot;@/api/fileController&quot;;</span><br><span class="line">  import &#123; Message &#125; from &quot;@arco-design/web-vue&quot;;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line"> * 定义组件属性类型</span><br><span class="line"> */</span><br><span class="line">  interface Props &#123;</span><br><span class="line">    biz: string;</span><br><span class="line">    onChange?: (url: string) =&gt; void;</span><br><span class="line">      value?: string;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line"> * 给组件指定初始值</span><br><span class="line"> */</span><br><span class="line">  const props = withDefaults(defineProps&lt;Props&gt;(), &#123;</span><br><span class="line">    value: () =&gt; &quot;&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  const file = ref();</span><br><span class="line">  if (props.value) &#123;</span><br><span class="line">    file.value = &#123;</span><br><span class="line">      url: props.value,</span><br><span class="line">      percent: 100,</span><br><span class="line">      status: &quot;done&quot;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 自定义请求</span><br><span class="line">  const customRequest = async (option: any) =&gt; &#123;</span><br><span class="line">    const &#123; onError, onSuccess, fileItem &#125; = option;</span><br><span class="line"></span><br><span class="line">    const res: any = await uploadFileUsingPost(</span><br><span class="line">      &#123; biz: props.biz &#125;,</span><br><span class="line">      &#123;&#125;,</span><br><span class="line">      fileItem.file</span><br><span class="line">    );</span><br><span class="line">    if (res.data.code === 0 &amp;&amp; res.data.data) &#123;</span><br><span class="line">      const url = res.data.data;</span><br><span class="line">      file.value = &#123;</span><br><span class="line">        name: fileItem.name,</span><br><span class="line">        file: fileItem.file,</span><br><span class="line">        url,</span><br><span class="line">      &#125;;</span><br><span class="line">      props.onChange?.(url);</span><br><span class="line">      onSuccess();</span><br><span class="line">      console.log(file.value);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      Message.error(&quot;上传失败，&quot; + res.data.message || &quot;&quot;);</span><br><span class="line">      onError(new Error(res.data.message));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="前端基础页面的开发"><a href="#前端基础页面的开发" class="headerlink" title="前端基础页面的开发"></a>前端基础页面的开发</h1><h2 id="用户模块"><a href="#用户模块" class="headerlink" title="用户模块"></a>用户模块</h2><h3 id="添加路由"><a href="#添加路由" class="headerlink" title="添加路由"></a>添加路由</h3><p>首先需要在routes.ts中配置路由信息</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/user&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;用户页&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">UserLayout</span>,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&quot;/user/login&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;用户登录页&quot;</span>, <span class="attr">component</span>: <span class="title class_">UserLoginPage</span> &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;/user/register&quot;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;用户注册页&quot;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">UserRegisterPage</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">meta</span>: &#123;</span><br><span class="line">      <span class="attr">hideInMenu</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<h3 id="用户注册页面"><a href="#用户注册页面" class="headerlink" title="用户注册页面"></a>用户注册页面</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;userRegisterPage&quot;&gt;</span><br><span class="line">    &lt;h2 style=&quot;margin-bottom: 16px&quot;&gt;用户注册&lt;/h2&gt;</span><br><span class="line">    &lt;a-form</span><br><span class="line">      :model=&quot;form&quot;</span><br><span class="line">      :style=&quot;&#123; width: &#x27;480px&#x27;, margin: &#x27;50px auto&#x27; &#125;&quot;</span><br><span class="line">      label-align=&quot;left&quot;</span><br><span class="line">      @submit=&quot;handleSubmit&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;a-form-item field=&quot;userAccount&quot; label=&quot;账号&quot;&gt;</span><br><span class="line">        &lt;a-input v-model=&quot;form.userAccount&quot; placeholder=&quot;请输入账号...&quot; /&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">      &lt;a-form-item field=&quot;userPassword&quot; tooltip=&quot;密码不小于8位&quot; label=&quot;密码&quot;&gt;</span><br><span class="line">        &lt;a-input-password</span><br><span class="line">          v-model=&quot;form.userPassword&quot;</span><br><span class="line">          placeholder=&quot;请输入密码...&quot;</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">      &lt;a-form-item</span><br><span class="line">        field=&quot;checkPassword&quot;</span><br><span class="line">        tooltip=&quot;密码不小于8位&quot;</span><br><span class="line">        label=&quot;确认密码&quot;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;a-input-password</span><br><span class="line">          v-model=&quot;form.checkPassword&quot;</span><br><span class="line">          placeholder=&quot;请再次确认密码...&quot;</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">      &lt;a-form-item&gt;</span><br><span class="line">        &lt;div</span><br><span class="line">          style=&quot;</span><br><span class="line">            display: flex;</span><br><span class="line">            width: 100%;</span><br><span class="line">            align-items: center;</span><br><span class="line">            justify-content: space-between;</span><br><span class="line">          &quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;a-button</span><br><span class="line">            type=&quot;primary&quot;</span><br><span class="line">            shape=&quot;round&quot;</span><br><span class="line">            long</span><br><span class="line">            style=&quot;width: 100px&quot;</span><br><span class="line">            html-type=&quot;submit&quot;</span><br><span class="line">            &gt;注册</span><br><span class="line">          &lt;/a-button&gt;</span><br><span class="line">          &lt;a-link href=&quot;/user/login&quot;&gt;老用户登录&lt;/a-link&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">    &lt;/a-form&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; reactive &#125; from &quot;vue&quot;;</span><br><span class="line">import API from &quot;@/api&quot;;</span><br><span class="line">import &#123; userRegisterUsingPost &#125; from &quot;@/api/userController&quot;;</span><br><span class="line">import message from &quot;@arco-design/web-vue/es/message&quot;;</span><br><span class="line">import &#123; useRouter &#125; from &quot;vue-router&quot;;</span><br><span class="line"></span><br><span class="line">const router = useRouter();</span><br><span class="line">const form = reactive(&#123;</span><br><span class="line">  userAccount: &quot;&quot;,</span><br><span class="line">  userPassword: &quot;&quot;,</span><br><span class="line">  checkPassword: &quot;&quot;,</span><br><span class="line">&#125; as API.UserRegisterRequest);</span><br><span class="line">const handleSubmit = async () =&gt; &#123;</span><br><span class="line">  const res = await userRegisterUsingPost(form);</span><br><span class="line">  if (res.data.code === 0) &#123;</span><br><span class="line">    message.success(&quot;注册成功&quot;);</span><br><span class="line">    router.push(&#123;</span><br><span class="line">      path: &quot;/user/login&quot;,</span><br><span class="line">      replace: true,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    message.error(&quot;注册失败,&quot; + res.data.message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="用户登录页面"><a href="#用户登录页面" class="headerlink" title="用户登录页面"></a>用户登录页面</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;userLoginPage&quot;&gt;</span><br><span class="line">    &lt;h2 style=&quot;margin-bottom: 16px&quot;&gt;用户登录&lt;/h2&gt;</span><br><span class="line">    &lt;a-form</span><br><span class="line">      :model=&quot;form&quot;</span><br><span class="line">      :style=&quot;&#123; width: &#x27;480px&#x27;, margin: &#x27;50px auto&#x27; &#125;&quot;</span><br><span class="line">      label-align=&quot;left&quot;</span><br><span class="line">      @submit=&quot;handleSubmit&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;a-form-item field=&quot;userAccount&quot; label=&quot;账号&quot;&gt;</span><br><span class="line">        &lt;a-input v-model=&quot;form.userAccount&quot; placeholder=&quot;请输入账号...&quot; /&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">      &lt;a-form-item field=&quot;userPassword&quot; tooltip=&quot;密码不小于8位&quot; label=&quot;密码&quot;&gt;</span><br><span class="line">        &lt;a-input-password</span><br><span class="line">          v-model=&quot;form.userPassword&quot;</span><br><span class="line">          placeholder=&quot;请输入密码...&quot;</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">      &lt;a-form-item&gt;</span><br><span class="line">        &lt;div</span><br><span class="line">          style=&quot;</span><br><span class="line">            display: flex;</span><br><span class="line">            width: 100%;</span><br><span class="line">            align-items: center;</span><br><span class="line">            justify-content: space-between;</span><br><span class="line">          &quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;a-button</span><br><span class="line">            type=&quot;primary&quot;</span><br><span class="line">            shape=&quot;round&quot;</span><br><span class="line">            long</span><br><span class="line">            style=&quot;width: 100px&quot;</span><br><span class="line">            html-type=&quot;submit&quot;</span><br><span class="line">            &gt;登录</span><br><span class="line">          &lt;/a-button&gt;</span><br><span class="line">          &lt;a-link href=&quot;/user/register&quot;&gt;新用户注册&lt;/a-link&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">    &lt;/a-form&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; reactive &#125; from &quot;vue&quot;;</span><br><span class="line">import API from &quot;@/api&quot;;</span><br><span class="line">import &#123; userLoginUsingPost &#125; from &quot;@/api/userController&quot;;</span><br><span class="line">import &#123; useLoginUserStore &#125; from &quot;@/store/userStore&quot;;</span><br><span class="line">import message from &quot;@arco-design/web-vue/es/message&quot;;</span><br><span class="line">import &#123; useRouter &#125; from &quot;vue-router&quot;;</span><br><span class="line"></span><br><span class="line">const router = useRouter();</span><br><span class="line">const loginUserStore = useLoginUserStore();</span><br><span class="line">const form = reactive(&#123;</span><br><span class="line">  userAccount: &quot;&quot;,</span><br><span class="line">  userPassword: &quot;&quot;,</span><br><span class="line">&#125; as API.UserLoginRequest);</span><br><span class="line">const handleSubmit = async () =&gt; &#123;</span><br><span class="line">  const res = await userLoginUsingPost(form);</span><br><span class="line">  if (res.data.code === 0) &#123;</span><br><span class="line">    await loginUserStore.fetchLoginUser();</span><br><span class="line">    message.success(&quot;登录成功&quot;);</span><br><span class="line">    router.push(&#123;</span><br><span class="line">      path: &quot;/&quot;,</span><br><span class="line">      replace: true,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    message.error(&quot;登录失败,&quot; + res.data.message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="管理模块"><a href="#管理模块" class="headerlink" title="管理模块"></a>管理模块</h2><h3 id="前置准备"><a href="#前置准备" class="headerlink" title="前置准备"></a>前置准备</h3><p>管理界面一般需要引入表格组件Table<a target="_blank" rel="noopener" href="https://arco.design/vue/component/table">Arco Design Vue</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;a-table :columns=&quot;columns&quot; :data=&quot;data&quot; @change=&quot;handleChange&quot;&gt;</span><br><span class="line">    &lt;template #name-filter=&quot;&#123; filterValue, setFilterValue, handleFilterConfirm, handleFilterReset&#125;&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;custom-filter&quot;&gt;</span><br><span class="line">        &lt;a-space direction=&quot;vertical&quot;&gt;</span><br><span class="line">          &lt;a-input :model-value=&quot;filterValue[0]&quot; @input=&quot;(value)=&gt;setFilterValue([value])&quot; /&gt;</span><br><span class="line">          &lt;div class=&quot;custom-filter-footer&quot;&gt;</span><br><span class="line">            &lt;a-button @click=&quot;handleFilterConfirm&quot;&gt;Confirm&lt;/a-button&gt;</span><br><span class="line">            &lt;a-button @click=&quot;handleFilterReset&quot;&gt;Reset&lt;/a-button&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/a-space&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/a-table&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p>然后需要根据展示内容，定义表格列</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 表格列配置</span><br><span class="line">const columns = [</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;id&quot;,</span><br><span class="line">    dataIndex: &quot;id&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;名称&quot;,</span><br><span class="line">    dataIndex: &quot;appName&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>对于一些需要个性化展示的内容，比如头像、时间等需要在columns中开启插槽配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    title: &quot;图标&quot;,</span><br><span class="line">    dataIndex: &quot;appIcon&quot;,</span><br><span class="line">    slotName: &quot;appIcon&quot;,</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<p>对于时间的格式化，可以使用dayjs工具<br><a target="_blank" rel="noopener" href="https://day.js.org/docs/zh-CN/display/format">Format · Day.js</a><br>搜索条件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 初始化搜索条件（不应该被修改）</span><br><span class="line">const initSearchParams = &#123;</span><br><span class="line">  current: 1,</span><br><span class="line">  pageSize: 10,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>数据加载</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 当分页变化时，改变搜索条件，触发数据加载</span><br><span class="line"> * @param page</span><br><span class="line"> */</span><br><span class="line">const onPageChange = (page: number) =&gt; &#123;</span><br><span class="line">  searchParams.value = &#123;</span><br><span class="line">    ...searchParams.value,</span><br><span class="line">    current: page,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line">/**</span><br><span class="line"> * 监听 searchParams 变量，改变时触发数据的重新加载</span><br><span class="line"> */</span><br><span class="line">watchEffect(() =&gt; &#123;</span><br><span class="line">  loadData();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="添加路由-1"><a href="#添加路由-1" class="headerlink" title="添加路由"></a>添加路由</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/admin/user&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;用户管理&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">AdminUserPage</span>,</span><br><span class="line">    <span class="attr">meta</span>: &#123;</span><br><span class="line">      <span class="attr">access</span>: <span class="title class_">AccessEnum</span>.<span class="property">ADMIN</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/admin/app&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;应用管理&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">AdminAppPage</span>,</span><br><span class="line">    <span class="attr">meta</span>: &#123;</span><br><span class="line">      <span class="attr">access</span>: <span class="title class_">AccessEnum</span>.<span class="property">ADMIN</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/admin/question&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;题目管理&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">AdminQuestionPage</span>,</span><br><span class="line">    <span class="attr">meta</span>: &#123;</span><br><span class="line">      <span class="attr">access</span>: <span class="title class_">AccessEnum</span>.<span class="property">ADMIN</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/admin/scoring_result&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;评分管理&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">AdminScoringResultPage</span>,</span><br><span class="line">    <span class="attr">meta</span>: &#123;</span><br><span class="line">      <span class="attr">access</span>: <span class="title class_">AccessEnum</span>.<span class="property">ADMIN</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/admin/user_answer&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;回答管理&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">AdminUserAnswerPage</span>,</span><br><span class="line">    <span class="attr">meta</span>: &#123;</span><br><span class="line">      <span class="attr">access</span>: <span class="title class_">AccessEnum</span>.<span class="property">ADMIN</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<h3 id="用户管理页面"><a href="#用户管理页面" class="headerlink" title="用户管理页面"></a>用户管理页面</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;a-form</span><br><span class="line">    :model=&quot;formSearchParams&quot;</span><br><span class="line">    :style=&quot;&#123; marginBottom: &#x27;10px&#x27; &#125;&quot;</span><br><span class="line">    layout=&quot;inline&quot;</span><br><span class="line">    @submit=&quot;doSearch&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;a-form-item field=&quot;userName&quot; label=&quot;用户名&quot;&gt;</span><br><span class="line">      &lt;a-input</span><br><span class="line">        allow-clear</span><br><span class="line">        v-model=&quot;formSearchParams.userName&quot;</span><br><span class="line">        placeholder=&quot;请输入用户名&quot;</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">    &lt;a-form-item field=&quot;userProfile&quot; label=&quot;用户简介&quot;&gt;</span><br><span class="line">      &lt;a-input</span><br><span class="line">        allow-clear</span><br><span class="line">        v-model=&quot;formSearchParams.userProfile&quot;</span><br><span class="line">        placeholder=&quot;请输入用户简介&quot;</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">    &lt;a-form-item&gt;</span><br><span class="line">      &lt;a-button type=&quot;primary&quot; html-type=&quot;submit&quot; style=&quot;width: 90px&quot;&gt;</span><br><span class="line">        搜索</span><br><span class="line">      &lt;/a-button&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">  &lt;/a-form&gt;</span><br><span class="line"></span><br><span class="line">  &lt;a-table</span><br><span class="line">    :columns=&quot;columns&quot;</span><br><span class="line">    :data=&quot;dataList&quot;</span><br><span class="line">    :pagination=&quot;&#123;</span><br><span class="line">      showTotal: true,</span><br><span class="line">      pageSize: searchParams.pageSize,</span><br><span class="line">      current: searchParams.current,</span><br><span class="line">      total,</span><br><span class="line">    &#125;&quot;</span><br><span class="line">    @page-change=&quot;onPageChange&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;template #userAvatar=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &lt;a-image width=&quot;64&quot; :src=&quot;record.userAvatar&quot; /&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #createTime=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &#123;&#123; dayjs(record.createTime).format(&quot;YYYY-MM-DD HH:mm:ss&quot;) &#125;&#125;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #updateTime=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &#123;&#123; dayjs(record.updateTime).format(&quot;YYYY-MM-DD HH:mm:ss&quot;) &#125;&#125;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #optional=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &lt;a-space&gt;</span><br><span class="line">        &lt;a-button status=&quot;danger&quot; @click=&quot;doDelete(record)&quot;&gt;删除&lt;/a-button&gt;</span><br><span class="line">      &lt;/a-space&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/a-table&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref, watchEffect &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123;</span><br><span class="line">  deleteUserUsingPost,</span><br><span class="line">  listUserByPageUsingPost,</span><br><span class="line">&#125; from &quot;@/api/userController&quot;;</span><br><span class="line">import API from &quot;@/api&quot;;</span><br><span class="line">import message from &quot;@arco-design/web-vue/es/message&quot;;</span><br><span class="line">import dayjs from &quot;dayjs&quot;;</span><br><span class="line"></span><br><span class="line">const formSearchParams = ref&lt;API.UserQueryRequest&gt;(&#123;&#125;);</span><br><span class="line"></span><br><span class="line">// 初始化搜索条件（不应该被修改）</span><br><span class="line">const initSearchParams = &#123;</span><br><span class="line">  current: 1,</span><br><span class="line">  pageSize: 10,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const searchParams = ref&lt;API.UserQueryRequest&gt;(&#123;</span><br><span class="line">  ...initSearchParams,</span><br><span class="line">&#125;);</span><br><span class="line">const dataList = ref&lt;API.User[]&gt;([]);</span><br><span class="line">const total = ref&lt;number&gt;(0);</span><br><span class="line">const loadData = async () =&gt; &#123;</span><br><span class="line">  const res = await listUserByPageUsingPost(searchParams.value);</span><br><span class="line">  if (res.data.code === 0) &#123;</span><br><span class="line">    dataList.value = res.data.data?.records || [];</span><br><span class="line">    total.value = res.data.data?.total || 0;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    message.error(&quot;获取数据失败，&quot; + res.data.message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">/**</span><br><span class="line"> * 执行搜索</span><br><span class="line"> */</span><br><span class="line">const doSearch = () =&gt; &#123;</span><br><span class="line">  searchParams.value = &#123;</span><br><span class="line">    ...initSearchParams,</span><br><span class="line">    ...formSearchParams.value,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 当分页变化时，渲染不同的数据</span><br><span class="line"> * @param page</span><br><span class="line"> */</span><br><span class="line">const onPageChange = (page: number) =&gt; &#123;</span><br><span class="line">  searchParams.value = &#123;</span><br><span class="line">    ...searchParams.value,</span><br><span class="line">    current: page,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 删除</span><br><span class="line"> * @param record</span><br><span class="line"> */</span><br><span class="line">const doDelete = async (record: API.User) =&gt; &#123;</span><br><span class="line">  if (!record.id) &#123;</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  const res = await deleteUserUsingPost(&#123;</span><br><span class="line">    id: record.id,</span><br><span class="line">  &#125;);</span><br><span class="line">  if (res.data.code === 0) &#123;</span><br><span class="line">    loadData();</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    message.error(&quot;删除失败，&quot; + res.data.message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 监视页面变化，如果变化，则立即重新渲染页面</span><br><span class="line"> */</span><br><span class="line">watchEffect(() =&gt; &#123;</span><br><span class="line">  loadData();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 表格列配置</span><br><span class="line"> */</span><br><span class="line">const columns = [</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;id&quot;,</span><br><span class="line">    dataIndex: &quot;id&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;账号&quot;,</span><br><span class="line">    dataIndex: &quot;userAccount&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;用户名&quot;,</span><br><span class="line">    dataIndex: &quot;userName&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;用户头像&quot;,</span><br><span class="line">    dataIndex: &quot;userAvatar&quot;,</span><br><span class="line">    slotName: &quot;userAvatar&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;用户简介&quot;,</span><br><span class="line">    dataIndex: &quot;userProfile&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;权限&quot;,</span><br><span class="line">    dataIndex: &quot;userRole&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;创建时间&quot;,</span><br><span class="line">    dataIndex: &quot;createTime&quot;,</span><br><span class="line">    slotName: &quot;createTime&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;更新时间&quot;,</span><br><span class="line">    dataIndex: &quot;updateTime&quot;,</span><br><span class="line">    slotName: &quot;updateTime&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;操作&quot;,</span><br><span class="line">    slotName: &quot;optional&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="应用管理页面"><a href="#应用管理页面" class="headerlink" title="应用管理页面"></a>应用管理页面</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;a-form</span><br><span class="line">    :model=&quot;formSearchParams&quot;</span><br><span class="line">    :style=&quot;&#123; marginBottom: &#x27;20px&#x27; &#125;&quot;</span><br><span class="line">    layout=&quot;inline&quot;</span><br><span class="line">    @submit=&quot;doSearch&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;a-form-item field=&quot;appName&quot; label=&quot;应用名称&quot;&gt;</span><br><span class="line">      &lt;a-input</span><br><span class="line">        v-model=&quot;formSearchParams.appName&quot;</span><br><span class="line">        placeholder=&quot;请输入应用名称&quot;</span><br><span class="line">        allow-clear</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">    &lt;a-form-item field=&quot;appDesc&quot; label=&quot;应用描述&quot;&gt;</span><br><span class="line">      &lt;a-input</span><br><span class="line">        v-model=&quot;formSearchParams.appDesc&quot;</span><br><span class="line">        placeholder=&quot;请输入应用描述&quot;</span><br><span class="line">        allow-clear</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">    &lt;a-form-item&gt;</span><br><span class="line">      &lt;a-button type=&quot;primary&quot; html-type=&quot;submit&quot; style=&quot;width: 100px&quot;&gt;</span><br><span class="line">        搜索</span><br><span class="line">      &lt;/a-button&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">  &lt;/a-form&gt;</span><br><span class="line">  &lt;a-table</span><br><span class="line">    :columns=&quot;columns&quot;</span><br><span class="line">    :data=&quot;dataList&quot;</span><br><span class="line">    :pagination=&quot;&#123;</span><br><span class="line">      showTotal: true,</span><br><span class="line">      pageSize: searchParams.pageSize,</span><br><span class="line">      current: searchParams.current,</span><br><span class="line">      total,</span><br><span class="line">    &#125;&quot;</span><br><span class="line">    @page-change=&quot;onPageChange&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;template #appIcon=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &lt;a-image width=&quot;64&quot; :src=&quot;record.appIcon&quot; /&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #appType=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &#123;&#123; APP_TYPE_MAP[record.appType] &#125;&#125;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #scoringStrategy=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &#123;&#123; APP_SCORING_STRATEGY_MAP[record.scoringStrategy] &#125;&#125;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #reviewStatus=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &#123;&#123; REVIEW_STATUS_MAP[record.reviewStatus] &#125;&#125;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #reviewTime=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &#123;&#123;</span><br><span class="line">        record.reviewTime &amp;&amp;</span><br><span class="line">        dayjs(record.reviewTime).format(&quot;YYYY-MM-DD HH:mm:ss&quot;)</span><br><span class="line">      &#125;&#125;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #createTime=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &#123;&#123; dayjs(record.createTime).format(&quot;YYYY-MM-DD HH:mm:ss&quot;) &#125;&#125;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #updateTime=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &#123;&#123; dayjs(record.updateTime).format(&quot;YYYY-MM-DD HH:mm:ss&quot;) &#125;&#125;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #optional=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &lt;a-space&gt;</span><br><span class="line">        &lt;a-button</span><br><span class="line">          v-if=&quot;record.reviewStatus !== REVIEW_STATUS_ENUM.PASS&quot;</span><br><span class="line">          status=&quot;success&quot;</span><br><span class="line">          @click=&quot;doReview(record, REVIEW_STATUS_ENUM.PASS, &#x27;&#x27;)&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          通过</span><br><span class="line">        &lt;/a-button&gt;</span><br><span class="line">        &lt;a-button</span><br><span class="line">          v-if=&quot;record.reviewStatus !== REVIEW_STATUS_ENUM.REJECT&quot;</span><br><span class="line">          status=&quot;warning&quot;</span><br><span class="line">          @click=&quot;doReview(record, REVIEW_STATUS_ENUM.REJECT, &#x27;不符合上架要求&#x27;)&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          拒绝</span><br><span class="line">        &lt;/a-button&gt;</span><br><span class="line">        &lt;a-button status=&quot;danger&quot; @click=&quot;doDelete(record)&quot;&gt;删除&lt;/a-button&gt;</span><br><span class="line">      &lt;/a-space&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/a-table&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref, watchEffect &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123;</span><br><span class="line">  deleteAppUsingPost,</span><br><span class="line">  doAppReviewUsingPost,</span><br><span class="line">  listAppByPageUsingPost,</span><br><span class="line">&#125; from &quot;@/api/appController&quot;;</span><br><span class="line">import API from &quot;@/api&quot;;</span><br><span class="line">import message from &quot;@arco-design/web-vue/es/message&quot;;</span><br><span class="line">import &#123; dayjs &#125; from &quot;@arco-design/web-vue/es/_utils/date&quot;;</span><br><span class="line">import &#123;</span><br><span class="line">  APP_SCORING_STRATEGY_MAP,</span><br><span class="line">  APP_TYPE_MAP,</span><br><span class="line">  REVIEW_STATUS_ENUM,</span><br><span class="line">  REVIEW_STATUS_MAP,</span><br><span class="line">&#125; from &quot;@/constant/app&quot;;</span><br><span class="line"></span><br><span class="line">const formSearchParams = ref&lt;API.AppQueryRequest&gt;(&#123;&#125;);</span><br><span class="line"></span><br><span class="line">// 初始化搜索条件（不应该被修改）</span><br><span class="line">const initSearchParams = &#123;</span><br><span class="line">  current: 1,</span><br><span class="line">  pageSize: 10,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const searchParams = ref&lt;API.AppQueryRequest&gt;(&#123;</span><br><span class="line">  ...initSearchParams,</span><br><span class="line">&#125;);</span><br><span class="line">const dataList = ref&lt;API.App[]&gt;([]);</span><br><span class="line">const total = ref&lt;number&gt;(0);</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 加载数据</span><br><span class="line"> */</span><br><span class="line">const loadData = async () =&gt; &#123;</span><br><span class="line">  const res = await listAppByPageUsingPost(searchParams.value);</span><br><span class="line">  if (res.data.code === 0) &#123;</span><br><span class="line">    dataList.value = res.data.data?.records || [];</span><br><span class="line">    total.value = res.data.data?.total || 0;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    message.error(&quot;获取数据失败，&quot; + res.data.message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 执行搜索</span><br><span class="line"> */</span><br><span class="line">const doSearch = () =&gt; &#123;</span><br><span class="line">  searchParams.value = &#123;</span><br><span class="line">    ...initSearchParams,</span><br><span class="line">    ...formSearchParams.value,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 当分页变化时，改变搜索条件，触发数据加载</span><br><span class="line"> * @param page</span><br><span class="line"> */</span><br><span class="line">const onPageChange = (page: number) =&gt; &#123;</span><br><span class="line">  searchParams.value = &#123;</span><br><span class="line">    ...searchParams.value,</span><br><span class="line">    current: page,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 删除</span><br><span class="line"> * @param record</span><br><span class="line"> */</span><br><span class="line">const doDelete = async (record: API.App) =&gt; &#123;</span><br><span class="line">  if (!record.id) &#123;</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  const res = await deleteAppUsingPost(&#123;</span><br><span class="line">    id: record.id,</span><br><span class="line">  &#125;);</span><br><span class="line">  if (res.data.code === 0) &#123;</span><br><span class="line">    loadData();</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    message.error(&quot;删除失败，&quot; + res.data.message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 审核</span><br><span class="line"> * @param record</span><br><span class="line"> * @param reviewStatus</span><br><span class="line"> * @param reviewMessage</span><br><span class="line"> */</span><br><span class="line">const doReview = async (</span><br><span class="line">  record: API.App,</span><br><span class="line">  reviewStatus: number,</span><br><span class="line">  reviewMessage?: string</span><br><span class="line">) =&gt; &#123;</span><br><span class="line">  if (!record.id) &#123;</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  const res = await doAppReviewUsingPost(&#123;</span><br><span class="line">    id: record.id,</span><br><span class="line">    reviewStatus,</span><br><span class="line">    reviewMessage,</span><br><span class="line">  &#125;);</span><br><span class="line">  if (res.data.code === 0) &#123;</span><br><span class="line">    loadData();</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    message.error(&quot;审核失败，&quot; + res.data.message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 监听 searchParams 变量，改变时触发数据的重新加载</span><br><span class="line"> */</span><br><span class="line">watchEffect(() =&gt; &#123;</span><br><span class="line">  loadData();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 表格列配置</span><br><span class="line">const columns = [</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;id&quot;,</span><br><span class="line">    dataIndex: &quot;id&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;名称&quot;,</span><br><span class="line">    dataIndex: &quot;appName&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;描述&quot;,</span><br><span class="line">    dataIndex: &quot;appDesc&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;图标&quot;,</span><br><span class="line">    dataIndex: &quot;appIcon&quot;,</span><br><span class="line">    slotName: &quot;appIcon&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;应用类型&quot;,</span><br><span class="line">    dataIndex: &quot;appType&quot;,</span><br><span class="line">    slotName: &quot;appType&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;评分策略&quot;,</span><br><span class="line">    dataIndex: &quot;scoringStrategy&quot;,</span><br><span class="line">    slotName: &quot;scoringStrategy&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;审核状态&quot;,</span><br><span class="line">    dataIndex: &quot;reviewStatus&quot;,</span><br><span class="line">    slotName: &quot;reviewStatus&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;审核信息&quot;,</span><br><span class="line">    dataIndex: &quot;reviewMessage&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;审核时间&quot;,</span><br><span class="line">    dataIndex: &quot;reviewTime&quot;,</span><br><span class="line">    slotName: &quot;reviewTime&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;审核人 id&quot;,</span><br><span class="line">    dataIndex: &quot;reviewerId&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;用户 id&quot;,</span><br><span class="line">    dataIndex: &quot;userId&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;创建时间&quot;,</span><br><span class="line">    dataIndex: &quot;createTime&quot;,</span><br><span class="line">    slotName: &quot;createTime&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;更新时间&quot;,</span><br><span class="line">    dataIndex: &quot;updateTime&quot;,</span><br><span class="line">    slotName: &quot;updateTime&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;操作&quot;,</span><br><span class="line">    slotName: &quot;optional&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="题目管理页面"><a href="#题目管理页面" class="headerlink" title="题目管理页面"></a>题目管理页面</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;a-form</span><br><span class="line">    :model=&quot;formSearchParams&quot;</span><br><span class="line">    :style=&quot;&#123; marginBottom: &#x27;20px&#x27; &#125;&quot;</span><br><span class="line">    layout=&quot;inline&quot;</span><br><span class="line">    @submit=&quot;doSearch&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;a-form-item field=&quot;appId&quot; label=&quot;应用 id&quot;&gt;</span><br><span class="line">      &lt;a-input</span><br><span class="line">        v-model=&quot;formSearchParams.appId&quot;</span><br><span class="line">        placeholder=&quot;请输入应用 id&quot;</span><br><span class="line">        allow-clear</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">    &lt;a-form-item field=&quot;userId&quot; label=&quot;用户 id&quot;&gt;</span><br><span class="line">      &lt;a-input</span><br><span class="line">        v-model=&quot;formSearchParams.userId&quot;</span><br><span class="line">        placeholder=&quot;请输入用户 id&quot;</span><br><span class="line">        allow-clear</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">    &lt;a-form-item&gt;</span><br><span class="line">      &lt;a-button type=&quot;primary&quot; html-type=&quot;submit&quot; style=&quot;width: 100px&quot;&gt;</span><br><span class="line">        搜索</span><br><span class="line">      &lt;/a-button&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">  &lt;/a-form&gt;</span><br><span class="line">  &lt;a-table</span><br><span class="line">    :columns=&quot;columns&quot;</span><br><span class="line">    :data=&quot;dataList&quot;</span><br><span class="line">    :pagination=&quot;&#123;</span><br><span class="line">      showTotal: true,</span><br><span class="line">      pageSize: searchParams.pageSize,</span><br><span class="line">      current: searchParams.current,</span><br><span class="line">      total,</span><br><span class="line">    &#125;&quot;</span><br><span class="line">    @page-change=&quot;onPageChange&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;template #questionContent=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &lt;div</span><br><span class="line">        v-for=&quot;question in JSON.parse(record.questionContent)&quot;</span><br><span class="line">        :key=&quot;question.title&quot;</span><br><span class="line">      &gt;</span><br><span class="line">        &#123;&#123; question &#125;&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #createTime=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &#123;&#123; dayjs(record.createTime).format(&quot;YYYY-MM-DD HH:mm:ss&quot;) &#125;&#125;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #updateTime=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &#123;&#123; dayjs(record.updateTime).format(&quot;YYYY-MM-DD HH:mm:ss&quot;) &#125;&#125;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #optional=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &lt;a-space&gt;</span><br><span class="line">        &lt;a-button status=&quot;danger&quot; @click=&quot;doDelete(record)&quot;&gt;删除&lt;/a-button&gt;</span><br><span class="line">      &lt;/a-space&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/a-table&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref, watchEffect &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123;</span><br><span class="line">  deleteQuestionUsingPost,</span><br><span class="line">  listQuestionByPageUsingPost,</span><br><span class="line">&#125; from &quot;@/api/questionController&quot;;</span><br><span class="line">import API from &quot;@/api&quot;;</span><br><span class="line">import message from &quot;@arco-design/web-vue/es/message&quot;;</span><br><span class="line">import &#123; dayjs &#125; from &quot;@arco-design/web-vue/es/_utils/date&quot;;</span><br><span class="line"></span><br><span class="line">const formSearchParams = ref&lt;API.QuestionQueryRequest&gt;(&#123;&#125;);</span><br><span class="line"></span><br><span class="line">// 初始化搜索条件（不应该被修改）</span><br><span class="line">const initSearchParams = &#123;</span><br><span class="line">  current: 1,</span><br><span class="line">  pageSize: 10,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const searchParams = ref&lt;API.QuestionQueryRequest&gt;(&#123;</span><br><span class="line">  ...initSearchParams,</span><br><span class="line">&#125;);</span><br><span class="line">const dataList = ref&lt;API.Question[]&gt;([]);</span><br><span class="line">const total = ref&lt;number&gt;(0);</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 加载数据</span><br><span class="line"> */</span><br><span class="line">const loadData = async () =&gt; &#123;</span><br><span class="line">  const res = await listQuestionByPageUsingPost(searchParams.value);</span><br><span class="line">  if (res.data.code === 0) &#123;</span><br><span class="line">    dataList.value = res.data.data?.records || [];</span><br><span class="line">    total.value = res.data.data?.total || 0;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    message.error(&quot;获取数据失败，&quot; + res.data.message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 执行搜索</span><br><span class="line"> */</span><br><span class="line">const doSearch = () =&gt; &#123;</span><br><span class="line">  searchParams.value = &#123;</span><br><span class="line">    ...initSearchParams,</span><br><span class="line">    ...formSearchParams.value,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 当分页变化时，改变搜索条件，触发数据加载</span><br><span class="line"> * @param page</span><br><span class="line"> */</span><br><span class="line">const onPageChange = (page: number) =&gt; &#123;</span><br><span class="line">  searchParams.value = &#123;</span><br><span class="line">    ...searchParams.value,</span><br><span class="line">    current: page,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 删除</span><br><span class="line"> * @param record</span><br><span class="line"> */</span><br><span class="line">const doDelete = async (record: API.Question) =&gt; &#123;</span><br><span class="line">  if (!record.id) &#123;</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  const res = await deleteQuestionUsingPost(&#123;</span><br><span class="line">    id: record.id,</span><br><span class="line">  &#125;);</span><br><span class="line">  if (res.data.code === 0) &#123;</span><br><span class="line">    loadData();</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    message.error(&quot;删除失败，&quot; + res.data.message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 监听 searchParams 变量，改变时触发数据的重新加载</span><br><span class="line"> */</span><br><span class="line">watchEffect(() =&gt; &#123;</span><br><span class="line">  loadData();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 表格列配置</span><br><span class="line">const columns = [</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;id&quot;,</span><br><span class="line">    dataIndex: &quot;id&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;题目内容&quot;,</span><br><span class="line">    dataIndex: &quot;questionContent&quot;,</span><br><span class="line">    slotName: &quot;questionContent&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;应用 id&quot;,</span><br><span class="line">    dataIndex: &quot;appId&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;用户 id&quot;,</span><br><span class="line">    dataIndex: &quot;userId&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;创建时间&quot;,</span><br><span class="line">    dataIndex: &quot;createTime&quot;,</span><br><span class="line">    slotName: &quot;createTime&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;更新时间&quot;,</span><br><span class="line">    dataIndex: &quot;updateTime&quot;,</span><br><span class="line">    slotName: &quot;updateTime&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;操作&quot;,</span><br><span class="line">    slotName: &quot;optional&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="评分结果页面"><a href="#评分结果页面" class="headerlink" title="评分结果页面"></a>评分结果页面</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;a-form</span><br><span class="line">    :model=&quot;formSearchParams&quot;</span><br><span class="line">    :style=&quot;&#123; marginBottom: &#x27;20px&#x27; &#125;&quot;</span><br><span class="line">    layout=&quot;inline&quot;</span><br><span class="line">    @submit=&quot;doSearch&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;a-form-item field=&quot;resultName&quot; label=&quot;结果名称&quot;&gt;</span><br><span class="line">      &lt;a-input</span><br><span class="line">        v-model=&quot;formSearchParams.resultName&quot;</span><br><span class="line">        placeholder=&quot;请输入结果名称&quot;</span><br><span class="line">        allow-clear</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">    &lt;a-form-item field=&quot;resultDesc&quot; label=&quot;结果描述&quot;&gt;</span><br><span class="line">      &lt;a-input</span><br><span class="line">        v-model=&quot;formSearchParams.resultDesc&quot;</span><br><span class="line">        placeholder=&quot;请输入结果描述&quot;</span><br><span class="line">        allow-clear</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">    &lt;a-form-item field=&quot;appId&quot; label=&quot;应用 id&quot;&gt;</span><br><span class="line">      &lt;a-input</span><br><span class="line">        v-model=&quot;formSearchParams.appId&quot;</span><br><span class="line">        placeholder=&quot;请输入应用 id&quot;</span><br><span class="line">        allow-clear</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">    &lt;a-form-item field=&quot;userId&quot; label=&quot;用户 id&quot;&gt;</span><br><span class="line">      &lt;a-input</span><br><span class="line">        v-model=&quot;formSearchParams.userId&quot;</span><br><span class="line">        placeholder=&quot;请输入用户 id&quot;</span><br><span class="line">        allow-clear</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">    &lt;a-form-item&gt;</span><br><span class="line">      &lt;a-button type=&quot;primary&quot; html-type=&quot;submit&quot; style=&quot;width: 100px&quot;&gt;</span><br><span class="line">        搜索</span><br><span class="line">      &lt;/a-button&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">  &lt;/a-form&gt;</span><br><span class="line">  &lt;a-table</span><br><span class="line">    :columns=&quot;columns&quot;</span><br><span class="line">    :data=&quot;dataList&quot;</span><br><span class="line">    :pagination=&quot;&#123;</span><br><span class="line">      showTotal: true,</span><br><span class="line">      pageSize: searchParams.pageSize,</span><br><span class="line">      current: searchParams.current,</span><br><span class="line">      total,</span><br><span class="line">    &#125;&quot;</span><br><span class="line">    @page-change=&quot;onPageChange&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;template #resultPicture=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &lt;a-image width=&quot;64&quot; :src=&quot;record.resultPicture&quot; /&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #createTime=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &#123;&#123; dayjs(record.createTime).format(&quot;YYYY-MM-DD HH:mm:ss&quot;) &#125;&#125;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #updateTime=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &#123;&#123; dayjs(record.updateTime).format(&quot;YYYY-MM-DD HH:mm:ss&quot;) &#125;&#125;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #optional=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &lt;a-space&gt;</span><br><span class="line">        &lt;a-button status=&quot;danger&quot; @click=&quot;doDelete(record)&quot;&gt;删除&lt;/a-button&gt;</span><br><span class="line">      &lt;/a-space&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/a-table&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref, watchEffect &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123;</span><br><span class="line">  deleteScoringResultUsingPost,</span><br><span class="line">  listScoringResultByPageUsingPost,</span><br><span class="line">&#125; from &quot;@/api/scoringResultController&quot;;</span><br><span class="line">import API from &quot;@/api&quot;;</span><br><span class="line">import message from &quot;@arco-design/web-vue/es/message&quot;;</span><br><span class="line">import &#123; dayjs &#125; from &quot;@arco-design/web-vue/es/_utils/date&quot;;</span><br><span class="line"></span><br><span class="line">const formSearchParams = ref&lt;API.ScoringResultQueryRequest&gt;(&#123;&#125;);</span><br><span class="line"></span><br><span class="line">// 初始化搜索条件（不应该被修改）</span><br><span class="line">const initSearchParams = &#123;</span><br><span class="line">  current: 1,</span><br><span class="line">  pageSize: 10,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const searchParams = ref&lt;API.ScoringResultQueryRequest&gt;(&#123;</span><br><span class="line">  ...initSearchParams,</span><br><span class="line">&#125;);</span><br><span class="line">const dataList = ref&lt;API.ScoringResult[]&gt;([]);</span><br><span class="line">const total = ref&lt;number&gt;(0);</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 加载数据</span><br><span class="line"> */</span><br><span class="line">const loadData = async () =&gt; &#123;</span><br><span class="line">  const res = await listScoringResultByPageUsingPost(searchParams.value);</span><br><span class="line">  if (res.data.code === 0) &#123;</span><br><span class="line">    dataList.value = res.data.data?.records || [];</span><br><span class="line">    total.value = res.data.data?.total || 0;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    message.error(&quot;获取数据失败，&quot; + res.data.message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 执行搜索</span><br><span class="line"> */</span><br><span class="line">const doSearch = () =&gt; &#123;</span><br><span class="line">  searchParams.value = &#123;</span><br><span class="line">    ...initSearchParams,</span><br><span class="line">    ...formSearchParams.value,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 当分页变化时，改变搜索条件，触发数据加载</span><br><span class="line"> * @param page</span><br><span class="line"> */</span><br><span class="line">const onPageChange = (page: number) =&gt; &#123;</span><br><span class="line">  searchParams.value = &#123;</span><br><span class="line">    ...searchParams.value,</span><br><span class="line">    current: page,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 删除</span><br><span class="line"> * @param record</span><br><span class="line"> */</span><br><span class="line">const doDelete = async (record: API.ScoringResult) =&gt; &#123;</span><br><span class="line">  if (!record.id) &#123;</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  const res = await deleteScoringResultUsingPost(&#123;</span><br><span class="line">    id: record.id,</span><br><span class="line">  &#125;);</span><br><span class="line">  if (res.data.code === 0) &#123;</span><br><span class="line">    loadData();</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    message.error(&quot;删除失败，&quot; + res.data.message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 监听 searchParams 变量，改变时触发数据的重新加载</span><br><span class="line"> */</span><br><span class="line">watchEffect(() =&gt; &#123;</span><br><span class="line">  loadData();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 表格列配置</span><br><span class="line">const columns = [</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;id&quot;,</span><br><span class="line">    dataIndex: &quot;id&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;名称&quot;,</span><br><span class="line">    dataIndex: &quot;resultName&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;描述&quot;,</span><br><span class="line">    dataIndex: &quot;resultDesc&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;图片&quot;,</span><br><span class="line">    dataIndex: &quot;resultPicture&quot;,</span><br><span class="line">    slotName: &quot;resultPicture&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;结果属性&quot;,</span><br><span class="line">    dataIndex: &quot;resultProp&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;评分范围&quot;,</span><br><span class="line">    dataIndex: &quot;resultScoreRange&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;应用 id&quot;,</span><br><span class="line">    dataIndex: &quot;appId&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;用户 id&quot;,</span><br><span class="line">    dataIndex: &quot;userId&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;创建时间&quot;,</span><br><span class="line">    dataIndex: &quot;createTime&quot;,</span><br><span class="line">    slotName: &quot;createTime&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;更新时间&quot;,</span><br><span class="line">    dataIndex: &quot;updateTime&quot;,</span><br><span class="line">    slotName: &quot;updateTime&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;操作&quot;,</span><br><span class="line">    slotName: &quot;optional&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="回答管理页面"><a href="#回答管理页面" class="headerlink" title="回答管理页面"></a>回答管理页面</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;a-form</span><br><span class="line">    :model=&quot;formSearchParams&quot;</span><br><span class="line">    :style=&quot;&#123; marginBottom: &#x27;20px&#x27; &#125;&quot;</span><br><span class="line">    layout=&quot;inline&quot;</span><br><span class="line">    @submit=&quot;doSearch&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;a-form-item field=&quot;resultName&quot; label=&quot;结果名称&quot;&gt;</span><br><span class="line">      &lt;a-input</span><br><span class="line">        v-model=&quot;formSearchParams.resultName&quot;</span><br><span class="line">        placeholder=&quot;请输入结果名称&quot;</span><br><span class="line">        allow-clear</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">    &lt;a-form-item field=&quot;resultDesc&quot; label=&quot;结果描述&quot;&gt;</span><br><span class="line">      &lt;a-input</span><br><span class="line">        v-model=&quot;formSearchParams.resultDesc&quot;</span><br><span class="line">        placeholder=&quot;请输入结果描述&quot;</span><br><span class="line">        allow-clear</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">    &lt;a-form-item field=&quot;appId&quot; label=&quot;应用 id&quot;&gt;</span><br><span class="line">      &lt;a-input</span><br><span class="line">        v-model=&quot;formSearchParams.appId&quot;</span><br><span class="line">        placeholder=&quot;请输入应用 id&quot;</span><br><span class="line">        allow-clear</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">    &lt;a-form-item field=&quot;userId&quot; label=&quot;用户 id&quot;&gt;</span><br><span class="line">      &lt;a-input</span><br><span class="line">        v-model=&quot;formSearchParams.userId&quot;</span><br><span class="line">        placeholder=&quot;请输入用户 id&quot;</span><br><span class="line">        allow-clear</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">    &lt;a-form-item&gt;</span><br><span class="line">      &lt;a-button type=&quot;primary&quot; html-type=&quot;submit&quot; style=&quot;width: 100px&quot;&gt;</span><br><span class="line">        搜索</span><br><span class="line">      &lt;/a-button&gt;</span><br><span class="line">    &lt;/a-form-item&gt;</span><br><span class="line">  &lt;/a-form&gt;</span><br><span class="line">  &lt;a-table</span><br><span class="line">    :columns=&quot;columns&quot;</span><br><span class="line">    :data=&quot;dataList&quot;</span><br><span class="line">    :pagination=&quot;&#123;</span><br><span class="line">      showTotal: true,</span><br><span class="line">      pageSize: searchParams.pageSize,</span><br><span class="line">      current: searchParams.current,</span><br><span class="line">      total,</span><br><span class="line">    &#125;&quot;</span><br><span class="line">    @page-change=&quot;onPageChange&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;template #resultPicture=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &lt;a-image width=&quot;64&quot; :src=&quot;record.resultPicture&quot; /&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #appType=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &#123;&#123; APP_TYPE_MAP[record.appType] &#125;&#125;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #scoringStrategy=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &#123;&#123; APP_SCORING_STRATEGY_MAP[record.scoringStrategy] &#125;&#125;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #createTime=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &#123;&#123; dayjs(record.createTime).format(&quot;YYYY-MM-DD HH:mm:ss&quot;) &#125;&#125;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #updateTime=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &#123;&#123; dayjs(record.updateTime).format(&quot;YYYY-MM-DD HH:mm:ss&quot;) &#125;&#125;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #optional=&quot;&#123; record &#125;&quot;&gt;</span><br><span class="line">      &lt;a-space&gt;</span><br><span class="line">        &lt;a-button status=&quot;danger&quot; @click=&quot;doDelete(record)&quot;&gt;删除&lt;/a-button&gt;</span><br><span class="line">      &lt;/a-space&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/a-table&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref, watchEffect &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123;</span><br><span class="line">  deleteUserAnswerUsingPost,</span><br><span class="line">  listUserAnswerByPageUsingPost,</span><br><span class="line">&#125; from &quot;@/api/userAnswerController&quot;;</span><br><span class="line">import API from &quot;@/api&quot;;</span><br><span class="line">import message from &quot;@arco-design/web-vue/es/message&quot;;</span><br><span class="line">import &#123; dayjs &#125; from &quot;@arco-design/web-vue/es/_utils/date&quot;;</span><br><span class="line">import &#123; APP_SCORING_STRATEGY_MAP, APP_TYPE_MAP &#125; from &quot;@/constant/app&quot;;</span><br><span class="line"></span><br><span class="line">const formSearchParams = ref&lt;API.UserAnswerQueryRequest&gt;(&#123;&#125;);</span><br><span class="line"></span><br><span class="line">// 初始化搜索条件（不应该被修改）</span><br><span class="line">const initSearchParams = &#123;</span><br><span class="line">  current: 1,</span><br><span class="line">  pageSize: 10,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const searchParams = ref&lt;API.UserAnswerQueryRequest&gt;(&#123;</span><br><span class="line">  ...initSearchParams,</span><br><span class="line">&#125;);</span><br><span class="line">const dataList = ref&lt;API.UserAnswer[]&gt;([]);</span><br><span class="line">const total = ref&lt;number&gt;(0);</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 加载数据</span><br><span class="line"> */</span><br><span class="line">const loadData = async () =&gt; &#123;</span><br><span class="line">  const res = await listUserAnswerByPageUsingPost(searchParams.value);</span><br><span class="line">  if (res.data.code === 0) &#123;</span><br><span class="line">    dataList.value = res.data.data?.records || [];</span><br><span class="line">    total.value = res.data.data?.total || 0;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    message.error(&quot;获取数据失败，&quot; + res.data.message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 执行搜索</span><br><span class="line"> */</span><br><span class="line">const doSearch = () =&gt; &#123;</span><br><span class="line">  searchParams.value = &#123;</span><br><span class="line">    ...initSearchParams,</span><br><span class="line">    ...formSearchParams.value,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 当分页变化时，改变搜索条件，触发数据加载</span><br><span class="line"> * @param page</span><br><span class="line"> */</span><br><span class="line">const onPageChange = (page: number) =&gt; &#123;</span><br><span class="line">  searchParams.value = &#123;</span><br><span class="line">    ...searchParams.value,</span><br><span class="line">    current: page,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 删除</span><br><span class="line"> * @param record</span><br><span class="line"> */</span><br><span class="line">const doDelete = async (record: API.UserAnswer) =&gt; &#123;</span><br><span class="line">  if (!record.id) &#123;</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  const res = await deleteUserAnswerUsingPost(&#123;</span><br><span class="line">    id: record.id,</span><br><span class="line">  &#125;);</span><br><span class="line">  if (res.data.code === 0) &#123;</span><br><span class="line">    loadData();</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    message.error(&quot;删除失败，&quot; + res.data.message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 监听 searchParams 变量，改变时触发数据的重新加载</span><br><span class="line"> */</span><br><span class="line">watchEffect(() =&gt; &#123;</span><br><span class="line">  loadData();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 表格列配置</span><br><span class="line">const columns = [</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;id&quot;,</span><br><span class="line">    dataIndex: &quot;id&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;选项&quot;,</span><br><span class="line">    dataIndex: &quot;choices&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;结果 id&quot;,</span><br><span class="line">    dataIndex: &quot;resultId&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;名称&quot;,</span><br><span class="line">    dataIndex: &quot;resultName&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;描述&quot;,</span><br><span class="line">    dataIndex: &quot;resultDesc&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;图片&quot;,</span><br><span class="line">    dataIndex: &quot;resultPicture&quot;,</span><br><span class="line">    slotName: &quot;resultPicture&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;得分&quot;,</span><br><span class="line">    dataIndex: &quot;resultScore&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;应用 id&quot;,</span><br><span class="line">    dataIndex: &quot;appId&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;应用类型&quot;,</span><br><span class="line">    dataIndex: &quot;appType&quot;,</span><br><span class="line">    slotName: &quot;appType&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;评分策略&quot;,</span><br><span class="line">    dataIndex: &quot;scoringStrategy&quot;,</span><br><span class="line">    slotName: &quot;scoringStrategy&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;用户 id&quot;,</span><br><span class="line">    dataIndex: &quot;userId&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;创建时间&quot;,</span><br><span class="line">    dataIndex: &quot;createTime&quot;,</span><br><span class="line">    slotName: &quot;createTime&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;更新时间&quot;,</span><br><span class="line">    dataIndex: &quot;updateTime&quot;,</span><br><span class="line">    slotName: &quot;updateTime&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;操作&quot;,</span><br><span class="line">    slotName: &quot;optional&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://blog.fanzher.site">stufz</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://blog.fanzher.site/2024/07/05/AI%E7%AD%94%E9%A2%98%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0_3.%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E5%BC%80%E5%8F%91/">https://blog.fanzher.site/2024/07/05/AI%E7%AD%94%E9%A2%98%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0_3.%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E5%BC%80%E5%8F%91/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.fanzher.site" target="_blank">stufz的个人博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Java%E9%A1%B9%E7%9B%AE/">Java项目</a><a class="post-meta__tags" href="/tags/AI%E7%AD%94%E9%A2%98%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/">AI答题应用平台</a></div><div class="post_share"><div class="social-share" data-image="https://www.fanzher.xyz/img/cover8.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/07/06/AI%E7%AD%94%E9%A2%98%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0_4.%E5%89%8D%E7%AB%AF%E6%A0%B8%E5%BF%83%E5%BC%80%E5%8F%91/" title="AI答题应用平台_4前端核心开发"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.fanzher.xyz/img/cover3.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">AI答题应用平台_4前端核心开发</div></div></a></div><div class="next-post pull-right"><a href="/2024/07/03/AI%E7%AD%94%E9%A2%98%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0_2%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/" title="AI答题应用平台_2后端开发"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.fanzher.xyz/img/cover5.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">AI答题应用平台_2后端开发</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2024/07/01/AI%E7%AD%94%E9%A2%98%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0_1%E9%A1%B9%E7%9B%AE%E6%80%BB%E8%A7%88/" title="AI答题应用平台_1项目总览"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.fanzher.xyz/img/cover9.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-01</div><div class="title">AI答题应用平台_1项目总览</div></div></a></div><div><a href="/2024/07/09/AI%E7%AD%94%E9%A2%98%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0_5.%E5%B9%B3%E5%8F%B0%E6%99%BA%E8%83%BD%E5%8C%96/" title="AI答题应用平台_5平台智能化"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.fanzher.xyz/img/cover8.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-09</div><div class="title">AI答题应用平台_5平台智能化</div></div></a></div><div><a href="/2024/07/03/AI%E7%AD%94%E9%A2%98%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0_2%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/" title="AI答题应用平台_2后端开发"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.fanzher.xyz/img/cover5.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-03</div><div class="title">AI答题应用平台_2后端开发</div></div></a></div><div><a href="/2024/07/06/AI%E7%AD%94%E9%A2%98%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0_4.%E5%89%8D%E7%AB%AF%E6%A0%B8%E5%BF%83%E5%BC%80%E5%8F%91/" title="AI答题应用平台_4前端核心开发"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.fanzher.xyz/img/cover3.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-06</div><div class="title">AI答题应用平台_4前端核心开发</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://fanzher.xyz/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">stufz</div><div class="author-info__description">记录个人成长</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">13</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/stufz"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/stufz" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:1063297049@qq.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到我的博客！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF%E9%80%89%E5%9E%8B"><span class="toc-number">1.</span> <span class="toc-text">前端技术选型</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#web%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-number">2.</span> <span class="toc-text">web前端项目初始化</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A1%AE%E8%AE%A4%E7%8E%AF%E5%A2%83"><span class="toc-number">2.1.</span> <span class="toc-text">确认环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="toc-number">2.2.</span> <span class="toc-text">创建项目</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E9%85%8D%E7%BD%AE"><span class="toc-number">2.3.</span> <span class="toc-text">前端工程化配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%E7%BB%84%E4%BB%B6%E5%BA%93"><span class="toc-number">2.4.</span> <span class="toc-text">引入组件库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83"><span class="toc-number">2.5.</span> <span class="toc-text">开发规范</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E9%80%9A%E7%94%A8%E5%B8%83%E5%B1%80"><span class="toc-number">2.6.</span> <span class="toc-text">全局通用布局</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E5%B8%83%E5%B1%80%E7%BB%93%E6%9E%84"><span class="toc-number">2.6.1.</span> <span class="toc-text">基础布局结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E5%BA%95%E9%83%A8%E6%A0%8F"><span class="toc-number">2.6.2.</span> <span class="toc-text">全局底部栏</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E6%9B%BF%E6%8D%A2%E5%86%85%E5%AE%B9"><span class="toc-number">2.6.3.</span> <span class="toc-text">动态替换内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E9%A1%B6%E9%83%A8%E6%A0%8F"><span class="toc-number">2.6.4.</span> <span class="toc-text">全局顶部栏</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E7%94%A8%E8%B7%AF%E7%94%B1%E8%8F%9C%E5%8D%95"><span class="toc-number">2.6.5.</span> <span class="toc-text">通用路由菜单</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%94%AF%E6%8C%81%E5%A4%9A%E5%A5%97%E5%B8%83%E5%B1%80"><span class="toc-number">2.6.6.</span> <span class="toc-text">支持多套布局</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82"><span class="toc-number">2.7.</span> <span class="toc-text">请求</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E5%B7%A5%E5%85%B7%E5%BA%93Axios"><span class="toc-number">2.7.1.</span> <span class="toc-text">请求工具库Axios</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E8%87%AA%E5%AE%9A%E4%B9%89%E8%AF%B7%E6%B1%82"><span class="toc-number">2.7.2.</span> <span class="toc-text">全局自定义请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90%E8%AF%B7%E6%B1%82%E4%BB%A3%E7%A0%81"><span class="toc-number">2.7.3.</span> <span class="toc-text">自动生成请求代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86"><span class="toc-number">2.8.</span> <span class="toc-text">全局状态管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86"><span class="toc-number">2.9.</span> <span class="toc-text">全局权限管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E5%85%A5%E5%8F%A3%E6%96%87%E4%BB%B6"><span class="toc-number">2.10.</span> <span class="toc-text">全局入口文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%9A%E7%94%A8%E7%BB%84%E4%BB%B6-MarkDown%E7%BC%96%E8%BE%91%E5%99%A8"><span class="toc-number">2.11.</span> <span class="toc-text">通用组件-MarkDown编辑器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%9A%E7%94%A8%E7%BB%84%E4%BB%B6-%E5%9B%BE%E7%89%87%E4%B8%8A%E4%BC%A0"><span class="toc-number">2.12.</span> <span class="toc-text">通用组件-图片上传</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E9%A1%B5%E9%9D%A2%E7%9A%84%E5%BC%80%E5%8F%91"><span class="toc-number">3.</span> <span class="toc-text">前端基础页面的开发</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E6%A8%A1%E5%9D%97"><span class="toc-number">3.1.</span> <span class="toc-text">用户模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E8%B7%AF%E7%94%B1"><span class="toc-number">3.1.1.</span> <span class="toc-text">添加路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E6%B3%A8%E5%86%8C%E9%A1%B5%E9%9D%A2"><span class="toc-number">3.1.2.</span> <span class="toc-text">用户注册页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2"><span class="toc-number">3.1.3.</span> <span class="toc-text">用户登录页面</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9D%97"><span class="toc-number">3.2.</span> <span class="toc-text">管理模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E7%BD%AE%E5%87%86%E5%A4%87"><span class="toc-number">3.2.1.</span> <span class="toc-text">前置准备</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E8%B7%AF%E7%94%B1-1"><span class="toc-number">3.2.2.</span> <span class="toc-text">添加路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86%E9%A1%B5%E9%9D%A2"><span class="toc-number">3.2.3.</span> <span class="toc-text">用户管理页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E7%AE%A1%E7%90%86%E9%A1%B5%E9%9D%A2"><span class="toc-number">3.2.4.</span> <span class="toc-text">应用管理页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%98%E7%9B%AE%E7%AE%A1%E7%90%86%E9%A1%B5%E9%9D%A2"><span class="toc-number">3.2.5.</span> <span class="toc-text">题目管理页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%84%E5%88%86%E7%BB%93%E6%9E%9C%E9%A1%B5%E9%9D%A2"><span class="toc-number">3.2.6.</span> <span class="toc-text">评分结果页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9E%E7%AD%94%E7%AE%A1%E7%90%86%E9%A1%B5%E9%9D%A2"><span class="toc-number">3.2.7.</span> <span class="toc-text">回答管理页面</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/07/09/AI%E7%AD%94%E9%A2%98%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0_5.%E5%B9%B3%E5%8F%B0%E6%99%BA%E8%83%BD%E5%8C%96/" title="AI答题应用平台_5平台智能化"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.fanzher.xyz/img/cover8.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="AI答题应用平台_5平台智能化"/></a><div class="content"><a class="title" href="/2024/07/09/AI%E7%AD%94%E9%A2%98%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0_5.%E5%B9%B3%E5%8F%B0%E6%99%BA%E8%83%BD%E5%8C%96/" title="AI答题应用平台_5平台智能化">AI答题应用平台_5平台智能化</a><time datetime="2024-07-09T11:52:50.000Z" title="发表于 2024-07-09 19:52:50">2024-07-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/07/06/AI%E7%AD%94%E9%A2%98%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0_4.%E5%89%8D%E7%AB%AF%E6%A0%B8%E5%BF%83%E5%BC%80%E5%8F%91/" title="AI答题应用平台_4前端核心开发"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.fanzher.xyz/img/cover3.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="AI答题应用平台_4前端核心开发"/></a><div class="content"><a class="title" href="/2024/07/06/AI%E7%AD%94%E9%A2%98%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0_4.%E5%89%8D%E7%AB%AF%E6%A0%B8%E5%BF%83%E5%BC%80%E5%8F%91/" title="AI答题应用平台_4前端核心开发">AI答题应用平台_4前端核心开发</a><time datetime="2024-07-06T07:31:30.000Z" title="发表于 2024-07-06 15:31:30">2024-07-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/07/05/AI%E7%AD%94%E9%A2%98%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0_3.%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E5%BC%80%E5%8F%91/" title="AI答题应用平台_3前端基础开发"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.fanzher.xyz/img/cover8.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="AI答题应用平台_3前端基础开发"/></a><div class="content"><a class="title" href="/2024/07/05/AI%E7%AD%94%E9%A2%98%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0_3.%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E5%BC%80%E5%8F%91/" title="AI答题应用平台_3前端基础开发">AI答题应用平台_3前端基础开发</a><time datetime="2024-07-05T06:25:30.000Z" title="发表于 2024-07-05 14:25:30">2024-07-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/07/03/AI%E7%AD%94%E9%A2%98%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0_2%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/" title="AI答题应用平台_2后端开发"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.fanzher.xyz/img/cover5.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="AI答题应用平台_2后端开发"/></a><div class="content"><a class="title" href="/2024/07/03/AI%E7%AD%94%E9%A2%98%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0_2%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/" title="AI答题应用平台_2后端开发">AI答题应用平台_2后端开发</a><time datetime="2024-07-03T11:28:00.000Z" title="发表于 2024-07-03 19:28:00">2024-07-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/07/01/AI%E7%AD%94%E9%A2%98%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0_1%E9%A1%B9%E7%9B%AE%E6%80%BB%E8%A7%88/" title="AI答题应用平台_1项目总览"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.fanzher.xyz/img/cover9.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="AI答题应用平台_1项目总览"/></a><div class="content"><a class="title" href="/2024/07/01/AI%E7%AD%94%E9%A2%98%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0_1%E9%A1%B9%E7%9B%AE%E6%80%BB%E8%A7%88/" title="AI答题应用平台_1项目总览">AI答题应用平台_1项目总览</a><time datetime="2024-07-01T11:20:00.000Z" title="发表于 2024-07-01 19:20:00">2024-07-01</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2024 By stufz</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="/js/tw_cn.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.8.8/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="30" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-nest.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/metingjs/dist/Meting.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.13.0"></script></div></div><!-- hexo injector body_end start --><script data-pjax>
  function butterfly_footer_beautify_injector_config(){
    var parent_div_git = document.getElementById('footer-wrap');
    var item_html = '<div id="workboard"></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v6.2.0" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" data-title="主题版本Butterfly_v4.3.1" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender" alt=""/></a><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px" data-title="本站采用多线部署，主线路托管于Vercel" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Hosted-Vercel-brightgreen?style=flat&amp;logo=Vercel" alt=""/></a><a class="github-badge" target="_blank" href="https://dashboard.4everland.org/" style="margin-inline:5px" data-title="本站采用多线部署，备用线路托管于4EVERLAND" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Hosted-4EVERLAND-22DDDD?style=flat&amp;logo=IPFS" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub" alt=""/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris" alt=""/></a></p>';
    console.log('已挂载butterfly_footer_beautify')
    parent_div_git.insertAdjacentHTML("beforeend",item_html)
    }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_footer_beautify_injector_config();
  }
  else if (epage === cpage){
    butterfly_footer_beautify_injector_config();
  }
  </script><script async src="https://npm.elemecdn.com/hexo-butterfly-footer-beautify@1.0.0/lib/runtime.js"></script><!-- hexo injector body_end end --></body></html>